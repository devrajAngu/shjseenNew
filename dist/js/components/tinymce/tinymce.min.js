!function(){"use strict";function c(e){return{eq:e}}function u(o){return c(function(e,t){if(e.length!==t.length)return!1;for(var r=e.length,n=0;n<r;n++)if(!o.eq(e[n],t[n]))return!1;return!0})}function w(d){return c(function(e,t){var r,n,o=Object.keys(e),a=Object.keys(t);if(r=u(m),n=function(e){return Array.prototype.slice.call(e).sort(void 0)},!c(function(e,t){return r.eq(n(e),n(t))}).eq(o,a))return!1;for(var i=o.length,s=0;s<i;s++){var l=o[s];if(!d.eq(e[l],t[l]))return!1}return!0})}var n=function(e){var t;return null===e?"null":void 0===e?"undefined":"object"==(t=typeof e)&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},m=c(function(e,t){return e===t}),x=c(function(e,t){var r;return e===t||(r=n(e))===n(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?u(x).eq(e,t):"object"===r&&w(x).eq(e,t))});const r=Object.getPrototypeOf,o=(e,t,r)=>{return!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name},a=r=>e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&o(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===r;var t},i=t=>e=>typeof e===t,s=t=>e=>t===e,y=(e,t)=>se(e)&&o(e,t,(e,t)=>r(e)===t),j=a("string"),se=a("object"),l=e=>y(e,Object),le=a("array"),T=s(null),E=i("boolean"),S=s(void 0),de=e=>null==e,H=e=>!de(e),V=i("function"),N=i("number"),R=(r,n)=>{if(le(r)){for(let e=0,t=r.length;e<t;++e)if(!n(r[e]))return!1;return!0}return!1},q=()=>{},d=(t,r)=>(...e)=>t(r.apply(null,e)),f=(t,r)=>e=>t(r(e)),$=e=>()=>e,p=e=>e,g=(e,t)=>e===t;function D(t,...r){return(...e)=>{e=r.concat(e);return t.apply(null,e)}}const b=t=>e=>!t(e),A=e=>()=>{throw new Error(e)},O=e=>e(),B=e=>{e()},P=$(!1),ce=$(!0);class W{constructor(e,t){this.tag=e,this.value=t}static some(e){return new W(!0,e)}static none(){return W.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?W.some(e(this.value)):W.none()}bind(e){return this.tag?e(this.value):W.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:W.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return H(e)?W.some(e):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const ue=Array.prototype.slice,me=Array.prototype.indexOf,fe=Array.prototype.push,ge=(e,t)=>me.call(e,t),K=(e,t)=>-1<ge(e,t),G=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return!0;return!1},C=(t,r)=>{const n=t.length,o=new Array(n);for(let e=0;e<n;e++){const n=t[e];o[e]=r(n,e)}return o},Y=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},pe=(t,r)=>{for(let e=t.length-1;0<=e;e--)r(t[e],e)},he=(r,n)=>{var o=[],a=[];for(let e=0,t=r.length;e<t;e++){var i=r[e];(n(i,e)?o:a).push(i)}return{pass:o,fail:a}},L=(r,n)=>{var o=[];for(let e=0,t=r.length;e<t;e++){var a=r[e];n(a,e)&&o.push(a)}return o},ve=(e,r,n)=>(pe(e,(e,t)=>{n=r(n,e,t)}),n),be=(e,r,n)=>(Y(e,(e,t)=>{n=r(n,e,t)}),n),ye=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++){var a=r[e];if(n(a,e))return W.some(a);if(o(a,e))break}return W.none()},Ce=(e,t)=>ye(e,t,P),we=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return W.some(e);return W.none()},xe=r=>{var n=[];for(let e=0,t=r.length;e<t;++e){if(!le(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);fe.apply(n,r[e])}return n},ke=(e,t)=>xe(C(e,t)),Ee=(r,n)=>{for(let e=0,t=r.length;e<t;++e)if(!0!==n(r[e],e))return!1;return!0},Se=e=>{e=ue.call(e,0);return e.reverse(),e},_e=(e,t)=>L(e,e=>!K(t,e)),Ne=(r,n)=>{var o={};for(let e=0,t=r.length;e<t;e++){var a=r[e];o[String(a)]=n(a,e)}return o},Re=(e,t)=>{e=ue.call(e,0);return e.sort(t),e},Ae=(e,t)=>0<=t&&t<e.length?W.some(e[t]):W.none(),Oe=e=>Ae(e,0),Te=e=>Ae(e,e.length-1),Be=V(Array.from)?Array.from:e=>ue.call(e),De=(t,r)=>{for(let e=0;e<t.length;e++){var n=r(t[e],e);if(n.isSome())return n}return W.none()},Pe=Object.keys,Me=Object.hasOwnProperty,X=(r,n)=>{var o=Pe(r);for(let e=0,t=o.length;e<t;e++){var a=o[e];n(r[a],a)}},Ie=(e,r)=>{{var n=(e,t)=>({k:t,v:r(e,t)});const o={};return X(e,(e,t)=>{e=n(e,t);o[e.k]=e.v}),o}},Fe=r=>(e,t)=>{r[t]=e},Ue=(e,r,n,o)=>{X(e,(e,t)=>{(r(e,t)?n:o)(e,t)})},ze=(e,t)=>{var r={};return Ue(e,t,Fe(r),q),r},je=(e,r)=>{const n=[];return X(e,(e,t)=>{n.push(r(e,t))}),n},He=e=>je(e,p),M=(e,t)=>Q(e,t)?W.from(e[t]):W.none(),Q=(e,t)=>Me.call(e,t),Ve=(e,t)=>Q(e,t)&&void 0!==e[t]&&null!==e[t],qe=e=>{const t={};return Y(e,e=>{t[e]={}}),Pe(t)},$e=e=>void 0!==e.length,We=Array.isArray,Ke=(r,n,o)=>{if(!r)return!1;if(o=o||r,$e(r)){for(let e=0,t=r.length;e<t;e++)if(!1===n.call(o,r[e],e,r))return!1}else for(const e in r)if(Q(r,e)&&!1===n.call(o,r[e],e,r))return!1;return!0},Ge=(r,n)=>{const o=[];return Ke(r,(e,t)=>{o.push(n(e,t,r))}),o},Ye=(r,n)=>{const o=[];return Ke(r,(e,t)=>{n&&!n(e,t,r)||o.push(e)}),o},Xe=(t,r,e,n)=>{let o=S(e)?t[0]:e;for(let e=0;e<t.length;e++)o=r.call(n,o,t[e],e);return o},Qe=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++)if(n.call(o,r[e],e,r))return e;return-1},Je=e=>e[e.length-1],Ze=t=>{let r,n=!1;return(...e)=>(n||(n=!0,r=t.apply(null,e)),r)},et=()=>tt(0,0),tt=(e,t)=>({major:e,minor:t}),rt={nu:tt,detect:(e,t)=>{var t=String(t).toLowerCase();if(0===e.length)return et();{var r=t;const n=((t,r)=>{for(let e=0;e<t.length;e++){var n=t[e];if(n.test(r))return n}})(e,r);return n?(t=e=>Number(r.replace(n,"$"+e)),tt(t(1),t(2))):{major:0,minor:0}}},unknown:et},nt=(e,t)=>{const r=String(t).toLowerCase();return Ce(e,e=>e.search(r))},ot=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,at=(e,t)=>{return st(e,t)?(t=t.length,e.substring(t)):e},it=(e,t,r=0,n)=>{e=e.indexOf(t,r);return-1!==e&&(!!S(n)||e+t.length<=n)},st=(e,t)=>ot(e,t,0),lt=(e,t)=>ot(e,t,e.length-t.length),dt=t=>e=>e.replace(t,""),ct=dt(/^\s+|\s+$/g),ut=dt(/^\s+/g),mt=dt(/\s+$/g),ft=e=>0<e.length,gt=e=>!ft(e),pt=(e,t=10)=>{e=parseInt(e,t);return isNaN(e)?W.none():W.some(e)},ht=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,vt=t=>e=>it(e,t),bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>it(e,"edge/")&&it(e,"chrome")&&it(e,"safari")&&it(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ht],search:e=>it(e,"chrome")&&!it(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>it(e,"msie")||it(e,"trident")},{name:"Opera",versionRegexes:[ht,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:vt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:vt("firefox")},{name:"Safari",versionRegexes:[ht,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(it(e,"safari")||it(e,"mobile/"))&&it(e,"applewebkit")}],yt=[{name:"Windows",search:vt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>it(e,"iphone")||it(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:vt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:vt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:vt("linux"),versionRegexes:[]},{name:"Solaris",search:vt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:vt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:vt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ct={browsers:$(bt),oses:$(yt)},wt="Chromium",xt="Firefox",kt=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n("Edge"),isChromium:n(wt),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(xt),isSafari:n("Safari")}},Et=()=>kt({current:void 0,version:rt.unknown()}),St=kt,_t=($("Edge"),$(wt),$("IE"),$("Opera"),$(xt),$("Safari"),"Windows"),Nt="Android",Rt="Solaris",At="FreeBSD",Ot="ChromeOS",Tt=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(_t),isiOS:n("iOS"),isAndroid:n(Nt),isMacOS:n("macOS"),isLinux:n("Linux"),isSolaris:n(Rt),isFreeBSD:n(At),isChromeOS:n(Ot)}},Bt=()=>Tt({current:void 0,version:rt.unknown()}),Dt=Tt,Pt=($(_t),$("iOS"),$(Nt),$("Linux"),$("macOS"),$(Rt),$(At),$(Ot),e=>window.matchMedia(e).matches);let Lt=Ze(()=>{{var t=navigator.userAgent,e=W.from(navigator.userAgentData),r=Pt,n,o,a,i,s,l,d;const c=Ct.browsers(),u=Ct.oses(),m=e.bind(e=>{return n=c,e=e,De(e.brands,t=>{const r=t.brand.toLowerCase();return Ce(n,e=>{return r===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(e=>({current:e.name,version:rt.nu(parseInt(t.version,10),0)}))});var n}).orThunk(()=>{return e=c,r=t,nt(e,r).map(e=>{var t=rt.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(Et,St),f=(e=u,d=t,nt(e,d).map(e=>{var t=rt.detect(e.versionRegexes,d);return{current:e.name,version:t}}).fold(Bt,Dt)),g=(e=m,o=t,r=r,a=(n=f).isiOS()&&!0===/ipad/i.test(o),i=n.isiOS()&&!a,s=n.isiOS()||n.isAndroid(),l=s||r("(pointer:coarse)"),r=a||!i&&s&&r("(min-device-width:768px)"),s=i||s&&!r,e=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(o),o=!s&&!r&&!e,{isiPad:$(a),isiPhone:$(i),isTablet:$(r),isPhone:$(s),isTouch:$(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:$(e),isDesktop:$(o)});return{browser:m,os:f,deviceType:g}}});function Mt(e,r,n,o){o=o||this,e&&(n&&(e=e[n]),Ke(e,(e,t)=>!1!==r.call(o,e,t,n)&&(Mt(e,r,n,o),!0)))}const It=()=>Lt(),Ft=navigator.userAgent,Ut=It(),zt=Ut.browser,jt=Ut.os,Ht=Ut.deviceType,Vt=-1!==Ft.indexOf("Windows Phone"),I={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:zt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!zt.isIE(),windowsPhone:Vt,browser:{current:zt.current,version:zt.version,isChromium:zt.isChromium,isEdge:zt.isEdge,isFirefox:zt.isFirefox,isIE:zt.isIE,isOpera:zt.isOpera,isSafari:zt.isSafari},os:{current:jt.current,version:jt.version,isAndroid:jt.isAndroid,isChromeOS:jt.isChromeOS,isFreeBSD:jt.isFreeBSD,isiOS:jt.isiOS,isLinux:jt.isLinux,isMacOS:jt.isMacOS,isSolaris:jt.isSolaris,isWindows:jt.isWindows},deviceType:{isDesktop:Ht.isDesktop,isiPad:Ht.isiPad,isiPhone:Ht.isiPhone,isPhone:Ht.isPhone,isTablet:Ht.isTablet,isTouch:Ht.isTouch,isWebView:Ht.isWebView}},qt=/^\s*|\s*$/g,$t=e=>de(e)?"":(""+e).replace(qt,""),J={trim:$t,isArray:We,is:(e,t)=>t?!("array"!==t||!We(e))||typeof e===t:void 0!==e,toArray:r=>{if(We(r))return r;var n=[];for(let e=0,t=r.length;e<t;e++)n[e]=r[e];return n},makeMap:(e,t,r={})=>{var n=j(e)?e.split(t||","):e||[];let o=n.length;for(;o--;)r[n[o]]={};return r},each:Ke,map:Ge,grep:Ye,inArray:(r,n)=>{if(r)for(let e=0,t=r.length;e<t;e++)if(r[e]===n)return e;return-1},hasOwn:Q,extend:(t,...r)=>{for(let e=0;e<r.length;e++){var n,o=r[e];for(const r in o)Q(o,r)&&void 0!==(n=o[r])&&(t[r]=n)}return t},walk:Mt,resolve:(e,r=window)=>{var n=e.split(".");for(let e=0,t=n.length;e<t&&(r=r[n[e]]);e++);return r},explode:(e,t)=>le(e)?e:""===e?[]:Ge(e.split(t||","),$t),_addCacheSuffix:e=>{var t=I.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Wt=(e,t,r=g)=>e.exists(e=>r(e,t)),Kt=(e,t,r=g)=>Gt(e,t,r).getOr(e.isNone()&&t.isNone()),Gt=(e,t,r)=>e.isSome()&&t.isSome()?W.some(r(e.getOrDie(),t.getOrDie())):W.none(),Yt=(e,t)=>e?W.some(t):W.none(),Xt="undefined"!=typeof window?window:Function("return this;")(),Qt=(e,r)=>{{var n=e.split(".");let t=null!=r?r:Xt;for(let e=0;e<n.length&&null!=t;++e)t=t[n[e]];return t}},Jt=Object.getPrototypeOf,Zt=e=>{var t=Qt("ownerDocument.defaultView",e);return se(e)&&((e=>{var t="HTMLElement";if(e=e,null==(e=Qt("HTMLElement",e)))throw new Error(t+" not available on this browser");return e})(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Jt(e).constructor.name))},Z=e=>e.dom.nodeName.toLowerCase(),er=e=>e.dom.nodeType,tr=t=>e=>er(e)===t,rr=e=>nr(e)&&Zt(e.dom),nr=tr(1),or=tr(3),ar=tr(9),ir=tr(11),sr=t=>e=>nr(e)&&Z(e)===t,lr=(e,t,r)=>{if(!(j(r)||E(r)||N(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},dr=(e,t,r)=>{lr(e.dom,t,r)},cr=(e,t)=>{const r=e.dom;X(t,(e,t)=>{lr(r,t,e)})},ur=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},mr=(e,t)=>W.from(ur(e,t)),fr=(e,t)=>{e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},gr=(e,t)=>{e.dom.removeAttribute(t)},pr=e=>be(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),hr=(e,t)=>{e=ur(e,t);return void 0===e||""===e?[]:e.split(" ")},vr=e=>void 0!==e.dom.classList,br=e=>hr(e,"class"),yr=(e,t)=>{return t=hr(e,"class").concat([t]),dr(e,"class",t.join(" ")),!0},Cr=(e,t)=>{return e=e,r="class",n=t,0<(t=L(hr(e,r),e=>e!==n)).length?dr(e,r,t.join(" ")):gr(e,r),!1;var r,n},wr=(e,t)=>{vr(e)?e.dom.classList.add(t):yr(e,t)},xr=e=>{0===(vr(e)?e.dom.classList:br(e)).length&&gr(e,"class")},kr=(e,t)=>{vr(e)?e.dom.classList.remove(t):Cr(e,t),xr(e)},Er=(e,t)=>vr(e)&&e.dom.classList.contains(t),Sr=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},_r=(e,t)=>{t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return Sr(t.childNodes[0])},Nr=(e,t)=>{t=(t||document).createElement(e);return Sr(t)},Rr=(e,t)=>{t=(t||document).createTextNode(e);return Sr(t)},ee=Sr,Ar=(e,t)=>{const r=[],n=e=>(r.push(e),t(e));let o=t(e);for(;(o=o.bind(n)).isSome(););return r},Or=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Tr=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,F=(e,t)=>e.dom===t.dom,Br=(e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)},Dr=e=>ee(e.dom.ownerDocument),Pr=e=>ar(e)?e:Dr(e),Lr=e=>ee(Pr(e).dom.defaultView),Mr=e=>W.from(e.dom.parentNode).map(ee),Ir=e=>W.from(e.dom.parentElement).map(ee),Fr=(e,t)=>{var r=V(t)?t:P;let n=e.dom;for(var o=[];null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=ee(e);if(o.push(t),!0===r(t))break;n=e}return o},Ur=e=>W.from(e.dom.previousSibling).map(ee),zr=e=>W.from(e.dom.nextSibling).map(ee),jr=e=>Se(Ar(e,Ur)),Hr=e=>Ar(e,zr),Vr=e=>C(e.dom.childNodes,ee),qr=(e,t)=>{e=e.dom.childNodes;return W.from(e[t]).map(ee)},$r=e=>qr(e,0),Wr=e=>qr(e,e.dom.childNodes.length-1),Kr=e=>e.dom.childNodes.length,Gr=e=>ir(e)&&H(e.dom.host),Yr=V(Element.prototype.attachShadow)&&V(Node.prototype.getRootNode),Xr=$(Yr),Qr=Yr?e=>ee(e.dom.getRootNode()):Pr,Jr=e=>{if(Gr(e))return e;e=Pr(e).dom.head;if(null==e)throw new Error("Head is not available yet");return ee(e)},Zr=e=>ee(e.dom.host),en=e=>{if(Xr()&&H(e.target)){var t=ee(e.target);if(nr(t)&&tn(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Oe(t)}}return W.from(e.target)},tn=e=>H(e.dom.shadowRoot),rn=e=>{const t=or(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return(e=>{e=Qr(e);return Gr(e)?W.some(e):W.none()})(ee(t)).fold(()=>r.body.contains(t),f(rn,Zr))};var nn,on,an,sn=(e,t,r,n,o)=>e(r,n)?W.some(r):V(o)&&o(r)?W.none():t(r,n,o);const ln=(e,t,r)=>{let n=e.dom;for(var o=V(r)?r:P;n.parentNode;){n=n.parentNode;const e=ee(n);if(t(e))return W.some(e);if(o(e))break}return W.none()},dn=(e,t,r)=>sn((e,t)=>t(e),ln,e,t,r),cn=(e,t,r)=>ln(e,e=>Or(e,t),r),un=(e,t)=>{return t=t,e=void 0===e?document:e.dom,Tr(e)?W.none():W.from(e.querySelector(t)).map(ee)},mn=(e,t,r)=>sn((e,t)=>Or(e,t),cn,e,t,r),fn=(e,t=!1)=>{return rn(e)?e.dom.isContentEditable:(e=e,mn(e,"[contenteditable]").fold($(t),e=>"true"===gn(e)))},gn=e=>e.dom.contentEditable,pn=e=>void 0!==e.style&&V(e.style.getPropertyValue),hn=(e,t,r)=>{if(!j(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);pn(e)&&e.style.setProperty(t,r)},vn=(e,t,r)=>{e=e.dom;hn(e,t,r)},bn=(e,t)=>{const r=e.dom;X(t,(e,t)=>{hn(r,t,e)})},yn=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||rn(e)?n:Cn(r,t)},Cn=(e,t)=>pn(e)?e.style.getPropertyValue(t):"",wn=(e,t)=>{e=e.dom,e=Cn(e,t);return W.from(e).filter(e=>0<e.length)},xn=e=>{var t={},r=e.dom;if(pn(r))for(let e=0;e<r.style.length;e++){var n=r.style.item(e);t[n]=r.style[n]}return t},kn=(e,t)=>{var r;r=e.dom,t=t,pn(r)&&r.style.removeProperty(t),Wt(mr(e,"style").map(ct),"")&&gr(e,"style")},En=(t,r)=>{Mr(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},Sn=(e,t)=>{zr(e).fold(()=>{Mr(e).each(e=>{te(e,t)})},e=>{En(e,t)})},_n=(t,r)=>{$r(t).fold(()=>{te(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})},te=(e,t)=>{e.dom.appendChild(t.dom)},Nn=(e,t)=>{En(e,t),te(t,e)},Rn=(t,e)=>{Y(e,e=>{te(t,e)})},An=e=>{e.dom.textContent="",Y(Vr(e),e=>{re(e)})},re=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},On=e=>{var r,n,t=Vr(e);0<t.length&&(r=e,Y(n=t,(e,t)=>{t=0===t?r:n[t-1];Sn(t,e)})),re(e)},Tn=e=>C(e,ee),Bn=e=>e.dom.innerHTML,Dn=(e,t)=>{const r=Dr(e).dom,n=ee(r.createDocumentFragment()),o=(t=t,(a=(r||document).createElement("div")).innerHTML=t,Vr(ee(a)));var a;Rn(n,o),An(e),te(e,n)},Pn=(e,t,r,n)=>{return t=t,s=r,l=n,r=e=>{var t,r,n,o,a,i;s(e)&&l((t=e,e=ee(en(t).getOr(t.target)),o=()=>t.stopPropagation(),a=()=>t.preventDefault(),i=d(a,o),r=t.clientX,n=t.clientY,{target:e,x:r,y:n,stop:o,prevent:a,kill:i,raw:t}))},(n=e).dom.addEventListener(t,r,!1),{unbind:D(Ln,n,t,r,!1)};var s,l},Ln=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},Mn=(r,n)=>({left:r,top:n,translate:(e,t)=>Mn(r+e,n+t)}),In=Mn,Fn=(e,t)=>void 0!==e?e:void 0!==t?t:0,Un=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?In(r.offsetLeft,r.offsetTop):rn(e)?(r=t.getBoundingClientRect(),In(r.left,r.top)):In(0,0)},zn=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return In(t,e)},jn=(e,t,r)=>{r=(void 0!==r?r.dom:document).defaultView;r&&r.scrollTo(e,t)},Hn=(e,t)=>{It().browser.isSafari()&&V(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Vn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),qn=e=>{const r=void 0===e?window:e,t=r.document,n=zn(ee(t));return(e=>{e=void 0===e?window:e;return It().browser.isFirefox()?W.none():W.from(e.visualViewport)})(r).fold(()=>{var e=r.document.documentElement,t=e.clientWidth,e=e.clientHeight;return Vn(n.left,n.top,t,e)},e=>Vn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},$n=(e,t)=>{let r=[];return Y(Vr(e),e=>{r=(r=t(e)?r.concat([e]):r).concat($n(e,t))}),r},Wn=(e,t)=>{return t=t,e=void 0===e?document:e.dom,Tr(e)?[]:C(e.querySelectorAll(t),ee)},Kn=(e,t,r)=>cn(e,t,r).isSome();class Gn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(r,e,n,t){if(r){if(!t&&r[e])return r[e];if(r!==this.rootNode){let t=r[n];if(t)return t;for(let e=r.parentNode;e&&e!==this.rootNode;e=e.parentNode)if(t=e[n])return t}}}findPreviousNode(e,t){if(e){var r=e.previousSibling;if(!this.rootNode||r!==this.rootNode){if(r){if(!t)for(let e=r.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return r}t=e.parentNode;return t&&t!==this.rootNode?t:void 0}}}}const Yn=t=>e=>!!e&&e.nodeType===t,Xn=e=>!!e&&!Object.getPrototypeOf(e),ne=Yn(1),Qn=e=>{const t=e.toLowerCase();return e=>H(e)&&e.nodeName.toLowerCase()===t},Jn=e=>{const t=e.map(e=>e.toLowerCase());return e=>{return!(!e||!e.nodeName)&&(e=e.nodeName.toLowerCase(),K(t,e))}},Zn=(o,e)=>{const a=e.toLowerCase().split(" ");return t=>{if(ne(t)){var r=t.ownerDocument.defaultView;if(r)for(let e=0;e<a.length;e++){var n=r.getComputedStyle(t,null);if((n?n.getPropertyValue(o):null)===a[e])return!0}}return!1}},eo=t=>e=>ne(e)&&e.hasAttribute(t),to=e=>ne(e)&&e.hasAttribute("data-mce-bogus"),ro=e=>ne(e)&&"TABLE"===e.tagName,no=t=>e=>{if(ne(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1},oo=Jn(["textarea","input"]),oe=Yn(3),ao=Yn(4),io=Yn(7),so=Yn(8),lo=Yn(9),co=Yn(11),_=Qn("br"),uo=Qn("img"),mo=no("true"),k=no("false"),fo=Jn(["td","th"]),go=Jn(["td","th","caption"]),po=Jn(["video","audio","object","embed"]),ho=Qn("li"),vo=Qn("details"),bo=Qn("summary"),yo="\ufeff",Co=" ",wo=e=>e===yo,xo=(r=>{const t=e=>r(e)?W.from(e.dom.nodeValue):W.none();return{get:e=>{if(r(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!r(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(or),ko=e=>xo.get(e),Eo=e=>xo.getOption(e),So=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),_o=t=>{let r;return e=>(r=r||Ne(t,ce),Q(r,Z(e)))},No=_o(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Ro=e=>nr(e)&&!No(e),Ao=e=>nr(e)&&"br"===Z(e),Oo=_o(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),To=_o(["ul","ol","dl"]),Bo=_o(["li","dd","dt"]),Do=_o(["thead","tbody","tfoot"]),Po=_o(["td","th"]),Lo=_o(["pre","script","textarea","style"]),Mo=_o(So),Io=e=>Mo(e)||Ro(e),Fo=()=>{var e=Nr("br");return dr(e,"data-mce-bogus","1"),e},Uo=e=>{An(e),te(e,Fo())},zo=r=>{Wr(r).each(t=>{Ur(t).each(e=>{No(r)&&Ao(t)&&No(e)&&re(t)})})},jo=yo,Ho=wo,Vo=e=>e.replace(/\uFEFF/g,""),qo=ne,$o=oe,Wo=e=>($o(e)&&(e=e.parentNode),qo(e)&&e.hasAttribute("data-mce-caret")),Ko=e=>$o(e)&&Ho(e.data),Go=e=>Wo(e)||Ko(e),Yo=e=>e.firstChild!==e.lastChild||!_(e.firstChild),Xo=e=>{var t=e.container();return!!oe(t)&&(t.data.charAt(e.offset())===jo||e.isAtStart()&&Ko(t.previousSibling))},Qo=e=>{var t=e.container();return!!oe(t)&&(t.data.charAt(e.offset()-1)===jo||e.isAtEnd()&&Ko(t.nextSibling))},Jo=e=>$o(e)&&e.data[0]===jo,Zo=e=>$o(e)&&e.data[e.data.length-1]===jo,ea=e=>{return e&&e.hasAttribute("data-mce-caret")?(r=(r=e.getElementsByTagName("br"))[r.length-1],to(r)&&null!=(t=r.parentNode)&&t.removeChild(r),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null;var t,r},ta=e=>Wo(e.startContainer),ra=mo,na=k,oa=_,aa=oe,ia=Jn(["script","style","textarea"]),sa=Jn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),la=Jn(["table"]),da=Go,ca=e=>!da(e)&&(aa(e)?!ia(e.parentNode):sa(e)||oa(e)||la(e)||ua(e)),ua=e=>{return t=e,!(ne(t)&&"true"===t.getAttribute("unselectable"))&&na(e);var t},ma=(r,e)=>ca(r)&&(t=>{for(let e=r.parentNode;e&&e!==t;e=e.parentNode){if(ua(e))return!1;if(ra(e))return!0}return!0})(e),fa=/^[ \t\r\n]*$/,ga=e=>fa.test(e),pa=e=>"\n"===e||"\r"===e,ha=(e,t=4,o=!0,a=!0)=>{const r=t<=0?"":new Array(t+1).join(" "),i=e.replace(/\t/g,r),n=be(i,(e,t)=>{return-1!==" \f\t\v".indexOf(t)||t===Co?e.pcIsSpace||""===e.str&&o||e.str.length===i.length-1&&a||(r=i,(n=e.str.length+1)<r.length&&0<=n&&pa(r[n]))?{pcIsSpace:!1,str:e.str+Co}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:pa(t),str:e.str+t};var r,n},{pcIsSpace:!1,str:""});return n.str},va=(e,t)=>{return ca(e)&&(r=e,t=t,!(oe(r)&&ga(r.data)&&!((e,t)=>{t=ee(t),e=ee(e);return Kn(e,"pre,code",D(F,t))})(r,t)))||(r=e,ne(r)&&"A"===r.nodeName&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))||ba(e);var r},ba=eo("data-mce-bookmark"),ya=eo("data-mce-bogus"),U=(e,r=!0)=>{{var n=e.dom,o=r,a;let t=0;if(va(n,n))return!1;{let e=n.firstChild;if(!e)return!0;var i=new Gn(e,n);do{if(o){if(a=e,ne(a)&&"all"===a.getAttribute("data-mce-bogus")){e=i.next(!0);continue}if(ya(e)){e=i.next();continue}}if(_(e))t++;else if(va(e,n))return!1;e=i.next()}while(e);return t<=1}}},Ca="data-mce-block",wa=e=>{return e=e,L(Pe(e),e=>!/[A-Z]/.test(e)).join(",")},xa=(e,t)=>H(t.querySelector(e))?(t.setAttribute(Ca,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ca),!1),ka=(e,t)=>{const r=wa(e.getTransparentElements()),n=wa(e.getBlockElements());return L(t.querySelectorAll(r),e=>xa(n,e))},Ea=(t,e)=>{var r,n=e?"lastChild":"firstChild";for(let e=t[n];e;e=e[n])if(U(ee(e)))return void(null!=(r=e.parentNode)&&r.removeChild(e))},Sa=(n,e,t)=>{const r=n.getBlockElements(),o=ee(e),i=e=>Z(e)in r,s=e=>F(e,o);Y(Tn(t),r=>{ln(r,i,s).each(t=>{e=r;var e=L(Vr(e),e=>i(e)&&!n.isValidChild(Z(t),Z(e)));if(0<e.length){const r=Ir(t);Y(e,a=>{ln(a,i,s).each(e=>{var t,r,n,o;e=e.dom,t=a.dom,n=document.createRange(),(o=e.parentNode)&&(n.setStartBefore(e),n.setEndBefore(t),r=n.extractContents(),Ea(r,!0),n.setStartAfter(t),n.setEndAfter(e),n=n.extractContents(),Ea(n,!1),U(ee(r))||o.insertBefore(r,e),U(ee(t))||o.insertBefore(t,e),U(ee(n))||o.insertBefore(n,e),o.removeChild(e))})}),r.each(e=>ka(n,e.dom))}})})},_a=(e,t)=>{var r,n=ka(e,t);Sa(e,t,n),r=e,e=t,t=n,Y([...t,...Oa(r,e)?[e]:[]],e=>Y(Wn(ee(e),e.nodeName.toLowerCase()),e=>{Ta(r,e.dom)&&On(e)}))},Na=e=>e.hasAttribute(Ca),Ra=(e,t)=>Q(e.getTransparentElements(),t),Aa=(e,t)=>ne(t)&&Ra(e,t.nodeName),Oa=(e,t)=>Aa(e,t)&&Na(t),Ta=(e,t)=>Aa(e,t)&&!Na(t),Ba=(e,t)=>1===t.type&&Ra(e,t.name)&&j(t.attr(Ca)),Da=It().browser,Pa=e=>Ce(e,nr),La=(e,t)=>e.children&&K(e.children,t),Ma=(e,c={})=>{let u=0;const m={},f=ee(e),g=Pr(f),t=d=>new Promise((e,t)=>{let r;const n=J._addCacheSuffix(d),o=(a=n,M(m,a).getOrThunk(()=>({id:"mce-u"+u++,passed:[],failed:[],count:0})));var a;(m[n]=o).count++;const i=(e,t)=>{Y(e,B),o.status=t,o.passed=[],o.failed=[],r&&(r.onload=null,r.onerror=null,r=null)},s=()=>i(o.passed,2),l=()=>i(o.failed,3);e&&o.passed.push(e),t&&o.failed.push(t),1!==o.status&&(2===o.status?s():3===o.status?l():(o.status=1,a=Nr("link",g.dom),cr(a,{rel:"stylesheet",type:"text/css",id:o.id}),c.contentCssCors&&dr(a,"crossOrigin","anonymous"),c.referrerPolicy&&dr(a,"referrerpolicy",c.referrerPolicy),(r=a.dom).onload=s,r.onerror=l,e=a,te(Jr(f),e),dr(a,"href",n)))}),r=e=>{const r=J._addCacheSuffix(e);M(m,r).each(e=>{var t;0==--e.count&&(delete m[r],e=e.id,t=Jr(f),un(t,"#"+e).each(re))})};return{load:t,loadAll:e=>Promise.allSettled(C(e,e=>t(e).then($(e)))).then(e=>{e=he(e,e=>"fulfilled"===e.status);return 0<e.fail.length?Promise.reject(C(e.fail,e=>e.reason)):C(e.pass,e=>e.value)}),unload:r,unloadAll:e=>{Y(e,e=>{r(e)})},_setReferrerPolicy:e=>{c.referrerPolicy=e},_setContentCssCors:e=>{c.contentCssCors=e}}},Ia=(()=>{const n=new WeakMap;return{forElement:(e,t)=>{const r=Qr(e).dom;return W.from(n.get(r)).getOrThunk(()=>{var e=Ma(r,t);return n.set(r,e),e})}}})(),Fa=(e,t)=>H(e)&&(va(e,t)||Ro(ee(e))),Ua=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),za=(t,e,r)=>{var n,o,a=r||e;if(!ne(e)||!Ua(e)){var i=e.childNodes;for(let e=i.length-1;0<=e;e--)za(t,i[e],a);if(ne(e)){const t=e.childNodes;1!==t.length||!Ua(t[0])||null!=(r=e.parentNode)&&r.insertBefore(t[0],e)}r=e,co(r)||lo(r)||va(e,a)||(r=e,!!ne(r)&&0<r.childNodes.length)||(r=e,n=a,oe(r)&&0<r.data.length&&(r=r,n=n,o=new Gn(r,n).prev(!1),r=new Gn(r,n).next(!1),o=S(o)||Fa(o,n),r=S(r)||Fa(r,n),o)&&r)||t.remove(e)}return e},ja=J.makeMap,Ha=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Va=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qa=/[<>&\"\']/g,$a=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Wa={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Ka={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ga={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Ya=(e,t)=>{var r={};if(e){var n=e.split(",");t=t||10;for(let e=0;e<n.length;e+=2){var o=String.fromCharCode(parseInt(n[e],t));if(!Ka[o]){const t="&"+n[e+1]+";";r[o]=t,r[t]=o}}return r}},Xa=Ya("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Qa=(e,t)=>e.replace(t?Ha:Va,e=>Ka[e]||e),Ja=(e,t)=>e.replace(t?Ha:Va,e=>1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Ka[e]||"&#"+e.charCodeAt(0)+";"),Za=(e,t,r)=>{const n=r||Xa;return e.replace(t?Ha:Va,e=>Ka[e]||n[e]||e)},ei={encodeRaw:Qa,encodeAllRaw:e=>(""+e).replace(qa,e=>Ka[e]||e),encodeNumeric:Ja,encodeNamed:Za,getEncodeFunc:(e,t)=>{const r=Ya(t)||Xa,n=ja(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?Ha:Va,e=>void 0!==Ka[e]?Ka[e]:void 0!==r[e]?r[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):n.named?t?(e,t)=>Za(e,t,r):Za:n.numeric?Ja:Qa},decode:e=>e.replace($a,(e,t)=>{return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Wa[t]||String.fromCharCode(t):Ga[e]||Xa[e]||(t=e,(e=Nr("div").dom).innerHTML=t,e.textContent)||e.innerText||t})},ti=(e,t)=>(e=J.trim(e))?e.split(t||" "):[],ri=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),ni={},oi=J.makeMap,ai=J.each,ii=J.extend,si=J.explode,li=(e,t={})=>{e=oi(e," ",oi(e.toUpperCase()," "));return ii(e,t)},di=e=>li("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ci=(e,r)=>{if(e){const n={};return j(e)&&(e={"*":e}),ai(e,(e,t)=>{n[t]=n[t.toUpperCase()]=("map"===r?oi:si)(e,/[, ]/)}),n}},ui=(o={})=>{const a={},i={};let s=[];const t={},r={},e=(t,r,n)=>{var e=o[t];if(e)return oi(e,/[, ]/,oi(e.toUpperCase(),/[, ]/));{let e=ni[t];return e||(e=li(r,n),ni[t]=e),e}},n=null!=(R=o.schema)?R:"html5",l=(o=>{const{globalAttributes:i,phrasingContent:t,flowContent:r}=(()=>{let e,t,r,n;return e="id accesskey class dir lang style tabindex title role",t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==o&&(e+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==o&&(e+=" xml:lang",r=[r,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "),n=[t,r].join(" ")),n=n||[t,r].join(" "),{globalAttributes:e,blockContent:t,phrasingContent:r,flowContent:n}})(),s={},n=(e,t="",r="")=>{var n=ti(r),o=ti(e);let a=o.length;for(;a--;){const e=ti([i,t].join(" "));s[o[a]]={attributes:Ne(e,$({})),attributesOrder:e,children:Ne(n,$({}))}}},e=(r,e)=>{var t=ti(r),n=ti(e);let o=t.length;for(;o--;){const r=s[t[o]];for(let e=0,t=n.length;e<t;e++)r.attributes[n[e]]={},r.attributesOrder.push(n[e])}};return"html5-strict"!==o&&(Y(ti("acronym applet basefont big font strike tt"),e=>{n(e,"",t)}),Y(ti("center dir isindex noframes"),e=>{n(e,"",r)})),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),n("dd div","",r),n("address dt caption","","html4"===o?t:r),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",t),n("blockquote","cite",r),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",r),n("dl","","dt dd"),n("a","href target rel media hreflang type","html4"===o?t:r),n("q","cite",t),n("ins del","cite datetime",r),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",r),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),n("param","name value"),n("map","name",[r,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"===o?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",r),n("th","colspan rowspan headers scope abbr",r),n("form","accept-charset action autocomplete enctype method name novalidate target",r),n("fieldset","disabled form name",[r,"legend"].join(" ")),n("label","form for",t),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===o?r:t),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[r,"li"].join(" ")),n("noscript","",r),"html4"!==o&&(n("wbr"),n("ruby","",[t,"rt rp"].join(" ")),n("figcaption","",r),n("mark rt rp summary bdi","",t),n("canvas","width height",r),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[t,"option"].join(" ")),n("article section nav aside main header footer","",r),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[r,"figcaption"].join(" ")),n("time","datetime",t),n("dialog","open",r),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",t),n("progress","value max",t),n("meter","value min max low high optimum",t),n("details","open",[r,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==o&&(e("script","language xml:space"),e("style","xml:space"),e("object","declare classid code codebase codetype archive standby align border hspace vspace"),e("embed","align name hspace vspace"),e("param","valuetype type"),e("a","charset name rev shape coords"),e("br","clear"),e("applet","codebase archive code object alt name width height align hspace vspace"),e("img","name longdesc align border hspace vspace"),e("iframe","longdesc frameborder marginwidth marginheight scrolling align"),e("font basefont","size color face"),e("input","usemap align"),e("select"),e("textarea"),e("h1 h2 h3 h4 h5 h6 div p legend caption","align"),e("ul","type compact"),e("li","type"),e("ol dl menu dir","compact"),e("pre","width xml:space"),e("hr","align noshade size width"),e("isindex","prompt"),e("table","summary width frame rules cellspacing cellpadding align bgcolor"),e("col","width align char charoff valign"),e("colgroup","width align char charoff valign"),e("thead","align char charoff valign"),e("tr","align char charoff valign bgcolor"),e("th","axis align char charoff valign nowrap bgcolor width height"),e("form","accept"),e("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),e("tfoot","align char charoff valign"),e("tbody","align char charoff valign"),e("area","nohref"),e("body","background bgcolor text link vlink alink")),"html4"!==o&&(e("input button select textarea","autofocus"),e("input textarea","placeholder"),e("a","download"),e("link script img","crossorigin"),e("img","loading"),e("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==o&&Y([s.video,s.audio],e=>{delete e.children.audio,delete e.children.video}),Y(ti("a form meter progress dfn"),e=>{s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,s})(n),d=(!1===o.verify_html&&(o.valid_elements="*[*]"),ci(o.valid_styles)),c=ci(o.invalid_styles,"map"),u=ci(o.valid_classes,"map"),m=e("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=e("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),h="td th iframe video audio object script code",v=e("non_empty_elements",h+" pre",g),b=e("move_caret_before_on_enter_elements",h+" table",g),y=e("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),C=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),w=e("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),x=e("transparent_elements","a ins del canvas map"),k=(ai("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{r[e]=new RegExp("</"+e+"[^>]*>","gi")}),e=>{const t=W.from(a["@"]),n=/[*?+]/;Y(((u,e)=>{const m=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ke(ti(e,","),e=>{var t=m.exec(e);if(t){const e=t[1],m=t[2],r=t[3],n=t[4],o=t[5],i={attributes:{},attributesOrder:[]};if(u.each(e=>{return e=e,r=i,X(e.attributes,(e,t)=>{r.attributes[t]=e}),void r.attributesOrder.push(...e.attributesOrder);var r}),"#"===e?i.paddEmpty=!0:"-"===e&&(i.removeEmpty=!0),"!"===n&&(i.removeEmptyAttrs=!0),o){t=o;var a=i;const s=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,l=/[*?+]/,{attributes:d,attributesOrder:c}=a;Y(ti(t,"|"),e=>{var t=s.exec(e);if(t){const e={},s=t[1],r=t[2].replace(/[\\:]:/g,":"),n=t[3],o=t[4];if("!"===s&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(r),e.required=!0),"-"===s)delete d[r],c.splice(J.inArray(c,r),1);else if(n&&("="===n?(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:r,value:o}),e.defaultValue=o):"~"===n?(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:r,value:o}),e.forcedValue=o):"<"===n&&(e.validValues=J.makeMap(o,"?"))),l.test(r)){const s=e;a.attributePatterns=a.attributePatterns||[],s.pattern=ri(r),a.attributePatterns.push(s)}else d[r]||c.push(r),d[r]=e}})}if(r&&(i.outputName=m),"@"===m){if(!u.isNone())return[];u=W.some(i)}return[r?{name:m,element:i,aliasName:r}:{name:m,element:i}]}return[]})})(t,null!=e?e:""),({name:e,element:t,aliasName:r})=>{if(r&&(a[r]=t),n.test(e)){const a=t;a.pattern=ri(e),s.push(a)}else a[e]=t})}),E=e=>{s=[],Y(Pe(a),e=>{delete a[e]}),k(e)},S=e=>{delete ni.text_block_elements,delete ni.block_elements,Y((e=>{const r=/^(~)?(.+)$/;return ke(ti(e,","),e=>{var t=r.exec(e);if(t){const e="~"===t[1];return[{inline:e,cloneName:e?"span":"div",name:t[2]}]}return[]})})(null!=e?e:""),({inline:e,name:r,cloneName:n})=>{i[r]=i[n],t[r]=n,v[r.toUpperCase()]={},v[r]={},e||(C[r.toUpperCase()]={},C[r]={}),a[r]||(e=a[n],delete(e=ii({},e)).removeEmptyAttrs,delete e.removeEmpty,a[r]=e),X(i,(e,t)=>{e[n]&&(i[t]=e=ii({},i[t]),e[r]=e[n])})})},_=e=>{Y((e=>{const r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ke(ti(e,","),e=>{var t=r.exec(e);if(t){const e=t[1],r=e?"-"===e?"remove":"add":"replace";return[{operation:r,name:t[2],validChildren:ti(t[3],"|")}]}return[]})})(null!=e?e:""),({operation:t,name:e,validChildren:r})=>{const n="replace"===t?{"#comment":{}}:i[e];Y(r,e=>{"remove"===t?delete n[e]:n[e]={}}),i[e]=n})},N=e=>{const t=a[e];if(t)return t;let r=s.length;for(;r--;){const t=s[r];if(t.pattern.test(e))return t}};o.valid_elements?(E(o.valid_elements),ai(l,(e,t)=>{i[t]=e.children})):(ai(l,(e,t)=>{a[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},i[t]=e.children}),ai(ti("strong/b em/i"),e=>{e=ti(e,"/");a[e[1]].outputName=e[0]}),ai(w,(e,t)=>{a[t]&&(o.padd_empty_block_inline_children&&(a[t].paddInEmptyBlock=!0),a[t].removeEmpty=!0)}),ai(ti("ol ul blockquote a table tbody"),e=>{a[e]&&(a[e].removeEmpty=!0)}),ai(ti("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),e=>{a[e]&&(a[e].paddEmpty=!0)}),ai(ti("span"),e=>{a[e].removeEmptyAttrs=!0})),S(o.custom_elements),_(o.valid_children),k(o.extended_valid_elements),_("+ol[ul|ol],+ul[ul|ol]"),ai({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{a[t]&&(a[t].parentsRequired=ti(e))}),o.invalid_elements&&ai(si(o.invalid_elements),e=>{a[e]&&delete a[e]}),N("span")||k("span[!data-mce-type|*]");var R=$(d),A=$(c),O=$(u),T=$(p),B=$(C),D=$(y),P=$(w),L=$(Object.seal(g)),M=$(f),I=$(v),F=$(b),U=$(m),z=$(x),j=$(Object.seal(r)),H=$(t);return{type:n,children:i,elements:a,getValidStyles:R,getValidClasses:O,getBlockElements:B,getInvalidStyles:A,getVoidElements:L,getTextBlockElements:D,getTextInlineElements:P,getBoolAttrs:T,getElementRule:N,getSelfClosingElements:M,getNonEmptyElements:I,getMoveCaretBeforeOnEnterElements:F,getWhitespaceElements:U,getTransparentElements:z,getSpecialElements:j,isValidChild:(e,t)=>{e=i[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:(t,r)=>{var e=N(t);if(e){if(!r)return!0;{if(e.attributes[r])return!0;const t=e.attributePatterns;if(t){let e=t.length;for(;e--;)if(t[e].pattern.test(r))return!0}}}return!1},getCustomElements:H,addValidElements:k,setValidElements:E,addCustomElements:S,addValidChildren:_}},mi=(h={},e)=>{const v=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,y=/\s+$/,C={};let t,l;const w=yo;e&&(t=e.getValidStyles(),l=e.getInvalidStyles());var r="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let e=0;e<r.length;e++)C[r[e]]=w+e,C[w+e]=r[e];const x={parse:e=>{const d={};let r=!1;const i=h.url_converter,s=h.url_converter_scope||x,t=(t,r,n)=>{var o=d[t+"-top"+r];if(o){var a=d[t+"-right"+r];if(a){var i=d[t+"-bottom"+r];if(i){var s=d[t+"-left"+r];if(s){var l=[o,a,i,s];let e=l.length-1;for(;e--&&l[e]===l[e+1];);-1<e&&n||(d[t+r]=-1===e?l[0]:l.join(" "),delete d[t+"-top"+r],delete d[t+"-right"+r],delete d[t+"-bottom"+r],delete d[t+"-left"+r])}}}}},n=t=>{var r=d[t];if(r){var n=-1<r.indexOf(",")?[r]:r.split(" ");let e=n.length;for(;e--;)if(n[e]!==n[0])return!1;return d[t]=n[0],!0}},o=e=>(r=!0,C[e]),l=(e,t)=>(r&&(e=e.replace(/\uFEFF[0-9]/g,e=>C[e])),e=t?e:e.replace(/\\([\'\";:])/g,"$1")),a=e=>String.fromCharCode(parseInt(e.slice(1),16)),c=e=>e.replace(/\\[0-9a-f]+/gi,a),u=(e,t,r,n,o,a)=>{if(o=o||a)return"'"+(o=l(o)).replace(/\'/g,"\\'")+"'";if(t=l(t||r||n||""),!h.allow_script_urls){const e=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(e))return"";if(!h.allow_svg_data_urls&&/^data:image\/svg/i.test(e))return""}return"url('"+(t=i?i.call(s,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){var m;for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,o));m=b.exec(e);){b.lastIndex=m.index+m[0].length;let e=m[1].replace(y,"").toLowerCase(),t=m[2].replace(y,"");e&&t&&(e=c(e),t=c(t),-1===e.indexOf(w))&&-1===e.indexOf('"')&&(h.allow_script_urls||"behavior"!==e&&!/expression\s*\(|\/\*|\*\//.test(t))&&("font-weight"===e&&"700"===t?t="bold":"color"!==e&&"background-color"!==e||(t=t.toLowerCase()),t=t.replace(v,u),d[e]=r?l(t,!0):t)}t("border","",!0),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),g="border-style",p="border-color",n(f="border-width")&&n(g)&&n(p)&&(d.border=d[f]+" "+d[g]+" "+d[p],delete d[f],delete d[g],delete d[p]),"medium none"===d.border&&delete d.border,"none"===d["border-image"]&&delete d["border-image"]}var f,g,p;return d},serialize:(a,i)=>{let s="";var e=(e,r)=>{var n=r[e];if(n)for(let e=0,t=n.length;e<t;e++){const r=n[e],o=a[r];o&&(s+=(0<s.length?" ":"")+r+": "+o+";")}};return i&&t?(e("*",t),e(i,t)):X(a,(e,t)=>{var r,n,o;!e||(r=t,n=i,l&&n&&((o=l["*"])&&o[r]||(o=l[n])&&o[r]))||(s+=(0<s.length?" ":"")+t+": "+e+";")}),s}};return x},fi={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gi=(e,t)=>{var r=null!=t?t:{};for(const t in e)Q(fi,t)||(r[t]=e[t]);return H(e.composedPath)&&(r.composedPath=()=>e.composedPath()),r},pi=(e,t,r,n)=>{const o=gi(t,n);return o.type=e,de(o.target)&&(o.target=null!=(n=o.srcElement)?n:r),e=t,(de(e.preventDefault)||(e=e)instanceof Event||V(e.initEvent))&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=ce,V(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=ce,V(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=ce,o.stopPropagation()},(n=o).isDefaultPrevented!==ce&&n.isDefaultPrevented!==P&&(o.isDefaultPrevented=!0===o.defaultPrevented?ce:P,o.isPropagationStopped=!0===o.cancelBubble?ce:P,o.isImmediatePropagationStopped=P)),o},hi=/^(?:mouse|contextmenu)|click/,vi=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},bi=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},yi=(e,t)=>{var r=pi(e.type,e,document,t);if(t=e,H(t)&&hi.test(t.type)&&S(e.pageX)&&!S(e.clientX)){const t=r.target.ownerDocument||document,n=t.documentElement,o=t.body,a=r;a.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),a.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return r};class Ci{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,e,a,i){const s=this;let l;const d=window,c=e=>{s.executeHandlers(yi(e||d.event),u)};if(!o||oe(o)||so(o))return a;let u;o[s.expando]?u=o[s.expando]:(u=s.count++,o[s.expando]=u,s.events[u]={}),i=i||o;var m=e.split(" ");let f=m.length;for(;f--;){let e=m[f],t=c,r=!1,n=!1;"DOMContentLoaded"===e&&(e="ready"),s.domLoaded&&"ready"===e&&"complete"===o.readyState?a.call(i,yi({type:e})):(s.hasFocusIn||"focusin"!==e&&"focusout"!==e||(r=!0,n="focusin"===e?"focus":"blur",t=e=>{e=yi(e||d.event);e.type="focus"===e.type?"focusin":"focusout",s.executeHandlers(e,u)}),(l=s.events[u][e])?"ready"===e&&s.domLoaded?a(yi({type:e})):l.push({func:a,scope:i}):(s.events[u][e]=l=[{func:a,scope:i}],l.fakeName=n,l.capture=r,l.nativeHandler=t,"ready"===e?((e,t,r)=>{const n=e.document,o={type:"ready"};if(r.domLoaded)t(o);else{const a=()=>{bi(e,"DOMContentLoaded",a),bi(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():vi(e,"DOMContentLoaded",a),r.domLoaded||vi(e,"load",a)}})(o,t,s):vi(o,n||e,t,r)))}return o=l=null,a}unbind(r,n,o){if(r&&!oe(r)&&!so(r)){const a=r[this.expando];if(a){let t=this.events[a];if(n){const a=n.split(" ");let e=a.length;for(;e--;){const n=a[e],i=t[n];if(i){if(o){let e=i.length;for(;e--;)if(i[e].func===o){const o=i.nativeHandler,a=i.fakeName,s=i.capture,l=i.slice(0,e).concat(i.slice(e+1));l.nativeHandler=o,l.fakeName=a,l.capture=s,t[n]=l}}o&&0!==i.length||(delete t[n],bi(r,i.fakeName||n,i.nativeHandler,i.capture))}}}else X(t,(e,t)=>{bi(r,e.fakeName||t,e.nativeHandler,e.capture)}),t={};for(const r in t)if(Q(t,r))return this;delete this.events[a];try{delete r[this.expando]}catch(n){r[this.expando]=null}}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(e&&!oe(e)&&!so(e)){var n=yi({type:t,target:e},r);do{const t=e[this.expando];t&&this.executeHandlers(n,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped())}return this}clean(t){if(t&&!oe(t)&&!so(t)&&(t[this.expando]&&this.unbind(t),t=t.getElementsByTagName?t:t.document)&&t.getElementsByTagName){this.unbind(t);var r=t.getElementsByTagName("*");let e=r.length;for(;e--;)(t=r[e])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(r,e){const n=this.events[e],o=n&&n[r.type];if(o)for(let e=0,t=o.length;e<t;e++){const n=o[e];if(n&&!1===n.func.call(n.scope,r)&&r.preventDefault(),r.isImmediatePropagationStopped())return}}}Ci.Event=new Ci;const wi=J.each,xi=J.grep,ki="data-mce-style",Ei=J.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Si=(e,t,r)=>{de(r)||""===r?gr(e,t):dr(e,t,r)},_i=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Ni=(r,n)=>{let o=0;if(r)for(let e=r.nodeType,t=r.previousSibling;t;t=t.previousSibling){const r=t.nodeType;n&&oe(t)&&(r===e||!t.data.length)||(o++,e=r)}return o},Ri=(e,t)=>{var r=ur(t,"style"),e=e.serialize(e.parse(r),Z(t));Si(t,ki,e)},Ai=(e,t,r)=>{t=_i(t);de(r)||""===r?kn(e,t):vn(e,t,(e=r,r=t,N(e)?Q(Ei,r)?e+"":e+"px":e))},ae=(s,i={})=>{const r={},l=window,o={};let I=0;const a=Ia.forElement(ee(s),{contentCssCors:i.contentCssCors,referrerPolicy:i.referrerPolicy}),d=[],c=i.schema||ui({}),n=mi({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),u=i.ownEvents?new Ci:Ci.Event,t=c.getBlockElements(),m=e=>e&&s&&j(e)?s.getElementById(e):e,f=e=>{e=m(e);return H(e)?ee(e):null},g=(e,t,r="")=>{let n;var o=f(e);if(H(o)&&nr(o)){const e=z[t];n=e&&e.get?e.get(o.dom,t):ur(o,t)}return H(n)?n:r},p=e=>{e=m(e);return de(e)?[]:e.attributes},h=(e,o,a)=>{E(e,e=>{var t,r,n;ne(e)&&(e=ee(e),t=""===a?null:a,r=ur(e,o),(n=z[o])&&n.set?n.set(e.dom,t,o):Si(e,o,t),r!==t)&&i.onSetAttrib&&i.onSetAttrib({attrElm:e.dom,attrName:o,attrValue:t})})},v=()=>i.root_element||s.body,b=(n,o)=>{{var a=s.body,i=(n=m(n),o);let t=0,r=0;if(o=a.ownerDocument,i=i||a,n){if(i===a&&n.getBoundingClientRect&&"static"===yn(ee(a),"position")){const i=n.getBoundingClientRect();return t=i.left+(o.documentElement.scrollLeft||a.scrollLeft)-o.documentElement.clientLeft,r=i.top+(o.documentElement.scrollTop||a.scrollTop)-o.documentElement.clientTop,{x:t,y:r}}let e=n;for(;e&&e!==i&&e.nodeType&&!La(e,i);){const a=e;t+=a.offsetLeft||0,r+=a.offsetTop||0,e=a.offsetParent}for(e=n.parentNode;e&&e!==i&&e.nodeType&&!La(e,i);)t-=e.scrollLeft||0,r-=e.scrollTop||0,e=e.parentNode;r+=(a=ee(n),Da.isFirefox()&&"table"===Z(a)?Pa(Vr(a)).filter(e=>"caption"===Z(e)).bind(n=>Pa(Hr(n)).map(e=>{var e=e.dom.offsetTop,t=n.dom.offsetTop,r=n.dom.offsetHeight;return e<=t?-r:0})).getOr(0):0)}return{x:t,y:r}}},y=(e,t,r)=>{e=m(e);if(!de(e)&&ne(e))return r?yn(ee(e),_i(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),e.style?e.style[t]:void 0)},C=e=>{e=m(e);if(!e)return{w:0,h:0};let t=y(e,"width"),r=y(e,"height");return t&&-1!==t.indexOf("px")||(t="0"),r&&-1!==r.indexOf("px")||(r="0"),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},w=(e,t)=>{return!!e&&(e=le(e)?e:[e],G(e,e=>Or(ee(e),t)))},x=(t,e,r,n)=>{var o=[];let a=m(t);n=void 0===n;var i=r||("BODY"!==v().nodeName?v().parentNode:null);if(j(e))if("*"===e)e=ne;else{const t=e;e=e=>w(e,t)}for(;a&&!(a===i||de(a.nodeType)||lo(a)||co(a));){if(!e||e(a)){if(!n)return[a];o.push(a)}a=a.parentNode}return n?o:null},k=(t,r,n)=>{let o=r;if(t){j(r)&&(o=e=>w(e,r));for(let e=t[n];e;e=e[n])if(V(o)&&o(e))return e}return null},E=function(e,r,n){const o=null!=n?n:this;if(le(e)){const n=[];return wi(e,(e,t)=>{e=m(e);e&&n.push(r.call(o,e,t))}),n}{const n=m(e);return!!n&&r.call(o,n)}},S=(e,t)=>{E(e,r=>{X(t,(e,t)=>{h(r,t,e)})})},_=(e,t)=>{E(e,e=>{e=ee(e);Dn(e,t)})},N=(e,r,n,o,a)=>E(e,e=>{var t=j(r)?s.createElement(r):r;return H(n)&&S(t,n),o&&(!j(o)&&o.nodeType?t.appendChild(o):j(o)&&_(t,o)),a?t:e.appendChild(t)}),R=(e,t,r)=>N(s.createElement(e),e,t,r,!0),A=ei.encodeAllRaw,O=(e,r)=>E(e,e=>{const t=ee(e);return r&&Y(Vr(t),e=>{or(e)&&0===e.dom.length?re(e):En(t,e)}),re(t),t.dom}),T=(e,n,o)=>{E(e,e=>{if(ne(e)){const t=ee(e),r=n.split(" ");Y(r,e=>{(H(o)?o?wr:kr:(e,t)=>{var r;vr(e)?e.dom.classList.toggle(t):(r=e,t=t,(K(br(r),t)?Cr:yr)(r,t));xr(e)})(t,e)})}})},B=(n,o,a)=>E(o,e=>{var t;const r=le(o)?n.cloneNode(!0):n;return a&&wi(xi(e.childNodes),e=>{r.appendChild(e)}),null!=(t=e.parentNode)&&t.replaceChild(r,e),e}),D=e=>{if(ne(e)){var t="a"===e.nodeName.toLowerCase()&&!g(e,"href")&&g(e,"id");if(g(e,"name")||g(e,"data-mce-bookmark")||t)return!0}return!1},P=()=>s.createRange(),L=(t,r,n,o)=>{if(le(t)){let e=t.length;const i=[];for(;e--;)i[e]=L(t[e],r,n,o);return i}return!i.collect||t!==s&&t!==l||d.push([t,r,n,o]),u.bind(t,r,n,o||M)},F=(t,r,n)=>{if(le(t)){let e=t.length;const l=[];for(;e--;)l[e]=F(t[e],r,n);return l}if(0<d.length&&(t===s||t===l)){let e=d.length;for(;e--;){const[l,o,a]=d[e];t!==l||r&&r!==o||n&&n!==a||u.unbind(l,o,a)}}return u.unbind(t,r,n)},U=e=>{var t;return e&&ne(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},M={doc:s,settings:i,win:l,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:d,styles:n,schema:c,events:u,isBlock:e=>j(e)?Q(t,e):ne(e)&&(Q(t,e.nodeName)||Oa(c,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:v,getViewPort:e=>{e=qn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:e=>{var e=m(e),t=b(e),e=C(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:C,getParent:(e,t,r)=>{e=x(e,t,r,!1);return e&&0<e.length?e[0]:null},getParents:x,get:m,getNext:(e,t)=>k(e,t,"nextSibling"),getPrev:(e,t)=>k(e,t,"previousSibling"),select:(e,t)=>{t=null!=(t=null!=(t=m(t))?t:i.root_element)?t:s;return V(t.querySelectorAll)?Be(t.querySelectorAll(e)):[]},is:w,add:N,create:R,createHTML:(e,t,r="")=>{let n="<"+e;for(const e in t)Ve(t,e)&&(n+=" "+e+'="'+A(t[e])+'"');return gt(r)&&Q(c.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:e=>{var t,r=s.createElement("div"),n=s.createDocumentFragment();for(n.appendChild(r),e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n.removeChild(r),n},remove:O,setStyle:(e,t,r)=>{E(e,e=>{e=ee(e);Ai(e,t,r),i.update_styles&&Ri(n,e)})},getStyle:y,setStyles:(e,t)=>{E(e,e=>{const r=ee(e);X(t,(e,t)=>{Ai(r,t,e)}),i.update_styles&&Ri(n,r)})},removeAllAttribs:e=>E(e,t=>{var r=t.attributes;for(let e=r.length-1;0<=e;e--)t.removeAttributeNode(r.item(e))}),setAttrib:h,setAttribs:S,getAttrib:g,getPos:b,parseStyle:e=>n.parse(e),serializeStyle:(e,t)=>n.serialize(e,t),addStyle:e=>{if(M!==ae.DOM&&s===document){if(r[e])return;r[e]=!0}let t=s.getElementById("mceDefaultStyles");if(!t){(t=s.createElement("style")).id="mceDefaultStyles",t.type="text/css";const e=s.head;e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(s.createTextNode(e))},loadCSS:e=>{e=e||"",Y(e.split(","),e=>{o[e]=!0,a.load(e).catch(q)})},addClass:(e,t)=>{T(e,t,!0)},removeClass:(e,t)=>{T(e,t,!1)},hasClass:(e,t)=>{const r=f(e),n=t.split(" ");return H(r)&&Ee(n,e=>Er(r,e))},toggleClass:T,show:e=>{E(e,e=>kn(ee(e),"display"))},hide:e=>{E(e,e=>vn(ee(e),"display","none"))},isHidden:e=>{e=f(e);return H(e)&&Wt(wn(e,"display"),"none")},uniqueId:e=>(e||"mce_")+I++,setHTML:_,getOuterHTML:e=>{var t,e=f(e);return H(e)?ne(e.dom)?e.dom.outerHTML:(e=e,t=Nr("div"),e=ee(e.dom.cloneNode(!0)),te(t,e),Bn(t)):""},setOuterHTML:(e,t)=>{E(e,e=>{ne(e)&&(e.outerHTML=t)})},decode:ei.decode,encode:A,insertAfter:(e,t)=>{const n=m(t);return E(e,e=>{var t=null==n?void 0:n.parentNode,r=null==n?void 0:n.nextSibling;return t&&(r?t.insertBefore(e,r):t.appendChild(e)),e})},replace:B,rename:(t,e)=>{if(t.nodeName===e.toUpperCase())return t;{const r=R(e);return wi(p(t),e=>{h(r,e.nodeName,g(t,e.nodeName))}),B(r,t,!0),r}},findCommonAncestor:(e,t)=>{let r=e;for(;r;){let e=t;for(;e&&r!==e;)e=e.parentNode;if(r===e)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:E,getAttribs:p,isEmpty:(t,r,n)=>{let o=0;if(D(t))return!1;var a=t.firstChild;if(a){var i=new Gn(a,t),s=c?c.getWhitespaceElements():{},l=r||(c?c.getNonEmptyElements():null);let e=a;do{if(ne(e)){const t=e.getAttribute("data-mce-bogus");if(t){e=i.next("all"===t);continue}const r=e.nodeName.toLowerCase();if(l&&l[r]){if("br"!==r)return!1;o++,e=i.next();continue}if(D(e))return!1}if(so(e))return!1;if(oe(e)&&!ga(e.data)&&(null==n||!n.includeZwsp||!(e=>{for(const t of e)if(!wo(t))return!1;return!0})(e.data)))return!1;if(oe(e)&&e.parentNode&&s[e.parentNode.nodeName]&&ga(e.data))return!1;e=i.next()}while(e)}return o<=1},createRng:P,nodeIndex:Ni,split:(e,t,r)=>{let n,o,a=P();var i;if(e&&t&&e.parentNode&&t.parentNode)return i=e.parentNode,a.setStart(i,Ni(e)),a.setEnd(t.parentNode,Ni(t)),n=a.extractContents(),(a=P()).setStart(t.parentNode,Ni(t)+1),a.setEnd(i,Ni(e)+1),o=a.extractContents(),i.insertBefore(za(M,n),e),r?i.insertBefore(r,e):i.insertBefore(t,e),i.insertBefore(za(M,o),e),O(e),r||t},bind:L,unbind:F,fire:(e,t,r)=>u.dispatch(e,t,r),dispatch:(e,t,r)=>u.dispatch(e,t,r),getContentEditable:U,getContentEditableParent:t=>{var r=v();let n=null;for(let e=t;e&&e!==r&&null===(n=U(e));e=e.parentNode);return n},isEditable:e=>{return!!H(e)&&(e=ne(e)?e:e.parentElement,H(e))&&fn(ee(e))},destroy:()=>{if(0<d.length){let e=d.length;for(;e--;){var[t,r,n]=d[e];u.unbind(t,r,n)}}X(o,(e,t)=>{a.unload(t),delete o[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},z=((r,o,a)=>{const n=o.keep_values,e={set:(e,t,r)=>{var n=ee(e);V(o.url_converter)&&H(t)&&(t=o.url_converter.call(o.url_converter_scope||a(),String(t),r,e)),Si(n,"data-mce-"+r,t),Si(n,r,t)},get:(e,t)=>{e=ee(e);return ur(e,"data-mce-"+t)||ur(e,t)}},t={style:{set:(e,t)=>{e=ee(e);n&&Si(e,ki,t),gr(e,"style"),j(t)&&bn(e,r.parse(t))},get:e=>{var e=ee(e),t=ur(e,ki)||ur(e,"style");return r.serialize(r.parse(t),Z(e))}}};return n&&(t.href=t.src=e),t})(n,i,$(M));return M},Oi=(ae.DOM=ae(document),ae.nodeIndex=Ni,ae.DOM);class Ti{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(i){return new Promise((e,t)=>{const r=Oi;let n;const o=()=>{r.remove(a),n&&(n.onerror=n.onload=n=null)},a=r.uniqueId();(n=document.createElement("script")).id=a,n.type="text/javascript",n.src=J._addCacheSuffix(i),this.settings.referrerPolicy&&r.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{o(),e()},n.onerror=()=>{o(),t("Failed to load script: "+i)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(r){const n=this;return n.queue.push(r),void 0===n.states[r]&&(n.states[r]=0),new Promise((e,t)=>{n.scriptLoadedCallbacks[r]||(n.scriptLoadedCallbacks[r]=[]),n.scriptLoadedCallbacks[r].push({resolve:e,reject:t})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(t,r)=>{M(n.scriptLoadedCallbacks,r).each(e=>{Y(e,e=>e[t](r))}),delete n.scriptLoadedCallbacks[r]},o=e=>{e=L(e,e=>"rejected"===e.status);return 0<e.length?Promise.reject(ke(e,({reason:e})=>le(e)?e:[e])):Promise.resolve()},a=e=>Promise.allSettled(C(e,t=>2===n.states[t]?(r("resolve",t),Promise.resolve()):3===n.states[t]?(r("reject",t),Promise.reject(t)):(n.states[t]=1,n.loadScript(t).then(()=>{n.states[t]=2,r("resolve",t);var e=n.queue;return 0<e.length?(n.queue=[],a(e).then(o)):Promise.resolve()},()=>(n.states[t]=3,r("reject",t),Promise.reject(t)))))),i=e=>(n.loading=!0,a(e).then(e=>{n.loading=!1;var t=n.queueLoadedCallbacks.shift();return W.from(t).each(B),o(e)})),s=qe(e);return n.loading?new Promise((e,t)=>{n.queueLoadedCallbacks.push(()=>{i(s).then(e,t)})}):i(s)}}Ti.ScriptLoader=new Ti;const Bi=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Di={},Pi=Bi("en"),Li=()=>M(Di,Pi.get()),Mi={getData:()=>Ie(Di,e=>({...e})),setCode:e=>{e&&Pi.set(e)},getCode:()=>Pi.get(),add:(e,i)=>{let s=Di[e];s||(Di[e]=s={});const l=C(Pe(i),e=>e.toLowerCase());X(i,(e,t)=>{var r,n,o,a=t.toLowerCase();a!==t&&(r=l,n=a,-1!==(o=r.indexOf(n)))&&r.indexOf(n,o+1)>o?(Q(i,a)||(s[a]=e),s[t]=e):s[a]=e})},translate:e=>{const r=Li().getOr({}),n=e=>V(e)?Object.prototype.toString.call(e):t(e)?"":""+e,t=e=>""===e||null==e,o=e=>{e=n(e);return Q(r,e)?n(r[e]):M(r,e.toLowerCase()).map(n).getOr(e)},a=e=>e.replace(/{context:\w+}$/,"");if(t(e))return"";if(se(i=e)&&Q(i,"raw"))return n(e.raw);var i;if(i=e,le(i)&&1<i.length){const r=e.slice(1);return a(o(e[0]).replace(/\{([0-9]+)\}/g,(e,t)=>Q(r,t)?n(r[t]):e))}return a(o(e))},isRtl:()=>Li().bind(e=>M(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>Q(Di,e)},Ii=()=>{const r=[],n={},o={},a=[],i=(t,r)=>{var e=L(a,e=>e.name===t&&e.state===r);Y(e,e=>e.resolve())},s=e=>Q(n,e),l=(e,t)=>{var r=Mi.getCode();!r||t&&-1===(","+(t||"")+",").indexOf(","+r+",")||Ti.ScriptLoader.add(n[e]+"/langs/"+r+".js")},d=(t,r="added")=>{return"added"===r&&(e=t,Q(o,e))||"loaded"===r&&s(t)?Promise.resolve():new Promise(e=>{a.push({name:t,state:r,resolve:e})});var e};return{items:r,urls:n,lookup:o,get:e=>{if(o[e])return o[e].instance},requireLangPack:(e,t)=>{!1!==Ii.languageLoad&&(s(e)?l(e,t):d(e,"loaded").then(()=>l(e,t)))},add:(e,t)=>(r.push(t),o[e]={instance:t},i(e,"added"),t),remove:e=>{delete n[e],delete o[e]},createUrl:(e,t)=>j(t)?j(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,t)=>{if(n[e])return Promise.resolve();let r=j(t)?t:t.prefix+t.resource+t.suffix;0!==r.indexOf("/")&&-1===r.indexOf("://")&&(r=Ii.baseURL+"/"+r),n[e]=r.substring(0,r.lastIndexOf("/"));t=()=>(i(e,"loaded"),Promise.resolve());return o[e]?t():Ti.ScriptLoader.add(r).then(t)},waitFor:d}},Fi=(Ii.languageLoad=!0,Ii.baseURL="",Ii.PluginManager=Ii(),Ii.ThemeManager=Ii(),Ii.ModelManager=Ii(),()=>{const t=(e=>{const t=Bi(W.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(W.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(W.some(e))}}})(q);return{...t,on:e=>t.get().each(e)}}),Ui=(t,r)=>{let n=null;return{cancel:()=>{T(n)||(clearTimeout(n),n=null)},throttle:(...e)=>{T(n)&&(n=setTimeout(()=>{n=null,t.apply(null,e)},r))}}},zi=(t,r)=>{let n=null;const o=()=>{T(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...e)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,e)},r)}}},ji=$("mce-annotation"),Hi=$("data-mce-annotation"),Vi=$("data-mce-annotation-uid"),qi=$("data-mce-annotation-active"),$i=$("data-mce-annotation-classes"),Wi=$("data-mce-annotation-attrs"),Ki=t=>e=>F(e,t),Gi=(n,e)=>{var t=n.selection.getRng(),r=ee(t.startContainer),o=ee(n.getBody()),e=e.fold(()=>"."+ji(),e=>`[${Hi()}="${e}"]`),t=qr(r,t.startOffset).getOr(r);return mn(t,e,Ki(o)).bind(e=>mr(e,""+Vi()).bind(r=>mr(e,""+Hi()).map(e=>{var t=Xi(n,r);return{uid:r,name:e,elements:t}})))},Yi=(e,t)=>fr(e,"data-mce-bogus")||Kn(e,'[data-mce-bogus="all"]',Ki(t)),Xi=(e,t)=>{const r=ee(e.getBody()),n=Wn(r,`[${Vi()}="${t}"]`);return L(n,e=>!Yi(e,r))},Qi=(e,t)=>{const r=ee(e.getBody()),n=Wn(r,`[${Hi()}="${t}"]`),o={};return Y(n,e=>{if(!Yi(e,r)){const t=ur(e,Vi()),r=M(o,t).getOr([]);o[t]=r.concat([e])}}),o};let Ji=0;const Zi=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Ji+String(t)},es=(e,t)=>ee(e.dom.cloneNode(t)),ts=e=>es(e,!1),rs=e=>es(e,!0),ns=(e,t,r=P)=>{const n=new Gn(e,t),o=e=>{let t;for(;(t=n[e]())&&!oe(t)&&!r(t););return W.from(t).filter(oe)};return{current:()=>W.from(n.current()).filter(oe),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},os=(a,e)=>{const i=e||(e=>a.isBlock(e)||_(e)||k(e)),s=(e,t,r,n)=>{if(oe(e)){const r=n(e,t,e.data);if(-1!==r)return W.some({container:e,offset:r})}return r().bind(e=>s(e.container,e.offset,r,n))};return{backwards:(e,t,r,n)=>{const o=ns(e,null!=n?n:a.getRoot(),i);return s(e,t,()=>o.prev().map(e=>({container:e,offset:e.length})),r).getOrNull()},forwards:(e,t,r,n)=>{const o=ns(e,null!=n?n:a.getRoot(),i);return s(e,t,()=>o.next().map(e=>({container:e,offset:0})),r).getOrNull()}}},as=Math.round,is=e=>e?{left:as(e.left),top:as(e.top),bottom:as(e.bottom),right:as(e.right),width:as(e.width),height:as(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ss=(e,t)=>(e=is(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),ls=(e,t,r)=>0<=e&&e<=Math.min(t.height,r.height)/2,ds=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&ls(t.top-e.bottom,e,t)},cs=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&ls(t.bottom-e.top,e,t),us=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),e=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-e)*(r-e))},ms=e=>{var t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},fs=(e,t)=>{var r,n;return ne(e)&&e.hasChildNodes()?(r=e.childNodes,n=r.length-1,r[Math.min(Math.max(t,0),n)]):e},gs=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),ps=e=>j(e)&&768<=e.charCodeAt(0)&&gs.test(e),hs=ne,vs=ca,bs=Zn("display","block table"),ys=Zn("float","left right"),Cs=(nn=[hs,vs,b(ys)],t=>{for(let e=0;e<nn.length;e++)if(!nn[e](t))return!1;return!0}),ws=b(Zn("white-space","pre pre-line pre-wrap")),xs=oe,ks=_,Es=ae.nodeIndex,Ss=(e,t)=>t<0&&ne(e)&&e.hasChildNodes()?void 0:fs(e,t),_s=e=>e?e.createRange():ae.DOM.createRng(),Ns=e=>j(e)&&/[\r\n\t ]/.test(e),Rs=e=>!!e.setStart&&!!e.setEnd,As=e=>{var t=e.startContainer,r=e.startOffset;if(Ns(e.toString())&&ws(t.parentNode)&&oe(t)){const e=t.data;if(Ns(e[r-1])||Ns(e[r+1]))return!0}return!1},Os=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Ts=e=>{var t,r,n,o,a=e.getClientRects(),a=0<a.length?is(a[0]):is(e.getBoundingClientRect());return!Rs(e)&&ks(e)&&Os(a)?(r=(t=e).ownerDocument,n=_s(r),r=r.createTextNode(Co),(o=t.parentNode).insertBefore(r,t),n.setStart(r,0),n.setEnd(r,1),t=is(n.getBoundingClientRect()),o.removeChild(r),t):Os(a)&&Rs(e)&&null!=(n=(e=>{const t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(t===r&&oe(r)&&0===n&&1===o){const t=e.cloneRange();return t.setEndAfter(r),Ts(t)}return null})(e))?n:a},Bs=(e,t)=>{e=ss(e,t);return e.width=1,e.right=e.left+1,e},z=(t,r,e)=>{const n=()=>e=e||(e=>{const n=[],o=e=>{var t,r;0===e.height||0<n.length&&(t=e,r=n[n.length-1],t.left===r.left)&&t.top===r.top&&t.bottom===r.bottom&&t.right===r.right||n.push(e)},t=(e,t)=>{var r=_s(e.ownerDocument);if(t<e.data.length){if(ps(e.data[t]))return;if(ps(e.data[t-1])&&(r.setStart(e,t),r.setEnd(e,t+1),!As(r)))return void o(Bs(Ts(r),!1))}0<t&&(r.setStart(e,t-1),r.setEnd(e,t),As(r)||o(Bs(Ts(r),!1))),t<e.data.length&&(r.setStart(e,t),r.setEnd(e,t+1),As(r)||o(Bs(Ts(r),!0)))},r=e.container(),a=e.offset();if(xs(r))t(r,a);else if(hs(r))if(e.isAtEnd()){const e=Ss(r,a);xs(e)&&t(e,e.data.length),Cs(e)&&!ks(e)&&o(Bs(Ts(e),!1))}else{var i=Ss(r,a);if(xs(i)&&t(i,0),Cs(i)&&e.isAtEnd())return o(Bs(Ts(i),!1)),n;e=Ss(e.container(),e.offset()-1);!Cs(e)||ks(e)||!bs(e)&&!bs(i)&&Cs(i)||o(Bs(Ts(e),!1)),Cs(i)&&o(Bs(Ts(i),!0))}return n})(z(t,r));return{container:$(t),offset:$(r),toRange:()=>{var e=_s(t.ownerDocument);return e.setStart(t,r),e.setEnd(t,r),e},getClientRects:n,isVisible:()=>0<n().length,isAtStart:()=>(xs(t),0===r),isAtEnd:()=>xs(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:e=>e&&t===e.container()&&r===e.offset(),getNode:e=>Ss(t,e?r-1:r)}},Ds=(z.fromRangeStart=e=>z(e.startContainer,e.startOffset),z.fromRangeEnd=e=>z(e.endContainer,e.endOffset),z.after=e=>z(e.parentNode,Es(e)+1),z.before=e=>z(e.parentNode,Es(e)),z.isAbove=(e,t)=>Gt(Oe(t.getClientRects()),Te(e.getClientRects()),ds).getOr(!1),z.isBelow=(e,t)=>Gt(Te(t.getClientRects()),Oe(e.getClientRects()),cs).getOr(!1),z.isAtStart=e=>!!e&&e.isAtStart(),z.isAtEnd=e=>!!e&&e.isAtEnd(),z.isTextPosition=e=>!!e&&oe(e.container()),z.isElementPosition=e=>!z.isTextPosition(e),(e,t)=>{oe(t)&&0===t.data.length&&e.remove(t)}),Ps=(e,t,r)=>{var n,o,a,i,s;co(r)?(n=e,o=t,a=r,i=W.from(a.firstChild),s=W.from(a.lastChild),o.insertNode(a),i.each(e=>Ds(n,e.previousSibling)),s.each(e=>Ds(n,e.nextSibling))):(o=e,a=r,t.insertNode(a),Ds(o,a.previousSibling),Ds(o,a.nextSibling))},Ls=oe,Ms=to,Is=ae.nodeIndex,Fs=e=>{e=e.parentNode;return Ms(e)?Fs(e):e},Us=e=>e?Xe(e.childNodes,(e,t)=>(Ms(t)&&"BR"!==t.nodeName?e=e.concat(Us(t)):e.push(t),e),[]):[],zs=t=>e=>t===e,js=e=>(Ls(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let n,t;n=Us(Fs(e)),t=Qe(n,zs(e),e),n=n.slice(0,t+1);var r=Xe(n,(e,t,r)=>(Ls(t)&&Ls(n[r-1])&&e++,e),0);return n=Ye(n,Jn([e.nodeName])),Qe(n,zs(e),e)-r})(e)+"]",Hs=(e,t)=>{let r,n=[],o=t.container(),a=t.offset();if(Ls(o))r=((e,t)=>{let r=e;for(;(r=r.previousSibling)&&Ls(r);)t+=r.data.length;return t})(o,a);else{const e=o.childNodes;a>=e.length?(r="after",a=e.length-1):r="before",o=e[a]}n.push(js(o));t=(t=>{var r=[];for(let e=o.parentNode;e&&e!==t;e=e.parentNode)r.push(e);return r})(e),t=Ye(t,b(to));return(n=n.concat(Ge(t,e=>js(e)))).reverse().join("/")+","+r},Vs=(e,r)=>{if(!r)return null;var r=r.split(","),n=r[0].split("/"),r=1<r.length?r[1]:"before",n=Xe(n,(e,t)=>{t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(t){"text()"===t[1]&&(t[1]="#text");{var n=t[1],t=parseInt(t[2],10);let r=Us(e);return r=Ye(r,(e,t)=>!Ls(e)||!Ls(r[t-1])),(r=Ye(r,Jn([n])))[t]}}return null},e);if(!n)return null;if(!Ls(n)&&n.parentNode)return e="after"===r?Is(n)+1:Is(n),z(n.parentNode,e);{var o=n;var a=parseInt(r,10);let e=o,t=0;for(;Ls(e);){var i=e.data.length;if(a>=t&&a<=t+i){o=e,a-=t;break}if(!Ls(e.nextSibling)){o=e,a=i;break}t+=i,e=e.nextSibling}return Ls(o)&&a>o.data.length&&(a=o.data.length),z(o,a);return}},qs=k,$s=(t,e,r,n,o)=>{var a=o?n.startContainer:n.endContainer;let i=o?n.startOffset:n.endOffset;var s=[],l=t.getRoot();if(oe(a))s.push(r?((t,r,e)=>{let n=t(r.data.slice(0,e)).length;for(let e=r.previousSibling;e&&oe(e);e=e.previousSibling)n+=t(e.data).length;return n})(e,a,i):i);else{let e=0;const n=a.childNodes;i>=n.length&&n.length&&(e=1,i=Math.max(0,n.length-1)),s.push(t.nodeIndex(n[i],r)+e)}for(let e=a;e&&e!==l;e=e.parentNode)s.push(t.nodeIndex(e,r));return s},Ws=(e,t,r)=>{let n=0;return J.each(e.select(t),e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==r&&void n++),n},Ks=(e,t)=>{var r,n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;ne(n)&&"TR"===n.nodeName&&(n=(r=n.childNodes)[Math.min(t?o:o-1,r.length-1)])&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))},Gs=e=>(Ks(e,!0),Ks(e,!1),e),Ys=(e,t)=>{return ne(e)&&(e=fs(e,t),qs(e))?e:Go(e)&&(t=(e=oe(e)&&Wo(e)?e.parentNode:e).previousSibling,qs(t)||(t=e.nextSibling,qs(t)))?t:void 0},Xs=(e,t,r)=>{var n=r.getNode(),o=r.getRng();if("IMG"===n.nodeName||qs(n)){const e=n.nodeName;return{name:e,index:Ws(r.dom,e,n)}}n=o;var a,i,s,n=Ys(n.startContainer,n.startOffset)||Ys(n.endContainer,n.endOffset);if(n){const e=n.tagName;return{name:e,index:Ws(r.dom,e,n)}}return n=e,e=t,t=o,r=(o=r).dom,a=$s(r,n,e,t,!0),i=o.isForward(),s=ta(t)?{isFakeCaret:!0}:{},o.isCollapsed()?{start:a,forward:i,...s}:{start:a,end:$s(r,n,e,t,!1),forward:i,...s}},Qs=(e,t,r)=>{t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",t,"&#xFEFF;"):e.create("span",t)},Js=(e,t)=>{var r=e.dom;let n=e.getRng();var o=r.uniqueId(),a=e.isCollapsed(),i=e.getNode(),s=i.nodeName,l=e.isForward();if("IMG"===s)return{name:s,index:Ws(r,s,i)};s=Gs(n.cloneRange());if(!a){s.collapse(!1);const e=Qs(r,o+"_end",t);Ps(r,s,e)}(n=Gs(n)).collapse(!0);i=Qs(r,o+"_start",t);return Ps(r,n,i),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},Zs=D(Xs,p,!0),el=r=>{const e=e=>e(r),t=$(r),n=()=>o,o={tag:!0,inner:r,fold:(e,t)=>t(r),isValue:ce,isError:P,map:e=>rl.value(e(r)),mapError:n,bind:e,exists:e,forall:e,getOr:t,or:n,getOrThunk:t,orThunk:n,getOrDie:t,each:e=>{e(r)},toOptional:()=>W.some(r)};return o},tl=r=>{const e=()=>t,t={tag:!1,inner:r,fold:(e,t)=>e(r),isValue:P,isError:ce,map:e,mapError:e=>rl.error(e(r)),bind:e,exists:P,forall:ce,getOr:p,or:p,getOrThunk:O,orThunk:O,getOrDie:A(String(r)),each:q,toOptional:W.none};return t},rl={value:el,error:tl,fromOption:(e,t)=>e.fold(()=>tl(t),el)},nl=a=>{if(!le(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");const i=[],s={};return Y(a,(e,t)=>{var r=Pe(e);if(1!==r.length)throw new Error("one and only one name per case");const n=r[0],o=e[n];if(void 0!==s[n])throw new Error("duplicate key detected:"+n);if("cata"===n)throw new Error("cannot have a case named cata (sorry)");if(!le(o))throw new Error("case arguments must be an array");i.push(n),s[n]=(...r)=>{var e=r.length;if(e!==o.length)throw new Error("Wrong number of arguments to case "+n+". Expected "+o.length+" ("+o+"), got "+e);return{fold:(...e)=>{if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[t].apply(null,r)},match:e=>{const t=Pe(e);if(i.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+i.join(",")+"\nActual: "+t.join(","));if(Ee(i,e=>K(t,e)))return e[n].apply(null,r);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+i.join(", "))},log:e=>{console.log(e,{constructors:i,constructor:n,params:r})}}}}),s},ol=(nl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),e=>"inline-command"===e.type||"inline-format"===e.type),al=e=>"block-command"===e.type||"block-format"===e.type,il=o=>{const a=e=>rl.error({message:e,pattern:o}),e=(t,r,e)=>{if(void 0===o.format)return void 0!==o.cmd?j(o.cmd)?rl.value(e(o.cmd,o.value)):a(t+" pattern has non-string `cmd` parameter"):a(t+" pattern is missing both `format` and `cmd` parameters");{let e;if(le(o.format)){if(!Ee(o.format,j))return a(t+" pattern has non-string items in the `format` array");e=o.format}else{if(!j(o.format))return a(t+" pattern has non-string `format` parameter");e=[o.format]}return rl.value(r(e))}};if(!se(o))return a("Raw pattern is not an object");if(!j(o.start))return a("Raw pattern is missing `start` parameter");if(void 0===o.end)return void 0!==o.replacement?j(o.replacement)?0===o.start.length?a("Replacement pattern has empty `start` parameter"):rl.value({type:"inline-command",start:"",end:o.start,cmd:"mceInsertContent",value:o.replacement}):a("Replacement pattern has non-string `replacement` parameter"):0===o.start.length?a("Block pattern has empty `start` parameter"):e("Block",e=>({type:"block-format",start:o.start,format:e[0]}),(e,t)=>({type:"block-command",start:o.start,cmd:e,value:t}));{if(!j(o.end))return a("Inline pattern has non-string `end` parameter");if(0===o.start.length&&0===o.end.length)return a("Inline pattern has empty `start` and `end` parameters");let r=o.start,n=o.end;return 0===n.length&&(n=r,r=""),e("Inline",e=>({type:"inline-format",start:r,end:n,format:e}),(e,t)=>({type:"inline-command",start:r,end:n,cmd:e,value:t}))}},sl=e=>L(e,al),ll=e=>L(e,ol),dl=e=>{e=(e=>{const t=[],r=[];return Y(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}})(C(e,il));return Y(e.errors,e=>console.error(e.message,e.pattern)),e.values},cl=It().deviceType,ul=cl.isTouch(),ml=ae.DOM,fl=e=>y(e,RegExp),e=t=>e=>e.options.get(t),gl=e=>j(e)||se(e),pl=(n,o="")=>e=>{var t,r=j(e);return r?-1!==e.indexOf("=")?(t=(e=>{e=0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return be(e,(e,t)=>{var t=t.split("="),r=t[0],t=1<t.length?t[1]:r;return e[ct(r)]=ct(t),e},{})})(e),{value:M(t,n.id).getOr(o),valid:r}):{value:e,valid:r}:{valid:!1,message:"Must be a string."}},hl=e("iframe_attrs"),vl=e("doctype"),bl=e("document_base_url"),yl=e("body_id"),Cl=e("body_class"),wl=e("content_security_policy"),xl=e("br_in_pre"),kl=e("forced_root_block"),El=e("forced_root_block_attrs"),Sl=e("newline_behavior"),_l=e("br_newline_selector"),Nl=e("no_newline_selector"),Rl=e("keep_styles"),Al=e("end_container_on_empty_block"),Ol=e("automatic_uploads"),Tl=e("images_reuse_filename"),Bl=e("images_replace_blob_uris"),Dl=e("icons"),Pl=e("icons_url"),Ll=e("images_upload_url"),Ml=e("images_upload_base_path"),Il=e("images_upload_credentials"),Fl=e("images_upload_handler"),Ul=e("content_css_cors"),zl=e("referrer_policy"),jl=e("language"),Hl=e("language_url"),Vl=e("indent_use_margin"),ql=e("indentation"),$l=e("content_css"),Wl=e("content_style"),Kl=e("font_css"),Gl=e("directionality"),Yl=e("inline_boundaries_selector"),Xl=e("object_resizing"),Ql=e("resize_img_proportional"),Jl=e("placeholder"),Zl=e("event_root"),ed=e("service_message"),td=e("theme"),rd=e("theme_url"),nd=e("model"),od=e("model_url"),ad=e("inline_boundaries"),id=e("formats"),sd=e("preview_styles"),ld=e("format_empty_lines"),dd=e("format_noneditable_selector"),cd=e("custom_ui_selector"),ud=e("inline"),md=e("hidden_input"),fd=e("submit_patch"),gd=e("add_form_submit_trigger"),pd=e("add_unload_trigger"),hd=e("custom_undo_redo_levels"),vd=e("disable_nodechange"),bd=e("readonly"),yd=e("editable_root"),Cd=e("content_css_cors"),wd=e("plugins"),xd=e("external_plugins"),kd=e("block_unsupported_drop"),Ed=e("visual"),Sd=e("visual_table_class"),_d=e("visual_anchor_class"),Nd=e("iframe_aria_text"),Rd=e("setup"),Ad=e("init_instance_callback"),Od=e("urlconverter_callback"),Td=e("auto_focus"),Bd=e("browser_spellcheck"),Dd=e("protect"),Pd=e("paste_block_drop"),Ld=e("paste_data_images"),Md=e("paste_preprocess"),Id=e("paste_postprocess"),Fd=e("newdocument_content"),Ud=e("paste_webkit_styles"),zd=e("paste_remove_styles_if_webkit"),jd=e("paste_merge_formats"),Hd=e("smart_paste"),Vd=e("paste_as_text"),qd=e("paste_tab_spaces"),$d=e("allow_html_data_urls"),Wd=e("text_patterns"),Kd=e("text_patterns_lookup"),Gd=e("noneditable_class"),Yd=e("editable_class"),Xd=e("noneditable_regexp"),Qd=e("preserve_cdata"),Jd=e("highlight_on_focus"),Zd=e("xss_sanitization"),ec=e("init_content_sync"),tc=e=>J.explode(e.options.get("images_file_types")),rc=e("table_tab_navigation"),nc=e("details_initial_state"),oc=e("details_serialized_state"),ac=ne,ic=oe,sc=e=>{var t=e.parentNode;t&&t.removeChild(e)},lc=e=>{var t=Vo(e);return{count:e.length-t.length,text:t}},dc=e=>{for(var t;-1!==(t=e.data.lastIndexOf(jo));)e.deleteData(t,1)},cc=(e,t)=>(uc(e),t),uc=e=>{ac(e)&&Go(e)&&(Yo(e)?e.removeAttribute("data-mce-caret"):sc(e)),ic(e)&&(dc(e),0===e.data.length)&&sc(e)},mc=k,fc=po,gc=fo,pc=(e,t,r)=>{var n=ss(t.getBoundingClientRect(),r);let o,a;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;o=e.scrollLeft||t.scrollLeft,a=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();o=e.scrollLeft-t.left,a=e.scrollTop-t.top}n.left+=o,n.right+=o,n.top+=a,n.bottom+=a,n.width=1;let i=t.offsetWidth-t.clientWidth;return 0<i&&(r&&(i*=-1),n.left+=i,n.right+=i),n},hc=(e,s,l,d)=>{const c=Fi();let u,m;const f=kl(e),g=e.dom,p=()=>{var r,n=s,o=Wn(ee(n),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<o.length;t++){var a=o[t].dom;let e=a.previousSibling;if(Zo(e)){const n=e.data;1===n.length?null!=(r=e.parentNode)&&r.removeChild(e):e.deleteData(n.length-1,1)}e=a.nextSibling,Jo(e)&&(1===e.data.length?null!=(r=e.parentNode)&&r.removeChild(e):e.deleteData(0,1))}m&&(uc(m),m=null),c.on(e=>{g.remove(e.caret),c.clear()}),u&&(clearInterval(u),u=void 0)};return{show:(e,t)=>{let r;if(p(),gc(t))return null;var n,o,a;if(l(t)){n=f,i=e,(a=(null!=(a=(o=t).ownerDocument)?a:document).createElement(n)).setAttribute("data-mce-caret",i?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(Fo().dom),n=o.parentNode,i?null!=n&&n.insertBefore(a,o):o.nextSibling?null!=n&&n.insertBefore(a,o.nextSibling):null!=n&&n.appendChild(a);const l=a,p=pc(s,t,e);g.setStyle(l,"top",p.top),m=l;var i=g.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});g.setStyles(i,{...p}),g.add(s,i),c.set({caret:i,element:t,before:e}),e&&g.addClass(i,"mce-visual-caret-before"),u=setInterval(()=>{c.on(e=>{d()?g.toggleClass(e.caret,"mce-visual-caret-hidden"):g.addClass(e.caret,"mce-visual-caret-hidden")})},500),(r=t.ownerDocument.createRange()).setStart(l,0),r.setEnd(l,0)}else m=((e,t)=>{var r=(null!=(r=e.ownerDocument)?r:document).createTextNode(jo),n=e.parentNode;if(t){const t=e.previousSibling;if($o(t)){if(Go(t))return t;if(Zo(t))return t.splitText(t.data.length-1)}null!=n&&n.insertBefore(r,e)}else{const t=e.nextSibling;if($o(t)){if(Go(t))return t;if(Jo(t))return t.splitText(1),t}e.nextSibling?null!=n&&n.insertBefore(r,e.nextSibling):null!=n&&n.appendChild(r)}return r})(t,e),r=t.ownerDocument.createRange(),bc(m.nextSibling)?(r.setStart(m,0),r.setEnd(m,0)):(r.setStart(m,1),r.setEnd(m,1));return r},hide:p,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(e=>{var t=pc(s,e.element,e.before);g.setStyles(e.caret,{...t})})},destroy:()=>clearInterval(u)}},vc=()=>I.browser.isFirefox(),bc=e=>mc(e)||fc(e),yc=e=>(bc(e)||ro(e)&&vc())&&Ir(ee(e)).exists(fn),Cc=mo,wc=k,xc=po,kc=Zn("display","block table table-cell table-caption list-item"),Ec=Go,Sc=Wo,_c=ne,Nc=oe,Rc=ca,Ac=e=>0<e,Oc=e=>e<0,Tc=(e,t)=>{for(var r;r=e(t);)if(!Sc(r))return r;return null},Bc=(e,t,r,n,o)=>{var a=new Gn(e,n),n=wc(e)||Sc(e);let i;if(Oc(t)){if(n&&r(i=Tc(a.prev.bind(a),!0)))return i;for(;i=Tc(a.prev.bind(a),o);)if(r(i))return i}if(Ac(t)){if(n&&r(i=Tc(a.next.bind(a),!0)))return i;for(;i=Tc(a.next.bind(a),o);)if(r(i))return i}return null},Dc=(e,t)=>{for(;e&&e!==t;){if(kc(e))return e;e=e.parentNode}return null},Pc=(e,t,r)=>Dc(e.container(),r)===Dc(t.container(),r),Lc=(e,t)=>{var r;return t&&(r=t.container(),t=t.offset(),_c(r))?W.from(r.childNodes[t+e]):W.none()},Mc=(e,t)=>{var r=(null!=(r=t.ownerDocument)?r:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},Ic=(e,t,r)=>{var n,o,a,i=e?"previousSibling":"nextSibling";let s=r;for(;s&&s!==t;){let e=s[i];if(e&&Ec(e)&&(e=e[i]),wc(e)||xc(e)){if(n=t,o=e,a=s,Dc(o,n)===Dc(a,n))return e;break}if(Rc(e))break;s=s.parentNode}return null},Fc=D(Mc,!0),Uc=D(Mc,!1),zc=(e,t,r)=>{let n;var o=D(Ic,!0,t),t=D(Ic,!1,t),a=r.startContainer,i=r.startOffset;if(Wo(a)){const e=Nc(a)?a.parentNode:a,t=e.getAttribute("data-mce-caret");if("before"===t&&(n=e.nextSibling,yc(n)))return Fc(n);if("after"===t&&(n=e.previousSibling,yc(n)))return Uc(n)}if(r.collapsed&&oe(a)){if(Ec(a)){if(1===e){if(n=t(a))return Fc(n);if(n=o(a))return Uc(n)}if(-1===e){if(n=o(a))return Uc(n);if(n=t(a))return Fc(n)}return r}if(Zo(a)&&i>=a.data.length-1)return 1===e&&(n=t(a))?Fc(n):r;if(Jo(a)&&i<=1)return-1===e&&(n=o(a))?Uc(n):r;if(i===a.data.length)return(n=t(a))?Fc(n):r;if(0===i)return(n=o(a))?Uc(n):r}return r},jc=(e,t)=>Lc(e?0:-1,t).filter(wc),Hc=(e,t,r)=>{t=zc(e,t,r);return-1===e?z.fromRangeStart(t):z.fromRangeEnd(t)},Vc=e=>W.from(e.getNode()).map(ee),qc=(e,t)=>{let r=t;for(;r=e(r);)if(r.isVisible())return r;return r},$c=(e,t)=>{t=Pc(e,t);return!(t||!_(e.getNode()))||t},Wc=((t=on=on||{})[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards",k),Kc=oe,Gc=ne,Yc=_,Xc=ca,Qc=e=>{return sa(e)||(e=e,!!ua(e)&&!be(Be(e.getElementsByTagName("*")),(e,t)=>e||ra(t),!1))},Jc=ma,Zc=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,eu=(e,t)=>{if(Ac(e)){if(Xc(t.previousSibling)&&!Kc(t.previousSibling))return z.before(t);if(Kc(t))return z(t,0)}if(Oc(e)){if(Xc(t.nextSibling)&&!Kc(t.nextSibling))return z.after(t);if(Kc(t))return z(t,t.data.length)}return!Oc(e)||Yc(t)?z.before(t):z.after(t)},tu=(e,t,r)=>{let n,o,a,i;if(!Gc(r)||!t)return null;if(t.isEqual(z.after(r))&&r.lastChild){if(i=z.after(r.lastChild),Oc(e)&&Xc(r.lastChild)&&Gc(r.lastChild))return Yc(r.lastChild)?z.before(r.lastChild):i}else i=t;var s,l=i.container();let d=i.offset();if(Kc(l)){if(Oc(e)&&0<d)return z(l,--d);if(Ac(e)&&d<l.length)return z(l,++d);n=l}else{if(Oc(e)&&0<d&&(o=Zc(l,d-1),Xc(o)))return!Qc(o)&&(a=Bc(o,e,Jc,o))?Kc(a)?z(a,a.data.length):z.after(a):Kc(o)?z(o,o.data.length):z.before(o);if(Ac(e)&&d<l.childNodes.length&&(o=Zc(l,d),Xc(o)))return Yc(o)?(t=r,s=o,(c=s.nextSibling)&&Xc(c)?Kc(c)?z(c,0):z.before(c):tu(on.Forwards,z.after(s),t)):!Qc(o)&&(a=Bc(o,e,Jc,o))?Kc(a)?z(a,0):z.before(a):Kc(o)?z(o,0):z.after(o);n=o||i.getNode()}if(n&&(Ac(e)&&i.isAtEnd()||Oc(e)&&i.isAtStart())&&(n=Bc(n,e,ce,r,!0),Jc(n,r)))return eu(e,n);o=n&&Bc(n,e,Jc,r);var c=Je(L((e=>{var t=[];let r=l;for(;r&&r!==e;)t.push(r),r=r.parentNode;return t})(r),Wc));return!c||o&&c.contains(o)?o?eu(e,o):null:i=Ac(e)?z.after(c):z.before(c)},ru=t=>({next:e=>tu(on.Forwards,e,t),prev:e=>tu(on.Backwards,e,t)}),nu=e=>z.isTextPosition(e)?0===e.offset():ca(e.getNode()),ou=e=>{var t;return z.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):ca(e.getNode(!0))},au=(e,t)=>!z.isTextPosition(e)&&!z.isTextPosition(t)&&e.getNode()===t.getNode(!0),iu=(e,t,r)=>{t=ru(t);return W.from(e?t.next(r):t.prev(r))},su=(o,a,i)=>iu(o,a,i).bind(e=>{return Pc(i,e,a)&&(t=i,r=e,o?!au(t,r)&&(n=t,!(!z.isTextPosition(n)&&_(n.getNode())))&&ou(t)&&nu(r):!au(r,t)&&nu(t)&&ou(r))?iu(o,a,e):W.some(e);var t,r,n}),lu=(t,r,e,n)=>su(t,r,e).bind(e=>n(e)?lu(t,r,e,n):W.some(e)),du=(e,t)=>{var r=e?t.firstChild:t.lastChild;{var n;return oe(r)?W.some(z(r,e?0:r.data.length)):r?ca(r)?W.some(e?z.before(r):_(n=r)?z.before(n):z.after(n)):(n=e,e=t,t=r,t=n?z.before(t):z.after(t),iu(n,e,t)):W.none()}},cu=D(iu,!0),uu=D(iu,!1),mu=D(du,!0),fu=D(du,!1),gu="_mce_caret",pu=e=>ne(e)&&e.id===gu,hu=(e,t)=>{let r=t;for(;r&&r!==e;){if(pu(r))return r;r=r.parentNode}return null},vu=e=>Q(e,"name"),bu=e=>J.isArray(e.start),yu=e=>!(!vu(e)&&E(e.forward))||e.forward,Cu=(e,t)=>(ne(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),wu=(e,t,r)=>{return!(t.hasChildNodes()||!hu(e,t)||(e=r,t=(null!=(t=(r=t).ownerDocument)?t:document).createTextNode(jo),r.appendChild(t),e.setStart(t,0),e.setEnd(t,0),0))},xu=(e,r,n,o)=>{var a=n[r?"start":"end"],i=e.getRoot();if(a){let t=i,e=a[0];for(let e=a.length-1;t&&1<=e;e--){const n=t.childNodes;if(wu(i,t,o))return!0;if(a[e]>n.length-1)return!!wu(i,t,o)||((e,t)=>fu(e).fold(P,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)))(t,o);t=n[a[e]]}oe(t)&&(e=Math.min(a[0],t.data.length)),ne(t)&&(e=Math.min(a[0],t.childNodes.length)),r?o.setStart(t,e):o.setEnd(t,e)}return!0},ku=e=>oe(e)&&0<e.data.length,Eu=(r,n,o)=>{const a=r.get(o.id+"_"+n),i=null==a?void 0:a.parentNode,s=o.keep;if(a&&i){let e,t;if(t="start"===n?s?a.hasChildNodes()?(e=a.firstChild,1):ku(a.nextSibling)?(e=a.nextSibling,0):ku(a.previousSibling)?(e=a.previousSibling,a.previousSibling.data.length):(e=i,r.nodeIndex(a)+1):(e=i,r.nodeIndex(a)):s?a.hasChildNodes()?(e=a.firstChild,1):ku(a.previousSibling)?(e=a.previousSibling,a.previousSibling.data.length):(e=i,r.nodeIndex(a)):(e=i,r.nodeIndex(a)),!s){const i=a.previousSibling,s=a.nextSibling;var l;for(J.each(J.grep(a.childNodes),e=>{oe(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});l=r.get(o.id+"_"+n);)r.remove(l,!0);if(oe(s)&&oe(i)&&!I.browser.isOpera()){const n=i.data.length;i.appendData(s.data),r.remove(s),e=i,t=n}}return W.some(z(e,t))}return W.none()},Su=(e,t,r)=>{return[e,t,r=!1]=[e,t,r],2===t?Xs(Vo,r,e):3===t?(n=(r=e).getRng(),{start:Hs(r.dom.getRoot(),z.fromRangeStart(n)),end:Hs(r.dom.getRoot(),z.fromRangeEnd(n)),forward:r.isForward()}):t?{rng:(n=e).getRng(),forward:n.isForward()}:Js(e,!1);var n},_u=(m,e)=>{(e=>{var r,n,o,t,a,i,s,l,d,c,u=m.dom;if(e){if(bu(e))return d=e,c=(l=u).createRng(),xu(l,!0,d,c)&&xu(l,!1,d,c)?W.some({range:c,forward:yu(d)}):W.none();if(l=e,j(l.start))return i=u,s=e,c=W.from(Vs(i.getRoot(),s.start)),d=W.from(Vs(i.getRoot(),s.end)),Gt(c,d,(e,t)=>{var r=i.createRng();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),{range:r,forward:yu(s)}});if(a=e,Q(a,"id"))return n=u,o=e,a=Eu(n,"start",o),t=Eu(n,"end",o),Gt(a,t.or(a),(e,t)=>{var r=n.createRng();return r.setStart(Cu(n,e.container()),e.offset()),r.setEnd(Cu(n,t.container()),t.offset()),{range:r,forward:yu(o)}});if(vu(e))return r=u,t=e,W.from(r.select(t.name)[t.index]).map(e=>{var t=r.createRng();return t.selectNode(e),{range:t,forward:!0}});if(a=e,Q(a,"rng"))return W.some({range:e.rng,forward:yu(e)})}return W.none()})(e).each(({range:e,forward:t})=>{m.setRng(e,t)})},Nu=e=>ne(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Ru=(an=Co,e=>an===e),Au=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Ou=e=>!Au(e)&&!Ru(e)&&!wo(e),Tu=e=>{e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Bu=e=>{return{value:(e=Tu(e.red)+Tu(e.green)+Tu(e.blue),at(e,"#").toUpperCase())}},Du=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Pu=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Lu=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),Mu=(e,t,r,n)=>{e=parseInt(e,10),t=parseInt(t,10),r=parseInt(r,10),n=parseFloat(n);return Lu(e,t,r,n)},Iu=e=>{return("transparent"===(t=e)?W.some(Lu(0,0,0,0)):null!==(r=Du.exec(t))?W.some(Mu(r[1],r[2],r[3],"1")):null!==(r=Pu.exec(t))?W.some(Mu(r[1],r[2],r[3],r[4])):W.none()).map(Bu).map(e=>"#"+e.value).getOr(e);var t,r},Fu=t=>{var r=[];if(t)for(let e=0;e<t.rangeCount;e++)r.push(t.getRangeAt(e));return r},Uu=(e,t)=>{var t=Wn(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:(t=e,L((t=t,ke(t,e=>{e=ms(e);return e?[ee(e)]:[]})),Po))},zu=e=>Uu(Fu(e.selection.getSel()),ee(e.getBody())),ju=(e,t)=>cn(e,"table",t),Hu=t=>$r(t).fold($([t]),e=>[t].concat(Hu(e))),Vu=t=>Wr(t).fold($([t]),e=>"br"===Z(e)?Ur(e).map(e=>[t].concat(Vu(e))).getOr([]):[t].concat(Vu(e))),qu=(r,e)=>{return Gt((t=e.startContainer,n=e.startOffset,oe(t)?0===n?W.some(ee(t)):W.none():W.from(t.childNodes[n]).map(ee)),(t=e.endContainer,n=e.endOffset,oe(t)?n===t.data.length?W.some(ee(t)):W.none():W.from(t.childNodes[n-1]).map(ee)),(e,t)=>{e=Ce(Hu(r),D(F,e)),t=Ce(Vu(r),D(F,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,n},$u=(e,t,r,n)=>{var o=r,a=new Gn(r,o),i=ze(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!K(["td","th","table"],t.toLowerCase()));let s=r;do{if(oe(s)&&0!==J.trim(s.data).length)return void(n?t.setStart(s,0):t.setEnd(s,s.data.length));if(i[s.nodeName])return void(n?t.setStartBefore(s):"BR"===s.nodeName?t.setEndBefore(s):t.setEndAfter(s))}while(s=n?a.next():a.prev());"BODY"===o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Wu=e=>{e=e.selection.getSel();return H(e)&&0<e.rangeCount},Ku=(r,n)=>{var e=zu(r);0<e.length?Y(e,e=>{var e=e.dom,t=r.dom.createRng();t.setStartBefore(e),t.setEndAfter(e),n(t,!0)}):n(r.selection.getRng(),!1)},Gu=(e,t,r)=>{t=Js(e,t);r(t),e.moveToBookmark(t)},Yu=e=>N(null==e?void 0:e.nodeType),Xu=e=>ne(e)&&!Nu(e)&&!pu(e)&&!to(e),Qu=e=>!0===e.isContentEditable,Ju=(e,t,r)=>{var{selection:n,dom:o}=e,a=n.getNode(),i=k(a);if(Gu(n,!0,()=>{t()}),i&&k(a)&&o.isChildOf(a,e.getBody()))e.selection.select(a);else if(r(n.getStart())){var s=o,l=n,d=l.getRng(),{startContainer:i,startOffset:e}=d;if(!((e,t)=>{return!(!Xu(t)||/^(TD|TH)$/.test(t.nodeName)||(e=e.getAttrib(t,"data-mce-selected"),t=parseInt(e,10),isNaN(t)))&&0<t})(s,l.getNode())&&ne(i)){a=i.childNodes,r=s.getRoot();let t;if(e<a.length){const l=a[e];t=new Gn(l,null!=(o=s.getParent(l,s.isBlock))?o:r)}else{const l=a[a.length-1];(t=new Gn(l,null!=(n=s.getParent(l,s.isBlock))?n:r)).next(!0)}for(let e=t.current();e;e=t.next()){if("false"===s.getContentEditable(e))return;if(oe(e)&&!rm(e))return d.setStart(e,0),void l.setRng(d)}}}},Zu=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(ne(e)||!rm(e))return e}},em=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Oa(e,t),tm=(e,t,r)=>e.schema.isValidChild(t,r),rm=(e,t=!1)=>{return!(!H(e)||!oe(e))&&(t=t?e.data.replace(/ /g," "):e.data,ga(t))},nm=(e,t)=>{var r,n,o=e.dom;return Xu(t)&&"false"===o.getContentEditable(t)&&(e=e,r=t,n="[data-mce-cef-wrappable]",e=dd(e),n=gt(e)?n:n+","+e,Or(ee(r),n))&&0===o.select('[contenteditable="true"]',t).length},om=(e,r)=>V(e)?e(r):e=H(r)?e.replace(/%(\w+)/g,(e,t)=>r[t]||e):e,am=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),im=(t,r)=>{if(de(t))return null;{let e=String(t);return"color"!==r&&"backgroundColor"!==r||(e=Iu(e)),"fontWeight"===r&&700===t&&(e="bold"),e="fontFamily"===r?e.replace(/[\'\"]/g,"").replace(/,\s+/g,","):e}},sm=(e,t,r)=>{e=e.getStyle(t,r);return im(e,r)},lm=(t,e)=>{let r;return t.getParent(e,e=>!!ne(e)&&!!(r=t.getStyle(e,"text-decoration"))&&"none"!==r),r},dm=(e,t,r)=>e.getParents(t,r,e.getRoot()),cm=(e,t,r)=>{e=e.formatter.get(t);return H(e)&&G(e,r)},um=e=>Ve(e,"block"),mm=e=>Ve(e,"selector"),fm=e=>Ve(e,"inline"),gm=e=>mm(e)&&!1!==e.expand&&!fm(e),pm=Nu,hm=dm,vm=rm,bm=em,ym=(e,t)=>{let r=t;for(;r;){if(ne(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},Cm=(e,t,r,n)=>{var o=t.data;if(e){for(let e=r;0<e;e--)if(n(o.charAt(e-1)))return e}else for(let e=r;e<o.length;e++)if(n(o.charAt(e)))return e;return-1},wm=(e,t,r)=>Cm(e,t,r,e=>Ru(e)||Au(e)),xm=(e,t,r)=>Cm(e,t,r,Ou),km=(o,e,t,r,a,n)=>{let i;const s=o.getParent(t,o.isBlock)||e,l=(e,t,r)=>{var n=os(o),n=a?n.backwards:n.forwards;return W.from(n(e,t,(e,t)=>pm(e.parentNode)?-1:(i=e,r(a,e,t)),s))};return l(t,r,wm).bind(e=>n?l(e.container,e.offset+(a?-1:0),xm):W.some(e)).orThunk(()=>i?W.some({container:i,offset:a?0:i.length}):W.none())},Em=(r,n,o,e,t)=>{const a=e[t];oe(e)&&gt(e.data)&&a&&(e=a);var i=hm(r,e);for(let t=0;t<i.length;t++)for(let e=0;e<n.length;e++){const a=n[e];if((!H(a.collapsed)||a.collapsed===o.collapsed)&&mm(a)&&r.is(i[t],a.selector))return i[t]}return e},Sm=(t,e,r,n)=>{var o;let a=r;const i=t.getRoot(),s=e[0];if(!(a=um(s)?s.wrapper?null:t.getParent(r,s.block,i):a)){const e=null!=(o=t.getParent(r,"LI,TD,TH"))?o:i;a=t.getParent(oe(r)?r.parentNode:r,e=>e!==i&&bm(t.schema,e),e)}if(!(a=a&&um(s)&&s.wrapper?hm(t,a,"ul,ol").reverse()[0]||a:a))for(a=r;a&&a[n]&&!t.isBlock(a[n])&&(a=a[n],!am(a,"br")););return a||r},_m=(e,t,r,n)=>{var o=r.parentNode;return!H(r[n])&&(!(o!==t&&!de(o)&&!e.isBlock(o))||_m(e,t,o,n))},Nm=(t,e,r,n,o)=>{let a=r;var i,s=o?"previousSibling":"nextSibling",l=t.getRoot();if(!oe(r)||vm(r)||!(o?0<n:n<r.data.length))for(;a;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let e=a[s];e;e=e[s]){const r=oe(e)&&!_m(t,l,e,s);if(!pm(e)&&(!_(i=e)||!i.getAttribute("data-mce-bogus")||i.nextSibling)&&!vm(e,r))return a}if(a===l||a.parentNode===l){r=a;break}a=a.parentNode}return r},Rm=e=>pm(e.parentNode)||pm(e),Am=(e,t,r,n=!1)=>{let{startContainer:o,startOffset:a,endContainer:i,endOffset:s}=t;var l=r[0];return ne(o)&&o.hasChildNodes()&&(o=fs(o,a),oe(o))&&(a=0),ne(i)&&i.hasChildNodes()&&(i=fs(i,t.collapsed?s:s-1),oe(i))&&(s=i.data.length),o=ym(e,o),i=ym(e,i),Rm(o)&&(o=pm(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,oe(o))&&(a=t.collapsed?o.length:0),Rm(i)&&(i=pm(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,oe(i))&&(s=t.collapsed?0:i.length),t.collapsed&&(km(e,e.getRoot(),o,a,!0,n).each(({container:e,offset:t})=>{o=e,a=t}),km(e,e.getRoot(),i,s,!1,n).each(({container:e,offset:t})=>{i=e,s=t})),(fm(l)||l.block_expand)&&(fm(l)&&oe(o)&&0!==a||(o=Nm(e,r,o,a,!0)),fm(l)&&oe(i)&&s!==i.data.length||(i=Nm(e,r,i,s,!1))),gm(l)&&(o=Em(e,r,t,o,"previousSibling"),i=Em(e,r,t,i,"nextSibling")),(um(l)||mm(l))&&(o=Sm(e,r,o,"previousSibling"),i=Sm(e,r,i,"nextSibling"),um(l))&&(e.isBlock(o)||(o=Nm(e,r,o,a,!0)),e.isBlock(i)||(i=Nm(e,r,i,s,!1))),ne(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),ne(i)&&i.parentNode&&(s=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:a,endContainer:i,endOffset:s}},Om=(r,e,i)=>{var t;const n=e.startOffset,o=fs(e.startContainer,n),a=e.endOffset,s=fs(e.endContainer,a-1),l=e=>{var t=e[0],t=(oe(t)&&t===o&&n>=t.data.length&&e.splice(0,1),e[e.length-1]);return 0===a&&0<e.length&&t===s&&oe(t)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{for(var n=[];e&&e!==r;e=e[t])n.push(e);return n},c=(e,t)=>r.getParent(e,e=>e.parentNode===t,t),u=(r,n,o)=>{var a=o?"nextSibling":"previousSibling";for(let e=r,t=void e.parentNode;e&&e!==n;e=t){t=e.parentNode;const n=d(e===r?e:e[a],a);n.length&&(o||n.reverse(),i(l(n)))}};return o===s?i(l([o])):(e=null!=(e=r.findCommonAncestor(o,s))?e:r.getRoot(),r.isChildOf(o,s)?u(o,e,!0):r.isChildOf(s,o)?u(s,e):(t=c(o,e)||o,e=c(s,e)||s,u(o,t,!0),(t=d(t===o?t:t.nextSibling,"nextSibling",e===s?e.nextSibling:e)).length&&i(l(t)),void u(s,e)))},Tm=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Bm=(e,t,r,n,o,a)=>{const{uid:i=t,...s}=r;wr(e,ji()),dr(e,""+Vi(),i),dr(e,""+Hi(),n);var l,{attributes:r={},classes:n=[]}=o(i,s);if(cr(e,r),l=e,t=n,Y(t,e=>{wr(l,e)}),a){0<n.length&&dr(e,""+$i(),n.join(","));const t=Pe(r);0<t.length&&dr(e,""+Wi(),t.join(","))}},Dm=(e,t,r,n,o)=>{e=Nr("span",e);return Bm(e,t,r,n,o,!1),e},Pm=(t,e,a,i,s,l)=>{const d=[],c=Dm(t.getDoc(),a,l,i,s),u=Fi(),m=()=>{u.clear()},f=e=>{Y(e,r)},r=e=>{switch(r=t,n=e,o=Z(e),Mr(n).fold(()=>"skipping",e=>{return"br"===o||(t=n,or(t)&&ko(t)===jo)?"valid":(t=n,nr(t)&&Er(t,ji())?"existing":pu(n.dom)?"caret":G(Tm,e=>Or(n,e))?"valid-block":tm(r,"span",o)&&tm(r,Z(e),"span")?"valid":"invalid-child");var t})){case"invalid-child":{m();const t=Vr(e);f(t),m();break}case"valid-block":m(),Bm(e,a,l,i,s,!0);break;case"valid":{const t=u.get().getOrThunk(()=>{var e=ts(c);return d.push(e),u.set(e),e});Nn(e,t);break}}var r,n,o};return Om(t.dom,e,e=>{m();e=C(e,ee),f(e)}),d},Lm=n=>{const o=(()=>{const r={};return{register:(e,t)=>{r[e]={name:e,settings:t}},lookup:e=>M(r,e).map(e=>e.settings),getNames:()=>Pe(r)}})();{var e=n,r=o;const l=Hi();e.serializer.addTempAttr(qi()),e.serializer.addAttributeFilter(l,e=>{for(const n of e)t=n,W.from(t.attr(l)).bind(r.lookup).each(e=>{var t,r;!1===e.persistent&&("span"===n.name?n.unwrap():((t=n).attr(Vi(),null),t.attr(Hi(),null),t.attr(qi(),null),e=W.from(t.attr(Wi())).map(e=>e.split(",")).getOr([]),r=W.from(t.attr($i())).map(e=>e.split(",")).getOr([]),Y(e,e=>t.attr(e,null)),e=null!=(e=null==(e=t.attr("class"))?void 0:e.split(" "))?e:[],e=_e(e,[ji()].concat(r)),t.attr("class",0<e.length?e.join(" "):null),t.attr($i(),null),t.attr(Wi(),null)))});var t})}const a=((n,t)=>{const o=Bi({}),a=()=>({listeners:[],previous:Fi()}),l=(e,t)=>{i(e,e=>(t(e),e))},i=(e,t)=>{var r=o.get(),t=t(M(r,e).getOrThunk(a));r[e]=t,o.set(r)},d=(e,t)=>{Y(Xi(n,e),e=>{t?dr(e,qi(),"true"):gr(e,qi())})},e=zi(()=>{var e=Re(t.getNames());Y(e,r=>{i(r,i=>{const s=i.previous.get();return Gi(n,W.some(r)).fold(()=>{s.each(e=>{var t;t=r,l(t,e=>{Y(e.listeners,e=>e(!1,t))}),i.previous.clear(),d(e,!1)})},({uid:e,name:t,elements:r})=>{var n,o,a;Wt(s,e)||(s.each(e=>d(e,!1)),n=t,o=e,a=r,l(n,e=>{Y(e.listeners,e=>e(!0,n,{uid:o,nodes:C(a,e=>e.dom)}))}),i.previous.set(e),d(e,!0))}),{previous:i.previous,listeners:i.listeners}})})},30);return n.on("remove",()=>{e.cancel()}),n.on("NodeChange",()=>{e.throttle()}),{addListener:(e,t)=>{i(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}})(n,o),i=sr("span"),s=e=>{Y(e,e=>{var t,r,n;i(e)?On(e):(t=e,kr(t,ji()),gr(t,""+Vi()),gr(t,""+Hi()),gr(t,""+qi()),e=mr(t,""+Wi()).map(e=>e.split(",")).getOr([]),n=mr(t,""+$i()).map(e=>e.split(",")).getOr([]),Y(e,e=>gr(t,e)),r=t,Y(n,e=>{kr(r,e)}),gr(t,""+$i()),gr(t,""+Wi()))})};return{register:(e,t)=>{o.register(e,t)},annotate:(t,r)=>{o.lookup(t).each(e=>{var s,l,d,c;l=t,d=e,c=r,(s=n).undoManager.transact(()=>{const e=s.selection,t=e.getRng(),r=0<zu(s).length,n=Zi("mce-annotation");if(t.collapsed&&!r&&(o=s,a=t,i=Am(o.dom,a,[{inline:"span"}]),a.setStart(i.startContainer,i.startOffset),a.setEnd(i.endContainer,i.endOffset),o.selection.setRng(a)),e.getRng().collapsed&&!r){const t=Dm(s.getDoc(),n,c,l,d.decorate);Dn(t,Co),e.getRng().insertNode(t.dom),e.select(t.dom)}else Gu(e,!1,()=>{Ku(s,e=>{Pm(s,e,n,l,d.decorate,c)})});var o,a,i})})},annotationChanged:(e,t)=>{a.addListener(e,t)},remove:e=>{Gi(n,W.some(e)).each(({elements:e})=>{var t=n.selection.getBookmark();s(e),n.selection.moveToBookmark(t)})},removeAll:e=>{var t=n.selection.getBookmark();X(Qi(n,e),(e,t)=>{s(e)}),n.selection.moveToBookmark(t)},getAll:e=>{e=Qi(n,e);return Ie(e,e=>C(e,e=>e.dom))}}},Mm=e=>({getBookmark:D(Su,e),moveToBookmark:D(_u,e)}),Im=(Mm.isBookmarkNode=Nu,(t,r,e)=>!e.collapsed&&G(e.getClientRects(),e=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom)),Fm=(e,t,r)=>{e.dispatch(t,r)},Um=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},zm=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},jm=(e,t)=>e.dispatch("SetContent",t),Hm=(e,t)=>e.dispatch("GetContent",t),Vm=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ie={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ie.metaKeyPressed(e),metaKeyPressed:e=>I.os.isMacOS()||I.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},qm="data-mce-selected",$m=Math.abs,Wm=Math.round,Km={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Gm=(r,l)=>{const d=l.dom,c=l.getDoc(),u=document,m=l.getBody();let f,g,p,h,v,b,y,C,w,x,a,k,E,S,_;const i=e=>H(e)&&(uo(e)||d.is(e,"figure.image")),N=e=>po(e)||d.hasClass(e,"mce-preview-object"),e=e=>{var t,r,n,o=e.target;t=e,r=l.selection.getRng(),("longpress"===(n=t).type||0===n.type.indexOf("touch")?(n=t.touches[0],!i(t.target)||Im(n.clientX,n.clientY,r)):!i(t.target)||Im(t.clientX,t.clientY,r))||e.isDefaultPrevented()||l.selection.select(o)},R=e=>d.hasClass(e,"mce-preview-object")&&H(e.firstElementChild)?[e,e.firstElementChild]:d.is(e,"figure.image")?[e.querySelector("img")]:[e],A=e=>{var t=Xl(l);return!!t&&"false"!==e.getAttribute("data-mce-resize")&&e!==l.getBody()&&(d.hasClass(e,"mce-preview-object")&&H(e.firstElementChild)?Or(ee(e.firstElementChild),t):Or(ee(e),t))},s=(e,t,r)=>{H(r)&&(e=R(e),Y(e,e=>{e.style[t]||!l.schema.isValid(e.nodeName.toLowerCase(),t)?d.setStyle(e,t,r):d.setAttrib(e,t,""+r)}))},O=(e,t,r)=>{s(e,"width",t),s(e,"height",r)},T=e=>{var t,r,n=e.screenX-b,o=e.screenY-y;k=n*h[2]+C,E=o*h[3]+w,k=k<5?5:k,E=E<5?5:E,((i(f)||N(f))&&!1!==Ql(l)?!ie.modifierPressed(e):ie.modifierPressed(e))&&($m(n)>$m(o)?(E=Wm(k*x),k=Wm(E/x)):(k=Wm(E/x),E=Wm(k*x))),O(g,k,E),e=0<(e=h.startPos.x+n)?e:0,t=0<(t=h.startPos.y+o)?t:0,d.setStyles(p,{left:e,top:t,display:"block"}),p.innerHTML=k+" &times; "+E,h[2]<0&&g.clientWidth<=k&&d.setStyle(g,"left",void 0+(C-k)),h[3]<0&&g.clientHeight<=E&&d.setStyle(g,"top",void 0+(w-E)),(n=m.scrollWidth-S)+(o=m.scrollHeight-_)!=0&&d.setStyles(p,{left:e-n,top:t-o}),a||(e=l,n=f,t=C,o=w,r="corner-"+h.name,e.dispatch("ObjectResizeStart",{target:n,width:t,height:o,origin:r}),a=!0)},B=()=>{var e,t,r,n,o=a;a=!1,o&&(s(f,"width",k),s(f,"height",E)),d.unbind(c,"mousemove",T),d.unbind(c,"mouseup",B),u!==c&&(d.unbind(u,"mousemove",T),d.unbind(u,"mouseup",B)),d.remove(g),d.remove(p),d.remove(v),D(f),o&&(o=l,e=f,t=k,r=E,n="corner-"+h.name,o.dispatch("ObjectResized",{target:e,width:t,height:r,origin:n}),d.setAttrib(f,"style",d.getAttrib(f,"style"))),l.nodeChanged()},D=e=>{L();const t=d.getPos(e,m),o=t.x,a=t.y,r=e.getBoundingClientRect(),i=r.width||r.right-r.left,s=r.height||r.bottom-r.top;f!==e&&(P(),f=e,k=E=0);var n=l.dispatch("ObjectSelected",{target:e});A(e)&&!n.isDefaultPrevented()?X(Km,(r,n)=>{var e=d.get("mceResizeHandle"+n);e&&d.remove(e),e=d.add(m,"div",{id:"mceResizeHandle"+n,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+n+"-resize; margin:0; padding:0"}),d.bind(e,"mousedown",e=>{var t;e.stopImmediatePropagation(),e.preventDefault(),e=e,t=R(f)[0],b=e.screenX,y=e.screenY,C=t.clientWidth,w=t.clientHeight,x=w/C,(h=r).name=n,h.startPos={x:i*r[0]+o,y:s*r[1]+a},S=m.scrollWidth,_=m.scrollHeight,v=d.add(m,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),d.setStyles(v,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=N(e=f)?d.create("img",{src:I.transparentSrc}):e.cloneNode(!0),d.addClass(g,"mce-clonedresizable"),d.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",d.setStyles(g,{left:o,top:a,margin:0}),O(g,i,s),g.removeAttribute(qm),m.appendChild(g),d.bind(c,"mousemove",T),d.bind(c,"mouseup",B),u!==c&&(d.bind(u,"mousemove",T),d.bind(u,"mouseup",B)),p=d.add(m,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},C+" &times; "+w)}),r.elm=e,d.setStyles(e,{left:i*r[0]+o-e.offsetWidth/2,top:s*r[1]+a-e.offsetHeight/2})}):P(!1)},n=Ui(D,0),P=(e=!0)=>{n.cancel(),L(),f&&e&&f.removeAttribute(qm),X(Km,(e,t)=>{t=d.get("mceResizeHandle"+t);t&&(d.unbind(t),d.remove(t))})},o=(e,t)=>d.isChildOf(e,t),t=e=>{if(!(a||l.removed||l.composing)){var e="mousedown"===e.type?e.target:r.getNode(),e=mn(ee(e),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(e=>e.dom).filter(e=>d.isEditable(e.parentElement)).getOrUndefined(),t=H(e)?d.getAttrib(e,qm,"1"):"1";if(Y(d.select(`img[${qm}],hr[${qm}]`),e=>{e.removeAttribute(qm)}),H(e)&&o(e,m)&&l.hasFocus()){M();const l=r.getStart(!0);if(o(l,e)&&o(r.getEnd(!0),e))return d.setAttrib(e,qm,t),void n.throttle(e)}P()}},L=()=>{X(Km,e=>{e.elm&&(d.unbind(e.elm),delete e.elm)})},M=()=>{try{l.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return l.on("init",()=>{M(),l.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",t),l.on("keyup compositionend",e=>{f&&"TABLE"===f.nodeName&&t(e)}),l.on("hide blur",P),l.on("contextmenu longpress",e,!0)}),l.on("remove",L),{isResizable:A,showResizeRect:D,hideResizeRect:P,updateResizeRect:t,destroy:()=>{n.cancel(),f=g=v=null}}},Ym=(e,t,r)=>{var n,e=e.document.createRange(),o=e;return t.fold(e=>{o.setStartBefore(e.dom)},(e,t)=>{o.setStart(e.dom,t)},e=>{o.setStartAfter(e.dom)}),n=e,r.fold(e=>{n.setEndBefore(e.dom)},(e,t)=>{n.setEnd(e.dom,t)},e=>{n.setEndAfter(e.dom)}),e},Xm=(e,t,r,n,o)=>{e=e.document.createRange();return e.setStart(t.dom,r),e.setEnd(n.dom,o),e},Qm=nl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jm=(e,t,r)=>t(ee(r.startContainer),r.startOffset,ee(r.endContainer),r.endOffset),Zm=(Qm.ltr,Qm.rtl,(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n})),ef=document.caretPositionFromPoint?(r,e,t)=>{var n,o;return W.from(null==(o=(n=r.dom).caretPositionFromPoint)?void 0:o.call(n,e,t)).bind(e=>{var t;return null===e.offsetNode?W.none():((t=r.dom.createRange()).setStart(e.offsetNode,e.offset),t.collapse(),W.some(t))})}:document.caretRangeFromPoint?(e,t,r)=>{var n;return W.from(null==(n=(e=e.dom).caretRangeFromPoint)?void 0:n.call(e,t,r))}:W.none,tf=nl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),rf={before:tf.before,on:tf.on,after:tf.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(p,p,p)},nf=nl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),of={domRange:nf.domRange,relative:nf.relative,exact:nf.exact,exactFromRange:e=>nf.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{e=e.match({domRange:e=>ee(e.startContainer),relative:(e,t)=>rf.getStart(e),exact:(e,t,r,n)=>e});return Lr(e)},range:Zm},af=(e,t)=>{var r=Z(e);return"input"===r?rf.after(e):K(["br","img"],r)?0===t?rf.before(e):rf.after(e):rf.on(e,t)},sf=(e,t)=>{e=e.fold(rf.before,af,rf.after),t=t.fold(rf.before,af,rf.after);return of.relative(e,t)},lf=(e,t,r,n)=>{e=af(e,t),t=af(r,n);return of.relative(e,t)},df=(e,t)=>{const r=(t||document).createDocumentFragment();return Y(e,e=>{r.appendChild(e.dom)}),ee(r)},cf=e=>{const o=of.getWin(e).dom,t=(e,t,r,n)=>Xm(o,e,t,r,n),r=e.match({domRange:e=>{var t=ee(e.startContainer),r=ee(e.endContainer);return lf(t,e.startOffset,r,e.endOffset)},relative:sf,exact:lf});return((e,t)=>{o=e;var o,e=t.match({domRange:e=>({ltr:$(e),rtl:W.none}),relative:(e,t)=>({ltr:Ze(()=>Ym(o,e,t)),rtl:Ze(()=>W.some(Ym(o,t,e)))}),exact:(e,t,r,n)=>({ltr:Ze(()=>Xm(o,e,t,r,n)),rtl:Ze(()=>W.some(Xm(o,r,n,e,t)))})});{const r=(t=e).ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>Qm.rtl(ee(e.endContainer),e.endOffset,ee(e.startContainer),e.startOffset)).getOrThunk(()=>Jm(0,Qm.ltr,r)):Jm(0,Qm.ltr,r)}})(o,r).match({ltr:t,rtl:t})},uf=(e,t,r)=>{return n=Lr(ee(r)).dom,e=e,t=t,n=ee(n.document),ef(n,e,t).map(e=>Zm(ee(e.startContainer),e.startOffset,ee(e.endContainer),e.endOffset)).map(e=>{var t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined();var n},mf=(e,t)=>H(e)&&H(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,ff=(n,e,t)=>null!==((e,t)=>{let r=n;for(;r&&r!==e;){if(t(r))return r;r=r.parentNode}return null})(e,t),gf=(e,t,r)=>{var n=t.parentNode;if(n)for(var o,a=new Gn(t,e.getParent(n,e.isBlock)||e.getRoot());o=a[r?"prev":"next"]();)if(_(o))return!0;return!1},pf=(e,t,r,n,o)=>{var a=e.getRoot(),i=e.schema.getNonEmptyElements(),s=o.parentNode;let l,d;if(!s)return W.none();var c=e.getParent(s,e.isBlock)||a;if(n&&_(o)&&t&&e.isEmpty(c))return W.some(z(s,e.nodeIndex(o)));for(var u,m,f=new Gn(o,c);d=f[n?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||(u=d,m=a,Go(u)&&!ff(u,m,pu)))return W.none();if(oe(d)&&0<d.data.length)return((e,t,r)=>ff(e,t,e=>e.nodeName===r))(d,a,"A")?W.none():W.some(z(d,n?d.data.length:0));if(e.isBlock(d)||i[d.nodeName.toLowerCase()])return W.none();l=d}return!so(l)&&r&&l?W.some(z(l,0)):W.none()},hf=(e,t,r,n)=>{var o=e.getRoot();let a,i=!1,s=r?n.startContainer:n.endContainer,l=r?n.startOffset:n.endOffset;var n=ne(s)&&l===s.childNodes.length,d=e.schema.getNonEmptyElements();let c=r;if(Go(s))return W.none();if(ne(s)&&l>s.childNodes.length-1&&(c=!1),lo(s)&&(s=o,l=0),s===o){if(c&&(a=s.childNodes[0<l?l-1:0])){if(Go(a))return W.none();if(d[a.nodeName]||ro(a))return W.none()}if(s.hasChildNodes()){if(l=Math.min(!c&&0<l?l-1:l,s.childNodes.length-1),s=s.childNodes[l],l=oe(s)&&n?s.data.length:0,!t&&s===o.lastChild&&ro(s))return W.none();if((e=>{let t=s;for(;t&&t!==e;){if(k(t))return!0;t=t.parentNode}return!1})(o)||Go(s))return W.none();if(s.hasChildNodes()&&!ro(s)){a=s;const t=new Gn(s,o);do{if(k(a)||Go(a)){i=!1;break}if(oe(a)&&0<a.data.length){l=c?0:a.data.length,s=a,i=!0;break}if(d[a.nodeName.toLowerCase()]&&!go(a)){l=e.nodeIndex(a),s=a.parentNode,c||l++,i=!0;break}}while(a=c?t.next():t.prev())}}}return t&&(oe(s)&&0===l&&pf(e,n,t,!0,s).each(e=>{s=e.container(),l=e.offset(),i=!0}),ne(s))&&((a=(a=s.childNodes[l])||s.childNodes[l-1])&&_(a)&&"A"!==(null==(r=a.previousSibling)?void 0:r.nodeName)&&!gf(e,a,!1)&&!gf(e,a,!0)&&pf(e,n,t,!0,a).each(e=>{s=e.container(),l=e.offset(),i=!0})),c&&!t&&oe(s)&&l===s.data.length&&pf(e,n,t,!1,s).each(e=>{s=e.container(),l=e.offset(),i=!0}),i&&s?W.some(z(s,l)):W.none()},vf=(e,t)=>{const r=t.collapsed,n=t.cloneRange(),o=z.fromRangeStart(t);return hf(e,r,!0,n).each(e=>{r&&z.isAbove(o,e)||n.setStart(e.container(),e.offset())}),r||hf(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),mf(t,n)?W.none():W.some(n)},bf=(e,t)=>e.splitText(t),yf=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&oe(t)){if(0<r&&r<t.data.length)if(n=bf(t,r),t=n.previousSibling,o>r){o-=r;const e=bf(n,o).previousSibling;t=n=e,o=e.data.length,r=0}else o=0}else if(oe(t)&&0<r&&r<t.data.length&&(t=bf(t,r),r=0),oe(n)&&0<o&&o<n.data.length){const e=bf(n,o).previousSibling;n=e,o=e.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},Cf=n=>({walk:(e,t)=>Om(n,e,t),split:yf,expand:(e,t={type:"word"})=>{if("word"!==t.type)return e;{const t=Am(n,e,[{inline:"span"}]),r=n.createRng();return r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),r}},normalize:t=>vf(n,t).fold(P,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))}),wf=(Cf.compareRanges=mf,Cf.getCaretRangeFromPoint=uf,Cf.getSelectedNode=ms,Cf.getNode=fs,(o=>{const e=e=>{n=(r=e).dom;const t=rn(r)?n.getBoundingClientRect().height:n.offsetHeight;var r,n;if(t<=0||null===t){const t=yn(e,o);return parseFloat(t)||0}return t},n=(r,e)=>be(e,(e,t)=>{t=yn(r,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!N(t)&&!t.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+t);e=e.dom;pn(e)&&(e.style[o]=t+"px")},get:e,getOuter:e,aggregate:n,max:(e,t,r)=>{e=n(e,r);return e<t?t-e:0}}})("height")),xf=()=>ee(document),kf=(r,e)=>r.view(e).fold($([]),e=>{var t=r.owner(e),t=kf(r,t);return[e].concat(t)});var Ef=Object.freeze({__proto__:null,view:e=>{return(e.dom===document?W.none():W.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(ee)},owner:e=>Pr(e)});const Sf=e=>"textarea"===Z(e),_f=(e,t)=>{a=(r=e).dom.ownerDocument,i=a.body,s=a.defaultView,a=a.documentElement;var r,n,o,a,i=i===r.dom?In(i.offsetLeft,i.offsetTop):(n=Fn(null==s?void 0:s.pageYOffset,a.scrollTop),s=Fn(null==s?void 0:s.pageXOffset,a.scrollLeft),o=Fn(a.clientTop,i.clientTop),a=Fn(a.clientLeft,i.clientLeft),Un(r).translate(s-a,n-o)),s=(r=e,wf.get(r));return{element:e,bottom:i.top+s,height:s,pos:i,cleanup:t}},Nf=(d,c,u,m)=>{{var e=d,t=(e,t)=>{{var r=d,n=c,o=u,a=m,i=ee(r.getBody()),s=ee(r.getDoc()),l=(i.dom.offsetWidth,((e,t)=>{e=e,t=t;const r=0===(o=Vr(e)).length||Sf(e)?{element:e,offset:t}:t<o.length&&!Sf(o[t])?{element:o[t],offset:0}:(o=o[o.length-1],Sf(o)?{element:e,offset:t}:"img"===Z(o)?{element:o,offset:1}:or(o)?{element:o,offset:ko(o).length}:{element:o,offset:Vr(o).length}),n=_r('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');var o;return En(r.element,n),_f(n,()=>re(n))})(ee(o.startContainer),o.startOffset));Rf(r,s,n,l,a),l.cleanup()}},r=u,n=r.startContainer,o=r.startOffset,a=r.endContainer,i=r.endOffset,s=(t(ee(n),ee(a)),e.dom.createRng());s.setStart(n,o),s.setEnd(a,i),e.selection.setRng(r)}},Rf=(e,t,r,n,o)=>{var a={elm:n.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",a).isDefaultPrevented()||(r(e,t,zn(t).top,n,o),e.dispatch("AfterScrollIntoView",a))},Af=(e,t,r,n)=>{var o=ee(e.getDoc());Rf(e,o,r,(e=t,_f(ee(e),q)),n)},Of=(e,t,r,n,o)=>{var a=t.pos;if(n)jn(a.left,a.top,o);else{const n=a.top-r+t.height;jn(-e.getBody().getBoundingClientRect().left,n,o)}},Tf=(e,t,r,n,o,a)=>{var i=n+r,s=o.pos.top,l=o.bottom,d=n<=l-s;s<r?Of(e,o,n,!1!==a,t):i<s?Of(e,o,n,d?!1!==a:!0===a,t):i<l&&!d&&Of(e,o,n,!0===a,t)},Bf=(e,t,r,n,o)=>{var a=Lr(t).dom.innerHeight;Tf(e,t,r,a,n,o)},Df=(e,t,r,n,o)=>{var a=Lr(t).dom.innerHeight,r=(Tf(e,t,r,a,n,o),e=n.element,t=xf(),t=zn(t),a=(r=Ef).owner(e),r=kf(r,a),a=Un(e),e=ve(r,(e,t)=>{t=Un(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0}),In(e.left+a.left+t.left,e.top+a.top+t.top)),e=qn(window);r.top<e.y?Hn(n.element,!1!==o):r.top>e.bottom&&Hn(n.element,!0===o)},Pf=(e,t,r)=>Nf(e,Bf,t,r),Lf=(e,t,r)=>Af(e,t,Bf,r),Mf=(e,t,r)=>Nf(e,Df,t,r),If=(e,t,r)=>Af(e,t,Df,r),Ff=(e,t,r)=>{(e.inline?Pf:Mf)(e,t,r)},Uf=e=>e.dom.focus(),zf=e=>{var t=Qr(e).dom;return e.dom===t.activeElement},jf=(e=xf())=>W.from(e.dom.activeElement).map(ee),Hf=(e,t)=>{t=or(t)?ko(t).length:Vr(t).length+1;return t<e?t:e<0?0:e},Vf=e=>of.range(e.start,Hf(e.soffset,e.start),e.finish,Hf(e.foffset,e.finish)),qf=(e,t)=>!Xn(t.dom)&&(Br(e,t)||F(e,t)),$f=t=>e=>qf(t,e.start)&&qf(t,e.finish),Wf=e=>of.range(ee(e.startContainer),e.startOffset,ee(e.endContainer),e.endOffset),Kf=e=>{var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),W.some(t)}catch(e){return W.none()}},Gf=e=>{var t,r=e.inline||I.browser.isFirefox()?(t=ee(e.getBody()),((r=Lr(t).dom.getSelection())&&0!==r.rangeCount?W.from(r.getRangeAt(0)):W.none()).map(Wf).filter($f(t))):W.none();e.bookmark=r.isSome()?r:e.bookmark},Yf=r=>(r.bookmark||W.none()).bind(e=>{return t=ee(r.getBody()),e=e,W.from(e).filter($f(t)).map(Vf);var t}).bind(Kf),Xf={isEditorUIElement:e=>{e=e.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Qf={setEditorTimeout:(e,t,r)=>{return r=r,N(r)||(r=0),setTimeout(()=>{e.removed||t()},r)},setEditorInterval:(e,t,r)=>{r=r,N(r)||(r=0);const n=setInterval(()=>{e.removed?clearInterval(n):t()},r);return n}};let Jf;const Zf=ae.DOM,eg=e=>{e=e.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},tg=(r,e)=>{const n=cd(r),t=Zf.getParent(e,e=>{return t=e,ne(t)&&Xf.isEditorUIElement(t)||!!n&&r.dom.is(e,n);var t});return null!==t},rg=e=>{try{var t=Qr(ee(e.getElement()));return jf(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},ng=(r,e)=>{const t=e.editor;{var a=t;const i=Ui(()=>{Gf(a)},0);a.on("init",()=>{if(a.inline){var e=a,t=i;const o=()=>{t.throttle()};ae.DOM.bind(document,"mouseup",o),e.on("remove",()=>{ae.DOM.unbind(document,"mouseup",o)})}var r,n;r=a,e=i,n=e,r.on("mouseup touchend",e=>{n.throttle()}),r.on("keyup NodeChange AfterSetSelectionRange",e=>{"nodechange"===e.type&&e.selectionChange||Gf(r)})}),a.on("remove",()=>{i.cancel()})}const n=(e,t)=>{Jd(e)&&!0!==e.inline&&t(ee(e.getContainer()),"tox-edit-focus")};t.on("focusin",()=>{var e=r.focusedEditor;eg(rg(t))&&n(t,wr),e!==t&&(e&&e.dispatch("blur",{focusedEditor:t}),r.setActive(t),(r.focusedEditor=t).dispatch("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",()=>{Qf.setEditorTimeout(t,()=>{var e=r.focusedEditor;eg(rg(t))&&e===t||n(t,kr),tg(t,rg(t))||e!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),Jf||(Jf=e=>{const t=r.activeEditor;t&&en(e).each(e=>{e.ownerDocument!==document||e===document.body||tg(t,e)||r.focusedEditor!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})},Zf.bind(document,"focusin",Jf))},og=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Jf&&(Zf.unbind(document,"focusin",Jf),Jf=null)},ag=(t,e)=>{var r;r=ee(t.getBody()),((e=e).collapsed?W.from(fs(e.startContainer,e.startOffset)).map(ee):W.none()).bind(e=>Do(e)?W.some(e):Br(r,e)?W.none():W.some(r)).bind(e=>mu(e.dom)).fold(()=>{t.selection.normalize()},e=>t.selection.setRng(e.toRange()))},ig=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},sg=e=>{return e.inline?(r=e.getBody())&&(r=ee(r),zf(r)||(t=r,jf(Qr(t)).filter(e=>t.dom.contains(e.dom)).isSome())):(r=e,H(r.iframeElement)&&zf(ee(r.iframeElement)));var t,r},lg=e=>e.editorManager.setActive(e),dg=(e,t,r,n,o)=>{const a=r?t.startContainer:t.endContainer,i=r?t.startOffset:t.endOffset;return W.from(a).map(ee).map(e=>n&&t.collapsed?e:qr(e,o(e,i)).getOr(e)).bind(e=>nr(e)?W.some(e):Mr(e).filter(nr)).map(e=>e.dom).getOr(e)},cg=(e,t,r=!1)=>dg(e,t,!0,r,(e,t)=>Math.min(Kr(e),t)),ug=(e,t,r=!1)=>dg(e,t,!1,r,(e,t)=>0<t?t-1:t),mg=(e,t)=>{for(var r=e;e&&oe(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},fg=(r,e)=>C(e,e=>{var t=r.dispatch("GetSelectionRange",{range:e});return t.range!==e?t.range:e}),gg=["img","br"],pg=e=>{return Eo(e).filter(e=>0!==e.trim().length||-1<e.indexOf(Co)).isSome()||K(gg,Z(e))||(e=e,rr(e)&&"false"===ur(e,"contenteditable"))},hg="[data-mce-autocompleter]",vg=(r,e)=>{var t;bg(ee(r.getBody())).isNone()&&(t=_r('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',r.getDoc()),te(t,ee(e.extractContents())),e.insertNode(t.dom),Mr(t).each(e=>e.dom.normalize()),((e,n)=>{const o=e=>{var t=Vr(e);for(let e=t.length-1;0<=e;e--){var r=t[e];if(n(r))return W.some(r);r=o(r);if(r.isSome())return r}return W.none()};return o(e)})(t,pg).map(e=>{var t;r.selection.setCursorLocation(e.dom,(t=e,"img"===Z(t)?1:Eo(t).fold(()=>Vr(t).length,e=>e.length)))}))},bg=e=>un(e,hg),yg={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Cg=(r,n,e)=>{var t=e?"lastChild":"firstChild",o=e?"prev":"next";if(r[t])return r[t];if(r!==n){let t=r[o];if(t)return t;for(let e=r.parent;e&&e!==n;e=e.parent)if(t=e[o])return t}},wg=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class xg{static create(e,t){const r=new xg(e,yg[e]||1);return t&&X(t,(e,t)=>{r.attr(t,e)}),r}constructor(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(t,r){const n=this;if(!j(t))return H(t)&&X(t,(e,t)=>{n.attr(t,e)}),n;var o=n.attributes;if(o){if(void 0===r)return o.map[t];if(null===r){if(t in o.map){delete o.map[t];let e=o.length;for(;e--;)if(o[e].name===t)return o.splice(e,1),n}}else{if(t in o.map){let e=o.length;for(;e--;)if(o[e].name===t){o[e].value=r;break}}else o.push({name:t,value:r});o.map[t]=r}return n}}clone(){const r=this,e=new xg(r.name,r.type),n=r.attributes;if(n){const r=[];r.map={};for(let e=0,t=n.length;e<t;e++){var o=n[e];"id"!==o.name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value)}e.attributes=r}return e.value=r.value,e}wrap(e){return this.parent&&(this.parent.insert(e,this),e.append(this)),this}unwrap(){for(let e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){var e=this.parent,t=this.next,r=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):r&&(r.next=t),e.lastChild===this?(e.lastChild=r)&&(r.next=null):t&&(t.prev=r),this.parent=this.next=this.prev=null),this}append(e){e.parent&&e.remove();var t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e}insert(e,t,r){e.parent&&e.remove();var n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,(e.next=t).prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,(e.prev=t).next=e),e.parent=n,e}getAll(t){var r=[];for(let e=this.firstChild;e;e=Cg(e,this))e.name===t&&r.push(e);return r}children(){var t=[];for(let e=this.firstChild;e;e=e.next)t.push(e);return t}empty(){const t=this;if(t.firstChild){var r=[];for(let e=t.firstChild;e;e=Cg(e,t))r.push(e);let e=r.length;for(;e--;){const t=r[e];t.parent=t.firstChild=t.lastChild=t.next=t.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(e,t={},r){var n,o;let a=this.firstChild;if(wg(this))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name])return!1;if(wg(a))return!1}if(8===a.type)return!1;if(3===a.type&&(n=a,o=void 0,o=null!=(o=n.value)?o:"",!ga(o)||(n=n.parent)&&("span"!==n.name||n.attr("style"))&&/^[ ]+$/.test(o)))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&ga(null!=(n=a.value)?n:""))return!1;if(r&&r(a))return!1}while(a=Cg(a,this));return!0}walk(e){return Cg(this,null,e)}}const kg=(e,t,r=0)=>{var n=e.toLowerCase();if(-1!==n.indexOf("[if ",r)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(n.substr(r))){const e=n.indexOf("[endif]",r);return n.indexOf(">",e)}if(t){const e=n.indexOf(">",r);return-1!==e?e:n.length}{const t=/--!?>/g;t.lastIndex=r;r=t.exec(e);return r?r.index+r[0].length:n.length}},Eg=(e,t)=>{var r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,n=e.schema;let o=((e,t)=>{e=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(e,"")})(e.getTempAttrs(),t);for(var a=n.getVoidElements();i=r.exec(o);){const e=r.lastIndex,t=i[0].length;var i=a[i[1]]?e:((e,t,r)=>{var n=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,a=e.getVoidElements();let i=1,s=r;for(;0!==i;)for(n.lastIndex=s;;){const e=n.exec(t);if(null===e)return s;if("!"===e[1]){s=st(e[2],"--")?kg(t,!1,e.index+3):kg(t,!0,e.index+1);break}{o.lastIndex=n.lastIndex;const r=o.exec(t);if(!T(r)&&r.index===n.lastIndex){"/"===e[1]?--i:Q(a,e[2])||(i+=1),s=n.lastIndex+r[0].length;break}}}return s})(n,o,e);o=o.substring(0,e-t)+o.substring(i),r.lastIndex=e-t}return Vo(o)},Sg=Eg,_g=e=>{e=Wn(e,"[data-mce-bogus]");Y(e,e=>{("all"===ur(e,"data-mce-bogus")?re:Ao(e)?(En(e,Rr(yo)),re):On)(e)})},Ng=e=>{e=Wn(e,"input");Y(e,e=>{gr(e,"name")})},Rg=J.makeMap,Ag=e=>{const n=[],o=(e=e||{}).indent,a=Rg(e.indent_before||""),i=Rg(e.indent_after||""),s=ei.getEncodeFunc(e.entity_encoding||"raw",e.entities),l="xhtml"!==e.element_format;return{start:(e,r,t)=>{if(o&&a[e]&&0<n.length){const e=n[n.length-1];0<e.length&&"\n"!==e&&n.push("\n")}if(n.push("<",e),r)for(let e=0,t=r.length;e<t;e++){const o=r[e];n.push(" ",o.name,'="',s(o.value,!0),'"')}if(n[n.length]=!t||l?">":" />",t&&o&&i[e]&&0<n.length){const e=n[n.length-1];0<e.length&&"\n"!==e&&n.push("\n")}},end:e=>{n.push("</",e,">"),o&&i[e]&&0<n.length&&0<(e=n[n.length-1]).length&&"\n"!==e&&n.push("\n")},text:(e,t)=>{0<e.length&&(n[n.length]=t?e:s(e))},cdata:e=>{n.push("<![CDATA[",e,"]]>")},comment:e=>{n.push("\x3c!--",e,"--\x3e")},pi:(e,t)=>{t?n.push("<?",e," ",s(t),"?>"):n.push("<?",e,"?>"),o&&n.push("\n")},doctype:e=>{n.push("<!DOCTYPE",e,">",o?"\n":"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Og=(r={},s=ui())=>{const l=Ag(r);return r.validate=!("validate"in r)||r.validate,{serialize:e=>{const t=r.validate,a={3:e=>{var t;l.text(null!=(t=e.value)?t:"",e.raw)},8:e=>{l.comment(null!=(e=e.value)?e:"")},7:e=>{l.pi(e.name,e.value)},10:e=>{l.doctype(null!=(e=e.value)?e:"")},4:e=>{l.cdata(null!=(e=e.value)?e:"")},11:e=>{let t=e;if(t=t.firstChild)for(;i(t),t=t.next;);}},i=(l.reset(),n=>{var o;const e=a[n.type];if(e)e(n);else{const a=n.name,e=a in s.getVoidElements();let r=n.attributes;if(t&&r&&1<r.length){const l=[],o=(l.map={},s.getElementRule(n.name));if(o){for(let e=0,t=o.attributesOrder.length;e<t;e++){const s=o.attributesOrder[e];if(s in r.map){const n=r.map[s];l.map[s]=n,l.push({name:s,value:n})}}for(let e=0,t=r.length;e<t;e++){const s=r[e].name;if(!(s in l.map)){const n=r.map[s];l.map[s]=n,l.push({name:s,value:n})}}r=l}}if(l.start(a,r,e),!e){let e=n.firstChild;if(e)for("pre"!==a&&"textarea"!==a||3!==e.type||"\n"!==(null==(o=e.value)?void 0:o[0])||l.text("\n",!0);i(e),e=e.next;);l.end(a)}}});return 1!==e.type||r.inner?3===e.type?a[3](e):a[11](e):i(e),l.getContent()}}},Tg=new Set,Bg=(Y(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{Tg.add(e)}),["font","text-decoration","text-emphasis"]),Dg=(e,t)=>Pe(e.parseStyle(e.getAttrib(t,"style"))),Pg=(r,n,o)=>W.from(o.container()).filter(oe).exists(e=>{var t=r?0:-1;return n(e.data.charAt(o.offset()+t))}),Lg=D(Pg,!0,Au),Mg=D(Pg,!1,Au),Ig=e=>{e=e.container();return oe(e)&&(0===e.data.length||Ho(e.data)&&Mm.isBookmarkNode(e.parentNode))},Fg=(t,r)=>e=>Lc(t?0:-1,e).filter(r).isSome(),Ug=e=>uo(e)&&"block"===yn(ee(e),"display"),zg=e=>{return k(e)&&(e=e,!(ne(e)&&"all"===e.getAttribute("data-mce-bogus")))},jg=Fg(!0,Ug),Hg=Fg(!1,Ug),Vg=Fg(!0,po),qg=Fg(!1,po),$g=Fg(!0,ro),Wg=Fg(!1,ro),Kg=Fg(!0,zg),Gg=Fg(!1,zg),Yg=(e,t)=>{return e=e,r=t,n=P,Br(r,e)?Fr(e,e=>n(e)||F(e,r)).slice(0,-1):[];var r,n},Xg=(e,t)=>[e].concat(Yg(e,t)),Qg=(e,t,r)=>lu(e,t,r,Ig),Jg=(e,t)=>Ce(Xg(ee(t.container()),e),No),Zg=(e,r,n)=>Qg(e,r.dom,n).forall(t=>Jg(r,n).fold(()=>!Pc(t,n,r.dom),e=>!Pc(t,n,r.dom)&&Br(e,ee(t.container())))),ep=(t,r,n)=>Jg(r,n).fold(()=>Qg(t,r.dom,n).forall(e=>!Pc(e,n,r.dom)),e=>Qg(t,e.dom,n).isNone()),tp=D(ep,!1),rp=D(ep,!0),np=D(Zg,!1),op=D(Zg,!0),ap=e=>Vc(e).exists(Ao),ip=(e,t,r)=>{var n=L(Xg(ee(r.container()),t),No),n=Oe(n).getOr(t);return iu(e,n.dom,r).filter(ap)},sp=(e,t)=>Vc(t).exists(Ao)||ip(!0,e,t).isSome(),lp=(e,t)=>{return r=t,W.from(r.getNode(!0)).map(ee).exists(Ao)||ip(!1,e,t).isSome();var r},dp=D(ip,!1),cp=D(ip,!0),up=e=>z.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),mp=(e,t)=>{t=L(Xg(ee(t.container()),e),No);return Oe(t).getOr(e)},fp=(e,t)=>up(t)?Mg(t):Mg(t)||uu(mp(e,t).dom,t).exists(Mg),gp=(e,t)=>up(t)?Lg(t):Lg(t)||cu(mp(e,t).dom,t).exists(Lg),pp=e=>Vc(e).bind(e=>dn(e,nr)).exists(e=>{return e=yn(e,"white-space"),K(["pre","pre-wrap"],e)}),hp=(t,r)=>e=>{return e=new Gn(e,t)[r](),H(e)&&k(e)&&kc(e)},vp=(e,t)=>{return!pp(t)&&(o=r=e,a=n=t,uu(o.dom,a).isNone()||(o=r,a=n,cu(o.dom,a).isNone())||tp(r,n)||rp(r,n)||lp(r,n)||sp(r,n)||fp(e,t)||gp(e,t));var r,n,o,a},bp=(e,t)=>{return!pp(t)&&(tp(e,t)||np(e,t)||lp(e,t)||fp(e,t)||(e=e,t=t,r=uu(e.dom,t).getOr(t),e=hp(e.dom,"prev"),t.isAtStart()&&(e(t.container())||e(r.container()))));var r},yp=(e,t)=>{return!pp(t)&&(rp(e,t)||op(e,t)||sp(e,t)||gp(e,t)||(e=e,t=t,r=cu(e.dom,t).getOr(t),e=hp(e.dom,"next"),t.isAtEnd()&&(e(t.container())||e(r.container()))));var r},Cp=(e,t)=>{return bp(e,t)||yp(e,(t=(e=t).container(),r=e.offset(),oe(t)&&r<t.data.length?z(t,r+1):e));var r},wp=(e,t)=>Ru(e.charAt(t)),xp=(e,t)=>Au(e.charAt(t)),kp=(e,t,r)=>{var n=t.data,o=z(t,0);return r||!wp(n,0)||Cp(e,o)?!!(r&&xp(n,0)&&bp(e,o))&&(t.data=Co+n.slice(1),!0):(t.data=" "+n.slice(1),!0)},Ep=(e,t,r)=>{var n=t.data,o=z(t,n.length-1);return r||!wp(n,n.length-1)||Cp(e,o)?!!(r&&xp(n,n.length-1)&&yp(e,o))&&(t.data=n.slice(0,-1)+Co,!0):(t.data=n.slice(0,-1)+" ",!0)},Sp=(e,t,r)=>{var n,o,a;0!==r&&(a=ee(e),a=ln(a,No).getOr(a),n=e.data.slice(t,t+r),o=t+r>=e.data.length&&yp(a,z(e,e.data.length)),a=0===t&&bp(a,z(e,0)),e.replaceData(t,r,ha(n,4,a,o)))},_p=(e,t)=>{var r=e.data.slice(t),r=r.length-ut(r).length;Sp(e,t,r)},Np=(e,t)=>{var r=e.data.slice(0,t),r=r.length-mt(r).length;Sp(e,t-r,r)},Rp=(e,t,r,n=!0)=>{var o=mt(e.data).length,a=n?e:t,t=n?t:e;return n?a.appendData(t.data):a.insertData(0,t.data),re(ee(t)),r&&_p(a,o),a},Ap=(e,t)=>{return e=e,n=(r=t).container(),o=r.offset(),!z.isTextPosition(r)&&n===e.parentNode&&o>z.before(e).offset()?z(t.container(),t.offset()-1):t;var r,n,o},Op=e=>{return ca(e.previousSibling)?W.some((t=e.previousSibling,oe(t)?z(t,t.data.length):z.after(t))):e.previousSibling?fu(e.previousSibling):W.none();var t},Tp=e=>{return ca(e.nextSibling)?W.some((t=e.nextSibling,oe(t)?z(t,0):z.before(t))):e.nextSibling?mu(e.nextSibling):W.none();var t},Bp=(e,t,r)=>{return t=t,n=r,(e?(i=t,s=n,Tp(s).orThunk(()=>Op(s)).orThunk(()=>{return e=i,t=s,cu(e,z.after(t)).orThunk(()=>uu(e,z.before(t)));var e,t})):(o=t,a=n,Op(a).orThunk(()=>Tp(a)).orThunk(()=>{return t=o,e=a,W.from(e.previousSibling||e.parentNode).bind(e=>uu(t,z.before(e))).orThunk(()=>cu(t,z.after(e)));var t,e}))).map(D(Ap,r));var n,o,a,i,s},Dp=(t,r,e)=>{e.fold(()=>{t.focus()},e=>{t.selection.setRng(e.toRange(),r)})},Pp=(e,t)=>t&&Q(e.schema.getBlockElements(),Z(t)),Lp=e=>{var t;return U(e)?(t=_r('<br data-mce-bogus="1">'),An(e),te(e,t),W.some(z.before(t.dom))):W.none()},Mp=(t,r,e,n=!0)=>{var o,a=Bp(r,t.getBody(),e.dom),i=ln(e,D(Pp,t),(o=t.getBody(),e=>e.dom===o));const s=((e,t,o)=>{const r=Ur(e).filter(or),n=zr(e).filter(or);return re(e),e=r,a=n,i=t,s=(e,t,r)=>{var e=e.dom,t=t.dom,n=e.data.length;return Rp(e,t,o),r.container()===t?z(e,n):r},(e.isSome()&&a.isSome()&&i.isSome()?W.some(s(e.getOrDie(),a.getOrDie(),i.getOrDie())):W.none()).orThunk(()=>(o&&(r.each(e=>Np(e.dom,e.dom.length)),n.each(e=>_p(e.dom,0))),t));var a,i,s})(e,a,(a=t,e=e,Q(a.schema.getTextInlineElements(),Z(e))));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):i.bind(Lp).fold(()=>{n&&Dp(t,r,s)},e=>{n&&Dp(t,r,W.some(e))})},Ip=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Fp=(e,t)=>Or(ee(t),Yl(e))&&!Oa(e.schema,t)&&e.dom.isEditable(t),Up=e=>{return"rtl"===ae.DOM.getStyle(e,"direction",!0)||(e=null!=(e=e.textContent)?e:"",Ip.test(e))},zp=(e,t,r)=>{e=e,t=t,r=r;r=L(ae.DOM.getParents(r.container(),"*",t),e);return W.from(r[r.length-1])},jp=(e,t)=>{var r=t.container(),n=t.offset();return e?Ko(r)?oe(r.nextSibling)?z(r.nextSibling,0):z.after(r):Xo(t)?z(r,n+1):t:Ko(r)?oe(r.previousSibling)?z(r.previousSibling,r.previousSibling.data.length):z.before(r):Qo(t)?z(r,n-1):t},Hp=D(jp,!0),Vp=D(jp,!1),qp=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},$p=e=>qp(e,"Delete"),Wp=e=>Oo(e)||Bo(e),Kp=(e,t)=>{return Br(e,t)?dn(t,Wp,(r=e,e=>Wt(Mr(e),r,F))):W.none();var r},Gp=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Yp=(a,i,s)=>Gt(mu(s),fu(s),(e,t)=>{const r=jp(!0,e),n=jp(!1,t),o=jp(!1,i);return a?cu(s,o).exists(e=>e.isEqual(n)&&i.isEqual(r)):uu(s,o).exists(e=>e.isEqual(r)&&i.isEqual(n))}).getOr(!0),Xp=e=>{var t;return(8===er(t=e)||"#comment"===Z(t)?Ur:Wr)(e).bind(Xp).orThunk(()=>W.some(e))},Qp=(e,t,r,n=!0)=>{var o;t.deleteContents();const a=Xp(r).getOr(r),i=ee(null!=(t=e.dom.getParent(a.dom,e.dom.isBlock))?t:r.dom);if(i.dom===e.getBody()?Gp(e,n):U(i)&&(Uo(i),n)&&e.selection.setCursorLocation(i.dom,0),!F(r,i)){const e=Wt(Mr(i),r)?[]:Mr(o=i).map(Vr).map(e=>L(e,e=>!F(o,e))).getOr([]);Y(e.concat(Vr(r)),e=>{F(e,i)||Br(e,i)||!U(e)||re(e)})}},Jp=e=>Wn(e,"td,th"),Zp=(e,t)=>({start:e,end:t}),eh=nl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),th=(e,t)=>mn(ee(e),"td,th",t),rh=e=>!F(e.start,e.end),nh=(e,r)=>ju(e.start,r).bind(t=>ju(e.end,r).bind(e=>Yt(F(t,e),t))),oh=e=>t=>nh(t,e).map(e=>({rng:t,table:e,cells:Jp(e)})),ah=(e,t,r,n)=>{if(r.collapsed||!e.forall(rh))return W.none();if(t.isSameTable){const t=e.bind(oh(n));return W.some({start:t,end:t})}{const e=th(r.startContainer,n),t=th(r.endContainer,n),i=e.bind((a=n,t=>ju(t,a).bind(e=>Te(Jp(e)).map(e=>Zp(t,e))))).bind(oh(n)),s=t.bind((o=n,t=>ju(t,o).bind(e=>Oe(Jp(e)).map(e=>Zp(e,t))))).bind(oh(n));return W.some({start:i,end:s})}var o,a},ih=(e,t)=>we(e,e=>F(e,t)),sh=r=>Gt(ih(r.cells,r.rng.start),ih(r.cells,r.rng.end),(e,t)=>r.cells.slice(e,t+1)),lh=(e,t)=>{const{startTable:r,endTable:n}=t,o=e.cloneRange();return r.each(e=>o.setStartAfter(e.dom)),n.each(e=>o.setEndBefore(e.dom)),o},dh=(e,t)=>{n=e;var r,n,o,a,i,s,l,d,c,u,m,f,e=e=>F(n,e),g=(o=t,g=e,l=th(o.startContainer,g),o=th(o.endContainer,g),Gt(l,o,Zp)),p=(r=e,p=(l=e=>ju(ee(e),r))((o=t).startContainer),l=l(o.endContainer),o=p.isSome(),s=l.isSome(),u=Gt(p,l,F).getOr(!1),{startTable:p,endTable:l,isStartInTable:o,isEndInTable:s,isSameTable:u,isMultiTable:!u&&o&&s});return m=t,f=e,g.exists(e=>{return t=e,r=f,!rh(t)&&nh(t,r).exists(e=>{e=e.dom.rows;return 1===e.length&&1===e[0].cells.length})&&qu(e.start,m);var t,r})?g.map(e=>eh.singleCellTable(t,e.start)):p.isMultiTable?(l=g,d=p,c=t,u=e,ah(l,d,c,u).bind(({start:e,end:t})=>{var r=e.bind(sh).getOr([]),t=t.bind(sh).getOr([]);if(0<r.length&&0<t.length){const e=lh(c,d);return W.some(eh.multiTable(r,t,e))}return W.none()})):(o=g,a=p,i=t,s=e,ah(o,a,i,s).bind(({start:e,end:t})=>e.or(t)).bind(e=>{var t=a["isSameTable"],r=sh(e).getOr([]);if(t&&e.cells.length===r.length)return W.some(eh.fullTable(e.table));if(0<r.length){if(t)return W.some(eh.partialTable(r,W.none()));{const e=lh(i,a);return W.some(eh.partialTable(r,W.some({...a,rng:e})))}}return W.none()}))},ch=e=>Y(e,e=>{gr(e,"contenteditable"),Uo(e)}),uh=(e,t,r,n)=>{var o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),ph(e,o,t,!1).each(e=>e())},mh=e=>{const t=zu(e),r=ee(e.selection.getNode());fo(r.dom)&&U(r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),1<t.length&&G(t,e=>F(e,r))&&dr(r,"data-mce-selected","1")},fh=(s,l,t)=>W.some(()=>{const i=s.selection.getRng(),e=t.bind(({rng:e,isStartInTable:t})=>{a=s,o=t?e.endContainer:e.startContainer;var r,n,o=W.from(a.dom.getParent(o,a.dom.isBlock)).map(ee),a=(e.deleteContents(),r=s,n=t,o.filter(U).each(e=>{n?re(e):(Uo(e),r.selection.setCursorLocation(e.dom,0))}),t?l[0]:l[l.length-1]);return uh(s,a,i,t),U(a)?W.none():W.some(t?l.slice(1):l.slice(0,-1))}).getOr(l);ch(e),mh(s)}),gh=(n,o,a,i)=>W.some(()=>{var e=n.selection.getRng(),t=o[0],r=a[a.length-1],e=(uh(n,t,e,!0),uh(n,r,e,!1),U(t)?o:o.slice(1)),t=U(r)?a:a.slice(0,-1);ch(e.concat(t)),i.deleteContents(),mh(n)}),ph=(e,t,r,n=!0)=>W.some(()=>{Qp(e,t,r,n)}),hh=(e,t)=>W.some(()=>Mp(e,!1,t)),vh=(e,t)=>Ce(Xg(t,e),Po),bh=(e,t)=>Ce(Xg(t,e),sr("caption")),yh=(e,t)=>W.some(()=>{Uo(t),e.selection.setCursorLocation(t.dom,0)}),Ch=(e,t)=>(e?$g:Wg)(t),wh=(a,i,e)=>{const s=ee(a.getBody());return bh(s,e).fold(()=>((a,i,s,e)=>{const l=z.fromRangeStart(a.selection.getRng());return vh(s,e).bind(e=>{return U(e)?yh(a,e):(t=a,r=s,n=i,o=e,e=l,su(n,t.getBody(),e).bind(e=>vh(r,ee(e.getNode())).bind(e=>F(e,o)?W.none():W.some(q))));var t,r,n,o})})(a,i,s,e).orThunk(()=>{return Yt((e=a,t=i,r=z.fromRangeStart(e.selection.getRng()),Ch(t,r)||iu(t,e.getBody(),r).exists(e=>Ch(t,e))),q);var e,t,r}),e=>{return t=a,r=i,n=s,e=e,o=z.fromRangeStart(t.selection.getRng()),U(e)?yh(t,e):(l=t,d=n,c=r,u=e,m=o,su(c,l.getBody(),m).fold(()=>W.some(q),e=>{return o=u,a=c,i=m,s=e,mu(o.dom).bind(t=>fu(o.dom).map(e=>a?i.isEqual(t)&&s.isEqual(e):i.isEqual(e)&&s.isEqual(t))).getOr(!0)?(r=l,n=u,yh(r,n)):(r=d,t=u,n=e,bh(r,ee(n.getNode())).fold(()=>W.some(q),e=>Yt(!F(e,t),q)));var t,r,n,o,a,i,s}));var t,r,n,l,d,c,u,m,o})},xh=(e,t)=>{var n,o,a,r,i=ee(e.selection.getStart(!0)),s=zu(e);return e.selection.isCollapsed()&&0===s.length?wh(e,t,i):(t=e,e=i,i=s,s=ee(t.getBody()),r=t.selection.getRng(),0!==i.length?fh(t,i,W.none()):(n=t,o=s,a=r,i=e,bh(o,i).fold(()=>{return t=n,e=o,r=a,dh(e,r).bind(e=>e.fold(D(ph,t),D(hh,t),D(fh,t),D(gh,t)));var t,e,r},e=>{return t=n,e=e,yh(t,e);var t})))},kh=(e,t)=>{let r=t;for(;r&&r!==e;){if(mo(r)||k(r))return r;r=r.parentNode}return null},Eh=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Sh=J.each,_h=e=>{const o=e.dom,r=new Set(e.serializer.getTempAttrs()),a=t=>G(Eh,e=>st(t,e))||r.has(t);return{compare:(e,t)=>{if(e.nodeName!==t.nodeName||e.nodeType!==t.nodeType)return!1;var r=t=>{const r={};return Sh(o.getAttribs(t),e=>{e=e.nodeName.toLowerCase();"style"===e||a(e)||(r[e]=o.getAttrib(t,e))}),r},n=(e,t)=>{for(const n in e)if(Q(e,n)){var r=t[n];if(S(r))return!1;if(e[n]!==r)return!1;delete t[n]}for(const e in t)if(Q(t,e))return!1;return!0};if(ne(e)&&ne(t)){if(!n(r(e),r(t)))return!1;if(!n(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style"))))return!1}return!Nu(e)&&!Nu(t)},isAttributeInternal:a}},Nh=(r,n,o,a)=>{const i=o.name;for(let e=0,t=r.length;e<t;e++){var s=r[e];if(s.name===i){const r=a.nodes[i];r?r.nodes.push(o):a.nodes[i]={filter:s,nodes:[o]}}}if(o.attributes)for(let e=0,t=n.length;e<t;e++){const i=n[e],l=i.name;if(l in o.attributes.map){const r=a.attributes[l];r?r.nodes.push(o):a.attributes[l]={filter:i,nodes:[o]}}}},Rh=(e,a)=>{var t=(e,o)=>{X(e,r=>{const n=Be(r.nodes);Y(r.filter.callbacks,t=>{for(let e=n.length-1;0<=e;e--){const t=n[e];(o?void 0!==t.attr(r.filter.name):t.name===r.filter.name)&&!de(t.parent)||n.splice(e,1)}0<n.length&&t(n,r.filter.name,a)})})};t(e.nodes,!1),t(e.attributes,!0)},Ah=(e,t,r,n={})=>{e=((t,r,n)=>{const o={nodes:{},attributes:{}};if(n.firstChild){let e=n;for(;e=e.walk();)Nh(t,r,e,o)}return o})(e,t,r);Rh(e,n)},Oh=(e,t,r,n)=>{if((e.pad_empty_with_br||t.insert)&&r(n)){const e=new xg("br",1);t.insert&&e.attr("data-mce-bogus","1"),n.empty().append(e)}else n.empty().append(new xg("#text",3)).value=Co},Th=(e,t)=>{var r=null==e?void 0:e.firstChild;return H(r)&&r===e.lastChild&&r.name===t},Bh=(t,e,r,n)=>n.isEmpty(e,r,e=>{return!0===(null==(e=t.getElementRule(e.name))?void 0:e.paddEmpty)}),Dh=t=>{let r;for(let e=t;e;e=e.parent){const t=e.attr("contenteditable");if("false"===t)break;"true"===t&&(r=e)}return W.from(r)},Ph=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{var n=e.children();for(const e of n)r&&!t.isValidChild(r.name,e.name)&&Ph(e,t,r);e.unwrap()}},Lh=(o,a,t,i=q)=>{const s=a.getTextBlockElements(),l=a.getNonEmptyElements(),d=a.getWhitespaceElements(),c=J.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),u=new Set,m=e=>e!==t&&!c[e.name];for(let e=0;e<o.length;e++){const c=o[e];let t,r,n;if(c.parent&&!u.has(c))if(s[c.name]&&"li"===c.parent.name){let e=c.next;for(;e&&s[e.name];)e.name="li",u.add(e),c.parent.insert(e,c.parent),e=e.next;c.unwrap()}else{var f=[c];for(t=c.parent;t&&!a.isValidChild(t.name,c.name)&&m(t);t=t.parent)f.push(t);if(t&&1<f.length)if(a.isValidChild(t.name,c.name)){f.reverse(),i(r=f[0].clone());let e=r;for(let t=0;t<f.length-1;t++){a.isValidChild(e.name,f[t].name)&&0<t?(i(n=f[t].clone()),e.append(n)):n=e;for(let e=f[t].firstChild;e&&e!==f[t+1];){const a=e.next;n.append(e),e=a}e=n}Bh(a,l,d,r)?t.insert(c,f[0],!0):(t.insert(r,f[0],!0),t.insert(c,r)),t=f[0],(Bh(a,l,d,t)||Th(t,"br"))&&t.empty().remove()}else Ph(c,a);else if(c.parent)if("li"===c.name){let e=c.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(c);continue}if((e=c.next)&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(c,e.firstChild,!0);continue}const a=new xg("ul",1);i(a),c.wrap(a)}else if(a.isValidChild(c.parent.name,"div")&&a.isValidChild("div",c.name)){const o=new xg("div",1);i(o),c.wrap(o)}else Ph(c,a)}}},Mh=(e,t,r=t.parent)=>!(!r||!e.children[t.name]||e.isValidChild(r.name,t.name))||!(!r||"a"!==t.name||!(()=>{let e=r;for(;e;){if("a"===e.name)return!0;e=e.parent}return!1})()),Ih=e=>{if(e.collapsed)return e;{var a=e;const i=z.fromRangeStart(a),s=z.fromRangeEnd(a),l=a.commonAncestorContainer;return iu(!1,l,s).map(e=>{return!Pc(i,s,l)&&Pc(i,e,l)?(t=i.container(),r=i.offset(),n=e.container(),e=e.offset(),(o=document.createRange()).setStart(t,r),o.setEnd(n,e),o):a;var t,r,n,o}).getOr(a)}},Fh=(e,t)=>{t=e.getParent(t,e.isBlock);return t&&"LI"===t.nodeName?t:null},Uh=(e,t)=>{e=z.after(e),t=ru(t).prev(e);return t?t.toRange():null},zh=(e,n,o,t)=>{c=n,e=e.serialize(t),c=c.createFragment(e),e=c.firstChild,t=c.lastChild,e&&"META"===e.nodeName&&null!=(s=e.parentNode)&&s.removeChild(e),t&&"mce_marker"===t.id&&null!=(s=t.parentNode)&&s.removeChild(t);const r=c,a=Fh(n,o.startContainer),i=(e=r.firstChild,0<(t=L(null!=(s=null==e?void 0:e.childNodes)?s:[],e=>"LI"===e.nodeName)).length&&(!(c=t[t.length-1]).firstChild||H(null==(c=c)?void 0:c.firstChild)&&c.firstChild===c.lastChild&&((c=c.firstChild).data===Co||_(c)))?t.slice(0,-1):t);var s,l,d,e=n.getRoot(),c=e=>{var t=z.fromRangeStart(o),r=ru(n.getRoot()),e=1===e?r.prev(t):r.next(t),r=null==e?void 0:e.getNode();return!r||Fh(n,r)!==a};{if(a){if(c(1)){var u=a,t=i,m=e;const g=u.parentNode;return g&&J.each(t,e=>{g.insertBefore(e,u)}),t=u,t=z.before(t),(m=ru(m).next(t))?m.toRange():null}if(c(2))return t=a,m=i,c=e,n.insertAfter(m.reverse(),t),Uh(m[0],c);{var f=a;t=i,c=e,e=f,d=(l=o).cloneRange(),l=l.cloneRange(),d.setStartBefore(e),l.setEndAfter(e);const p=[d.cloneContents(),l.cloneContents()],h=f.parentNode;return h&&(h.insertBefore(p[0],f),J.each(t,e=>{h.insertBefore(e,f)}),h.insertBefore(p[1],f),h.removeChild(f)),Uh(t[t.length-1],c)}}return null}},jh=["pre"],Hh=fo,Vh=(n,o,r)=>{var a,t,e,i,s,l;const d=n.selection,c=n.dom,u=n.parser,m=r.merge,f=Og({validate:!0},n.schema),g='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,g);let p=d.getRng();const h=p.startContainer,v=n.getBody(),b=(h===v&&d.isCollapsed()&&c.isBlock(v.firstChild)&&(e=n,i=v.firstChild,H(i))&&!e.schema.getVoidElements()[i.nodeName]&&c.isEmpty(v.firstChild)&&((p=c.createRng()).setStart(v.firstChild,0),p.setEnd(v.firstChild,0),d.setRng(p)),d.isCollapsed()||(i=(e=n).dom,a=Ih(e.selection.getRng()),e.selection.setRng(a),t=i.getParent(a.startContainer,Hh),i=i,l=a,s=t,!!H(s)&&s===i.getParent(l.endContainer,Hh)&&qu(ee(s),l)?ph(e,a,ee(t)):a.startContainer===a.endContainer&&a.endOffset-a.startOffset==1&&oe(a.startContainer.childNodes[a.startOffset])?a.deleteContents():e.getDoc().execCommand("Delete",!1)),d.getNode()),y={context:b.nodeName.toLowerCase(),data:r.data,insert:!0},C=u.parse(o,y);if(!0===r.paste&&((e,t)=>{let r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),t=e,e=n,o=t.getNonEmptyElements(),H(e)&&(e.isEmpty(o)||(o=e,t.getBlockElements()[o.name]&&(e=o,H(e.firstChild))&&e.firstChild===e.lastChild&&("br"===(e=o.firstChild).name||e.value===Co)))&&(n=null==n?void 0:n.prev),!(!r||r!==n||"ul"!==r.name&&"ol"!==r.name);var o})(n.schema,C)&&(s=c,l=b,!!Fh(s,l)))(p=zh(f,c,d.getRng(),C))&&d.setRng(p);else{!0===r.paste&&((e,t,r,n)=>{const o=t.firstChild,a=t.lastChild,i=o===("bookmark"===a.attr("data-mce-type")?a.prev:a),s=K(jh,o.name);if(i&&s){const t="false"!==o.attr("contenteditable"),a=(null==(e=e.getParent(r,e.isBlock))?void 0:e.nodeName.toLowerCase())===o.name,i=W.from(kh(n,r)).forall(mo);return t&&a&&i}return!1})(c,C,b,n.getBody())&&null!=(t=C.firstChild)&&t.unwrap();{let e=C;for(;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}let e=C.lastChild;if(e&&"mce_marker"===e.attr("id")){const o=e;for(e=e.prev;e;e=e.walk(!0))if(3===e.type||!c.isBlock(e.name)){e.parent&&n.schema.isValidChild(e.parent.name,"span")&&e.parent.insert(o,e,"br"===e.name);break}}if(n._selectionOverrides.showBlockCaretContainer(b),y.invalid){n.selection.setContent(g);let e,t=d.getNode();const m=n.getBody();for(lo(t)?t=e=m:e=t;e&&e!==m;)e=(t=e).parentNode;o=t===m?m.innerHTML:c.getOuterHTML(t);const p=u.parse(o),h=(()=>{for(let e=p;e;e=e.walk())if("mce_marker"===e.attr("id"))return W.some(e);return W.none()})(),v=h.bind(Dh).getOr(p),b=(h.each(e=>e.replace(C)),C.children()),y=null!=(a=C.parent)?a:p,r=(C.unwrap(),L(b,e=>Mh(n.schema,e,y)));Lh(r,n.schema,v),Ah(u.getNodeFilters(),u.getAttributeFilters(),p),o=f.serialize(p),t===m?c.setHTML(m,o):c.setOuterHTML(t,o)}else{o=f.serialize(C);{var r=n;var w=o;var x=b;if("all"===x.getAttribute("data-mce-bogus"))null!=(k=x.parentNode)&&k.insertBefore(r.dom.createFragment(w),x);else{const k=x.firstChild,A=x.lastChild;!k||k===A&&"BR"===k.nodeName?r.dom.setHTML(x,w):r.selection.setContent(w,{no_events:!0})}}}{var k=n;var E=m;const O=k.schema.getTextInlineElements(),T=k.dom;if(E){const E=k.getBody(),B=_h(k);J.each(T.select("*[data-mce-fragment]"),t=>{if(H(O[t.nodeName.toLowerCase()])&&(e=T,r=t,Ee(Dg(e,r),e=>{return e=e,!Tg.has(e)})))for(let e=t.parentElement;H(e)&&e!==E&&!((r,n,o)=>{const e=Dg(r,n),a=Dg(r,o),i=e=>{var t=null!=(t=r.getStyle(n,e))?t:"",e=null!=(e=r.getStyle(o,e))?e:"";return ft(t)&&ft(e)&&t!==e};return G(e,t=>{var e=e=>G(e,e=>e===t);if(e(a)||!e(Bg))return i(t);{const t=L(a,t=>G(Bg,e=>st(t,e)));return G(t,i)}})})(T,t,e);e=e.parentElement)if(B.compare(e,t)){T.remove(t,!0);break}var e,r})}}{var S=n;var _=c.get("mce_marker");let t;x=S.dom,r=S.selection;if(_){r.scrollIntoView(_);w=kh(S.getBody(),_);if(w&&"false"===x.getContentEditable(w))x.remove(_),r.select(w);else{let e=x.createRng();w=_.previousSibling;if(oe(w)){e.setStart(w,null!=(E=null==(E=w.nodeValue)?void 0:E.length)?E:0);const S=_.nextSibling;oe(S)&&(w.appendData(S.data),null!=(E=S.parentNode))&&E.removeChild(S)}else e.setStartBefore(_),e.setEndBefore(_);w=x.getParent(_,x.isBlock);if(x.remove(_),w&&x.isEmpty(w)){const _=Hh(w);An(ee(w)),e.setStart(w,0),e.setEnd(w,0),_||w.getAttribute("data-mce-fragment")||!(t=(e=>{e=z.fromRangeStart(e);return null==(e=ru(S.getBody()).next(e))?void 0:e.toRange()})(e))?x.add(w,x.create("br",_?{}:{"data-mce-bogus":"1"})):(e=t,x.remove(w))}r.setRng(e)}}}E=n.getBody(),J.each(E.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),_=c,r=d.getStart(),W.from(_.getParent(r,"td,th")).map(ee).each(zo);var N=n.schema,R=n.getBody(),E=d.getStart();E=Fr(ee(E),e=>F(e,ee(R))),Ae(E,E.length-2).filter(nr).fold(()=>_a(N,R),e=>_a(N,e.dom))}return o},qh=e=>e instanceof xg,$h=(e,t,r)=>{var n;e.dom.setHTML(e.getBody(),t),!0!==r&&(n=e,sg(n))&&mu(n.getBody()).each(e=>{var t=e.getNode(),t=ro(t)?mu(t).getOr(e):e;n.selection.setRng(t.toRange())})},Wh=(e,t)=>{return n=t,((t=(r=e).dom).parentNode?(t=ee(t.parentNode),Ce(t.dom.childNodes,e=>{return e=ee(e),!F(r,e)&&n(e)}).map(ee)):W.none()).isSome();var r,n},Kh=e=>V(e)?e:P,Gh=(a,i,e)=>{const t=i(a),s=Kh(e);return t.orThunk(()=>{if(s(a))return W.none();{var t=a,r=i,n=s;let e=t.dom;for(var o=Kh(n);e.parentNode;){e=e.parentNode;const t=ee(e),n=r(t);if(n.isSome())return n;if(o(t))break}return W.none()}})},Yh=am,Xh=(t,r,e)=>{var n=t.formatter.get(e);if(n)for(let e=0;e<n.length;e++){var o=n[e];if(mm(o)&&!1===o.inherit&&t.dom.is(r,o.selector))return!0}return!1},Qh=(t,e,r,n,o)=>{const a=t.dom.getRoot();return e!==a&&(e=t.dom.getParent(e,e=>!!Xh(t,e,r)||e.parentNode===a||!!ev(t,e,r,n,!0)),!!ev(t,e,r,n,o))},Jh=(e,t,r)=>!(!fm(r)||!Yh(t,r.inline))||!(!um(r)||!Yh(t,r.block))||!!mm(r)&&ne(t)&&e.is(t,r.selector),Zh=(t,r,e,n,o,a)=>{var i=e[n],s="attributes"===n;if(V(e.onmatch))return e.onmatch(r,e,n);if(i)if($e(i)){for(let e=0;e<i.length;e++)if(s?t.getAttrib(r,i[e]):sm(t,r,i[e]))return!0}else for(const n in i)if(Q(i,n)){var l=s?t.getAttrib(r,n):sm(t,r,n),d=om(i[n],a),c=de(l)||gt(l);if(c&&de(d))continue;if(o&&c&&!e.exact)return!1;if((!o||e.exact)&&!Yh(l,im(d,n)))return!1}return!0},ev=(t,r,n,o,a)=>{var i=t.formatter.get(n),s=t.dom;if(i&&ne(r))for(let e=0;e<i.length;e++){var l=i[e];if(Jh(t.dom,r,l)&&Zh(s,r,l,"attributes",a,o)&&Zh(s,r,l,"styles",a,o)){const n=l.classes;if(n)for(let e=0;e<n.length;e++)if(!t.dom.hasClass(r,om(n[e],o)))return;return l}}},tv=(e,t,r,n,o)=>{var a;return n?Qh(e,n,t,r,o):(n=e.selection.getNode(),!!Qh(e,n,t,r,o)||!((a=e.selection.getStart())===n||!Qh(e,a,t,r,o)))},rv=jo,nv=r=>0<(()=>{var e=[];let t=r;for(;t;){if(oe(t)&&t.data!==rv||1<t.childNodes.length)return[];ne(t)&&e.push(t),t=t.firstChild}return e})().length,ov=e=>{if(e){var t=new Gn(e,e);for(let e=t.current();e;e=t.next())if(oe(e))return e}return null},av=e=>{var t=Nr("span");return cr(t,{id:gu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&te(t,Rr(rv)),t},iv=(e,t,r=!0)=>{var n=e.dom,o=e.selection;if(nv(t))Mp(e,!1,ee(t),r);else{const e=o.getRng(),r=n.getParent(t,n.isBlock),a=e.startContainer,i=e.startOffset,s=e.endContainer,l=e.endOffset,d=(e=>{e=ov(e);return e&&e.data.charAt(0)===rv&&e.deleteData(0,1),e})(t);n.remove(t,!0),a===d&&0<i&&e.setStart(d,i-1),s===d&&0<l&&e.setEnd(d,l-1),r&&n.isEmpty(r)&&Uo(ee(r)),o.setRng(e)}},sv=(e,t,r=!0)=>{var n=e.dom,o=e.selection;if(t)iv(e,t,r);else if(!(t=hu(e.getBody(),o.getStart())))for(;t=n.get(gu);)iv(e,t,r)},lv=(e,t)=>(e.appendChild(t),t),dv=(e,t)=>{e=ve(e,(e,t)=>lv(e,t.cloneNode(!1)),t),t=null!=(t=e.ownerDocument)?t:document;return lv(e,t.createTextNode(rv))},cv=(r,n,o,a)=>{var i=r.dom,s=r.selection;let l=!1;const d=r.formatter.get(n);if(d){const v=s.getRng(),b=v.startContainer,y=v.startOffset;let e=b;oe(b)&&(y!==b.data.length&&(l=!0),e=e.parentNode);var c,u,m,f,g,p=[];let t;for(;e;){if(ev(r,e,n,o,a)){t=e;break}e.nextSibling&&(l=!0),p.push(e),e=e.parentNode}if(t)if(l){const w=s.getBookmark();v.collapse(!0);var h=Am(i,v,d,!0),h=yf(h);r.formatter.remove(n,o,h,a),s.moveToBookmark(w)}else{const l=hu(r.getBody(),t),d=av(!1).dom,v=(h=r,c=d,u=null!=l?l:t,g=h.dom,(h=g.getParent(u,D(em,h.schema)))&&g.isEmpty(h)?null!=(h=u.parentNode)&&h.replaceChild(c,u):(m=ee(u),h=Wn(m,"br"),f=L((()=>{var e=[];let t=m.dom;for(;t;)e.push(ee(t)),t=t.lastChild;return e})().slice(-1),Ao),h.length===f.length&&Y(f,re),g.isEmpty(u)?null!=(h=u.parentNode)&&h.replaceChild(c,u):g.insertAfter(c,u)),((a,e,t,i,r,n)=>{var o,s,l=a.formatter,d=a.dom,c=L(Pe(l.get()),e=>e!==i&&!it(e,"removeformat")),c=(o=a,s=t,c=c,be(c,(e,t)=>{n=o,r=t;var r,n=cm(n,r,t=>{const r=e=>V(e)||1<e.length&&"%"===e.charAt(0);return G(["styles","attributes"],e=>M(t,e).exists(e=>{e=le(e)?e:He(e);return G(e,r)}))});return o.formatter.matchNode(s,t,{},n)?e.concat([t]):e},[]));if(0<L(c,e=>{{var t=a,n=i;const r=["inline","block","selector","attributes","styles","classes"],o=e=>ze(e,(e,t)=>G(r,e=>e===t));return!cm(t,e,e=>{const r=o(e);return cm(t,n,e=>{var t,e=o(e);return t=r,w(x).eq(t,e)})})}}).length){const a=t.cloneNode(!1);return d.add(e,a),l.remove(i,r,a,n),d.remove(a),W.some(a)}return W.none()})(r,d,t,n,o,a)),b=dv(p.concat(v.toArray()),d);l&&iv(r,l,!1),s.setCursorLocation(b,1),i.isEmpty(t)&&i.remove(t)}}},uv=e=>{var t=av(!1),e=dv(e,t.dom);return{caretContainer:t,caretPosition:z(e,0)}},mv=(e,t)=>{var{caretContainer:t,caretPosition:r}=uv(t);return En(ee(e),t),re(ee(e)),r},fv=(e,t)=>{e=e.schema.getTextInlineElements();return Q(e,Z(t))&&!pu(t.dom)&&!to(t.dom)},gv=e=>pu(e.dom)&&nv(e.dom),pv={},hv=Jn(["pre"]),vv=(pv.pre||(pv.pre=[]),pv.pre.push(e=>{var t;e.selection.getRng().collapsed||(e=e.selection.getSelectedBlocks(),e=L(L(e,hv),(t=e,e=>{e=e.previousSibling;return hv(e)&&K(t,e)})),Y(e,e=>{var t,r;t=e.previousSibling,e=e,e=ee(e),r=Pr(e).dom,re(e),Rn(ee(t),[Nr("br",r),Nr("br",r),...Vr(e)])}))}),["fontWeight","fontStyle","color","fontSize","fontFamily"]),bv=(e,t)=>{e=e.get(t);return le(e)?Ce(e,e=>{return fm(e)&&"span"===e.inline&&(e=e,se(e.styles))&&G(Pe(e.styles),e=>K(vv,e))}):W.none()},yv=(e,t)=>uu(t,z.fromRangeStart(e)).isNone(),Cv=(e,t)=>!1===cu(t,z.fromRangeEnd(e)).exists(e=>!_(e.getNode())||cu(t,e).isSome()),wv=t=>e=>ho(e)&&t.isEditable(e),xv=e=>L(e.getSelectedBlocks(),wv(e.dom)),kv=J.each,Ev=e=>ne(e)&&!Nu(e)&&!pu(e)&&!to(e),Sv=(t,r)=>{for(let e=t;e;e=e[r]){if(oe(e)&&ft(e.data))return t;if(ne(e)&&!Nu(e))return e}return t},_v=(e,t,r)=>{const n=_h(e),o=ne(t)&&Qu(t),a=ne(r)&&Qu(r);if(o&&a){const o=Sv(t,"previousSibling"),a=Sv(r,"nextSibling");if(n.compare(o,a)){for(let e=o.nextSibling;e&&e!==a;){const t=e;e=e.nextSibling,o.appendChild(t)}return e.dom.remove(a),J.each(J.grep(a.childNodes),e=>{o.appendChild(e)}),o}}return r},Nv=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){const t=null!=(o=_v(e,Zu(n),n))?o:n;_v(e,t,Zu(t,!0))}},Rv=(e,t,r)=>{kv(e.childNodes,e=>{Ev(e)&&(t(e)&&r(e),e.hasChildNodes())&&Rv(e,t,r)})},Av=(t,r)=>e=>!(!e||!sm(t,e,r)),Ov=(r,n,o)=>e=>{var t;r.setStyle(e,n,o),""===e.getAttribute("style")&&e.removeAttribute("style"),t=r,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},Tv=nl([{keep:[]},{rename:["name"]},{removed:[]}]),Bv=/^(src|href|style)$/,Dv=J.each,Pv=am,Lv=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),Mv=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(ne(n)){const e=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>e?e:o]}return oe(n)&&r&&o>=n.data.length&&(n=new Gn(n,e.getBody()).next()||n),n=oe(n)&&!r&&0===o?new Gn(n,e.getBody()).prev()||n:n},Iv=(e,t)=>{var t=t?"firstChild":"lastChild",r=e[t];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[t]||r:e},Fv=(e,t,r,n)=>{e=e.create(r,n);return null!=(r=t.parentNode)&&r.insertBefore(e,t),e.appendChild(t),e},Uv=(e,t,r,n,o)=>{t=ee(t),e=ee(e.create(n,o)),n=(r?Hr:jr)(t);return Rn(e,n),(r?(En(t,e),_n):(Sn(t,e),te))(e,t),e.dom},zv=(t,e,r)=>{var n=e.parentNode;let o;const a=t.dom,i=kl(t);!um(r)||n!==a.getRoot()||r.list_block&&Pv(e,r.list_block)||Y(Be(e.childNodes),e=>{tm(t,i,e.nodeName.toLowerCase())?o?o.appendChild(e):(o=Fv(a,e,i),a.setAttribs(o,El(t))):o=null}),n=r,mm(n)&&fm(n)&&Wt(M(n,"mixed"),!0)&&!Pv(r.inline,e)||a.remove(e,!0)},jv=(e,t,r)=>N(e)?{name:t,value:null}:{name:e,value:om(t,r)},Hv=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Vv=(n,o,a,i,s)=>{let l=!1;Dv(a.styles,(e,t)=>{var{name:t,value:e}=jv(t,e,i),r=im(e,t);(a.remove_similar||T(e)||!ne(s)||Pv(sm(n,s,t),r))&&n.setStyle(o,t,""),l=!0}),l&&Hv(n,o)},qv=(t,n,o,e,a)=>{const i=t.dom,r=_h(t),s=t.schema;if(fm(n)&&Ra(s,n.inline)&&Oa(s,e)&&e.parentElement===t.getBody())return zv(t,e,n),Tv.removed();if(!n.ceFalseOverride&&e&&"false"===i.getContentEditableParent(e))return Tv.keep();if(e&&!Jh(i,e,n)&&(!n.links||"A"!==e.nodeName))return Tv.keep();const l=e,d=n.preserve_attributes;if(fm(n)&&"all"===n.remove&&le(d)){const t=L(i.getAttribs(l),e=>K(d,e.name.toLowerCase()));if(i.removeAllAttribs(l),Y(t,e=>i.setAttrib(l,e.name,e.value)),0<t.length)return Tv.rename("span")}if("all"!==n.remove){Vv(i,l,n,o,a),Dv(n.attributes,(e,r)=>{var{name:r,value:e}=jv(r,e,o);if(n.remove_similar||T(e)||!ne(a)||Pv(i.getAttrib(a,r),e)){if("class"===r){const e=i.getAttrib(l,r);if(e){let t="";if(Y(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void i.setAttrib(l,r,t)}}(Bv.test(r)&&l.removeAttribute("data-mce-"+r),"style"===r&&Jn(["li"])(l)&&"none"===i.getStyle(l,"list-style-type"))?(l.removeAttribute(r),i.setStyle(l,"list-style-type","none")):("class"===r&&l.removeAttribute("className"),l.removeAttribute(r))}}),Dv(n.classes,e=>{e=om(e,o),ne(a)&&!i.hasClass(a,e)||i.removeClass(l,e)});const t=i.getAttribs(l);for(let e=0;e<t.length;e++){const o=t[e].nodeName;if(!r.isAttributeInternal(o))return Tv.keep()}}return"none"!==n.remove?(zv(t,l,n),Tv.removed()):Tv.keep()},$v=(e,t,r,n,o)=>{if(n||e.selection.isEditable()){var a,i,u=e,m=t,f=r,e=n,g=o;const p=u.formatter.get(m),h=p[0],s=u.dom,l=u.selection,d=e=>{var t=((r,e,n,o,a)=>{let i;return e.parentNode&&Y(dm(r.dom,e.parentNode).reverse(),e=>{var t;!i&&ne(e)&&"_start"!==e.id&&"_end"!==e.id&&(t=ev(r,e,n,o,a))&&!1!==t.split&&(i=e)}),i})(u,e,m,f,g);{var o=u,a=p,i=e,s=h,l=f;let r,n;var d=o.dom;if(t){const c=t.parentNode;for(let e=i.parentNode;e&&e!==c;e=e.parentNode){let t=d.clone(e,!1);for(let e=0;e<a.length&&null!==(t=((t,e,r,n)=>qv(t,e,r,n,n).fold($(n),e=>(t.dom.createFragment().appendChild(n),t.dom.rename(n,e)),$(null)))(o,a[e],l,t));e++);t&&(r&&t.appendChild(r),n=n||t,r=t)}s.mixed&&d.isBlock(t)||(i=null!=(t=d.split(t,i))?t:i),r&&n&&(null!=(t=e.parentNode)&&t.insertBefore(r,e),n.appendChild(e),fm(s))&&Nv(o,s,0,r)}return i}},c=t=>G(p,e=>Wv(u,e,f,t,t)),v=t=>{var r=Be(t.childNodes),e=c(t)||G(p,e=>Jh(s,t,e)),n=t.parentNode;if(!e&&H(n)&&gm(h)&&c(n),h.deep&&r.length)for(let e=0;e<r.length;e++)v(r[e]);Y(["underline","line-through","overline"],e=>{ne(t)&&u.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&lm(s,t.parentNode)===e&&Wv(u,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},void 0,t)})},b=t=>{var r,n=s.get(t?"_start":"_end");if(n){let e=n[t?"firstChild":"lastChild"];return r=e,Nu(r)&&ne(r)&&("_start"===r.id||"_end"===r.id)&&(e=e[t?"firstChild":"lastChild"]),oe(e)&&0===e.data.length&&(e=t?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),s.remove(n,!0),e}return null},y=e=>{let t,r,n=Am(s,e,p,e.collapsed);if(h.split){if(n=yf(n),t=Mv(u,n,!0),r=Mv(u,n),t!==r){if(t=Iv(t,!0),r=Iv(r,!1),Lv(s,t,r)){const u=W.from(t.firstChild).getOr(t);return d(Uv(s,u,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(Lv(s,r,t)){const u=W.from(r.lastChild).getOr(r);return d(Uv(s,u,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}t=Fv(s,t,"span",{id:"_start","data-mce-type":"bookmark"}),r=Fv(s,r,"span",{id:"_end","data-mce-type":"bookmark"});const u=s.createRng();u.setStartAfter(t),u.setEndBefore(r),Om(s,u,e=>{Y(e,e=>{Nu(e)||Nu(e.parentNode)||d(e)})}),d(t),d(r),t=b(!0),r=b()}else t=r=d(t);n.startContainer=t.parentNode||t,n.startOffset=s.nodeIndex(t),n.endContainer=r.parentNode||r,n.endOffset=s.nodeIndex(r)+1}Om(s,n,e=>{Y(e,v)})};if(e)if(Yu(e)){const u=s.createRng();u.setStartBefore(e),u.setEndAfter(e),y(u)}else y(e);else l.isCollapsed()&&fm(h)&&!zu(u).length?cv(u,m,f,g):(Ju(u,()=>Ku(u,y),e=>fm(h)&&tv(u,m,f,e)),u.nodeChanged()),a=u,i=f,"removeformat"===(t=m)?Y(xv(a.selection),t=>{Y(vv,e=>a.dom.setStyle(t,e,"")),Hv(a.dom,t)}):bv(a.formatter,t).each(t=>{Y(xv(a.selection),e=>Vv(a.dom,e,t,i,null))});zm(u,m,e,f)}},Wv=(t,e,r,n,o)=>qv(t,e,r,n,o).fold(P,e=>(t.dom.rename(n,e),!0),ce),Kv=J.each,Gv=J.each,Yv=(r,n,e,o)=>{if(Gv(e.styles,(e,t)=>{r.setStyle(n,t,om(e,o))}),e.styles){const e=r.getAttrib(n,"style");e&&r.setAttrib(n,"data-mce-style",e)}},Xv=(y,C,w,t)=>{const x=y.formatter.get(C),k=x[0],n=!t&&y.selection.isCollapsed(),o=y.dom,e=y.selection,E=(r,e=k)=>{V(e.onformat)&&e.onformat(r,e,w,t),Yv(o,r,e,w),Gv(e.attributes,(e,t)=>{o.setAttrib(r,t,om(e,w))}),Gv(e.classes,e=>{e=om(e,w);o.hasClass(r,e)||o.addClass(r,e)})},S=(e,t)=>{let r=!1;return Gv(e,e=>!(!mm(e)||("false"!==o.getContentEditable(t)||e.ceFalseOverride)&&(!H(e.collapsed)||e.collapsed===n)&&o.is(t,e.selector)&&!pu(t)&&(E(t,e),r=!0))),r},r=(v,e,f)=>{const b=[];let g=!0;const p=k.inline||k.block,h=(t=p,j(t)?(t=o.create(t),E(t),t):null);var t;Om(v,e,e=>{let u;const m=t=>{let e=!1,r=g,n=!1;var o,a,i,s,l=t.parentNode,d=l.nodeName.toLowerCase(),c=v.getContentEditable(t),c=(H(c)&&(r=g,g="true"===c,e=!0,n=nm(y,t)),g&&!e);if(_(t)&&!((e,t,r,n)=>{if(ld(e)&&fm(t)&&r.parentNode){const t=di(e.schema),o=Wh(ee(r),e=>pu(e.dom));return Ve(t,n)&&U(ee(r.parentNode),!1)&&!o}return!1})(y,k,t,d))u=null,um(k)&&v.remove(t);else if(i=t,s=k,um(s)&&!0===s.wrapper&&ev(y,i,C,w))u=null;else if(s=t,i=d,o=c,a=k,a=um(a)&&!0!==a.wrapper&&em(y.schema,s)&&tm(y,i,p),o&&a){const y=v.rename(t,p);E(y),b.push(y),void(u=null)}else{if(mm(k)){let e=S(x,t);if(!e&&H(l)&&gm(k)&&(e=S(x,l)),!fm(k)||e)return void(u=null)}H(h)&&(s=t,i=d,o=c,a=n,d=s.nodeName.toLowerCase(),d=tm(y,p,d)&&tm(y,i,p),i=!f&&oe(s)&&Ho(s.data),c=pu(s),s=!fm(k)||!v.isBlock(s),o||a)&&d&&!i&&!c&&s?(u||(u=v.clone(h,!1),l.insertBefore(u,t),b.push(u)),n&&e&&(g=r),u.appendChild(t)):(u=null,Y(Be(t.childNodes),m),e&&(g=r),u=null)}};Y(e,m)}),!0===k.links&&Y(b,e=>{const t=e=>{"A"===e.nodeName&&E(e,k),Y(Be(e.childNodes),t)};t(e)}),Y(b,e=>{var r,t,n,o,a,i,s,l,d,c,u=(e=>{let r=0;return Y(e.childNodes,e=>{var t;t=e,H(t)&&oe(t)&&0===t.length||Nu(e)||r++}),r})(e);if(!(1<b.length)&&v.isBlock(e)||0!==u){if(fm(k)||um(k)&&k.wrapper){k.exact||1!==u||(c=e,e=Ce(c.childNodes,Xu).filter(e=>"false"!==v.getContentEditable(e)&&Jh(v,e,k)).map(e=>{var t=v.clone(e,!1);return E(t),v.replace(t,c,!0),v.remove(e,!0),t}).getOr(c)),s=y,u=x,l=w,d=e,Kv(u,t=>{var n,e,r,o;fm(t)&&Kv(s.dom.select(t.inline,d),e=>{Ev(e)&&Wv(s,t,l,e,t.exact?e:null)}),n=s.dom,r=d,(e=t).clear_child_styles&&(o=e.links?"*:not(a)":"*",kv(n.select(o,r),r=>{Ev(r)&&Qu(r)&&kv(e.styles,(e,t)=>{n.setStyle(r,t,"")})}))}),t=y,n=k,o=C,a=w,u=(i=e).parentNode,ev(t,u,o,a)&&Wv(t,n,a,i)||n.merge_with_parents&&u&&t.dom.getParent(u,e=>!!ev(t,e,o,a)&&(Wv(t,n,a,i),!0));var u=v,m=k,f=w,g=e;if(m.styles&&m.styles.backgroundColor){const h=Av(u,"fontSize");Rv(g,e=>h(e)&&Qu(e),Ov(u,"backgroundColor",om(m.styles.backgroundColor,f)))}r=v,g=k,u=e,m=e=>{var t;ne(e)&&ne(e.parentNode)&&Qu(e)&&(t=lm(r,e.parentNode),r.getStyle(e,"color")&&t?r.setStyle(e,"text-decoration",t):r.getStyle(e,"text-decoration")===t&&r.setStyle(e,"text-decoration",null))},g.styles&&(g.styles.color||g.styles.textDecoration)&&(J.walk(u,m,"childNodes"),m(u)),f=v,g=k;var p=0;if(m=e,fm(g)&&("sub"===g.inline||"sup"===g.inline)){const p=Av(f,"fontSize");Rv(m,e=>p(e)&&Qu(e),Ov(f,"fontSize",""));g=L(f.select("sup"===g.inline?"sub":"sup",m),Qu);f.remove(g,!0)}Nv(y,k,0,e)}}else v.remove(e,!0)})},a=Yu(t)?t:e.getNode();var i;if("false"!==o.getContentEditable(a)||nm(y,a)){if(k){if(t)if(Yu(t)){if(!S(x,t)){const y=o.createRng();y.setStartBefore(t),y.setEndAfter(t),r(o,Am(o,y,x),!0)}}else r(o,t,!0);else{if(n&&fm(k)&&!zu(y).length){var s=y;var l=C;var d=w;let r;var c=s.selection,u=s.formatter.get(l);if(u){var m=c.getRng();let t=m.startOffset;var f=m.startContainer.nodeValue,g=(r=hu(s.getBody(),c.getStart()),/[^\s\u00a0\u00ad\u200b\ufeff]/);if(f&&0<t&&t<f.length&&g.test(f.charAt(t))&&g.test(f.charAt(t-1))){const e=c.getBookmark();m.collapse(!0);g=Am(s.dom,m,u),g=yf(g);s.formatter.apply(l,d,g),c.moveToBookmark(e)}else{let e=r?ov(r):null;r&&(null==e?void 0:e.data)===rv||(f=s.getDoc(),u=av(!0).dom,r=f.importNode(u,!0),e=r.firstChild,m.insertNode(r),t=1),s.formatter.apply(l,d,r),c.setCursorLocation(e,t)}}}else e.setRng(Ih(e.getRng())),Ju(y,()=>{Ku(y,(e,t)=>{t=t?e:Am(o,e,x);r(o,t,!1)})},ce),y.nodeChanged();bv(y.formatter,C).each(t=>{var e;Y((e=y.selection,L((e=>{const t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return yv(r,t[0])&&Cv(r,t[0])?t:[];{const e=Oe(t).filter(e=>yv(r,e)).toArray(),n=Te(t).filter(e=>Cv(r,e)).toArray(),o=t.slice(1,-1);return e.concat(o).concat(n)}})(e),wv(e.dom))),e=>Yv(o,e,t,w))})}g=C,i=y,Q(pv,g)&&Y(pv[g],e=>{e(i)})}}else S(x,t=a);Um(y,C,t,w)},Qv=(e,t,r,n)=>{(n||e.selection.isEditable())&&Xv(e,t,r,n)},Jv=e=>Q(e,"vars"),Zv=e=>e.selection.getStart(),eb=(t,e,r,n,o)=>ye(e,e=>{e=t.formatter.matchNode(e,r,null!=o?o:{},n);return!S(e)},e=>!!Xh(t,e,r)||!n&&H(t.formatter.matchNode(e,r,o,!0))),tb=(e,t)=>{t=null!=t?t:Zv(e);return L(dm(e.dom,t),e=>ne(e)&&!to(e))},rb=(o,a,e)=>{const i=tb(o,a);X(e,(e,n)=>{var t=e=>{const t=eb(o,i,n,e.similar,Jv(e)?e.vars:void 0),r=t.isSome();if(e.state.get()!==r){e.state.set(r);const o=t.getOr(a);Jv(e)?e.callback(r,{node:o,format:n,parents:i}):Y(e.callbacks,e=>e(r,{node:o,format:n,parents:i}))}};Y([e.withSimilar,e.withoutSimilar],t),Y(e.withVars,t)})},nb=J.explode,ob=()=>{const o={};return{addFilter:(e,t)=>{Y(nb(e),e=>{Q(o,e)||(o[e]={name:e,callbacks:[]}),o[e].callbacks.push(t)})},getFilters:()=>He(o),removeFilter:(e,n)=>{Y(nb(e),e=>{var t,r;Q(o,e)&&(H(n)&&(t=o[e],0<(r=L(t.callbacks,e=>e!==n)).length)?t.callbacks=r:delete o[e])})}}},ab=(e,t,r)=>{var n,o,a,i,s,l=mi();t.convert_fonts_to_spans&&(a=e,i=l,s=J.explode(null!=(t=t.font_size_legacy_values)?t:""),a.addNodeFilter("font",e=>{Y(e,e=>{const t=i.parse(e.attr("style")),r=e.attr("color"),n=e.attr("face"),o=e.attr("size");var a;r&&(t.color=r),n&&(t["font-family"]=n),o&&pt(o).each(e=>{t["font-size"]=s[e-1]}),e.name="span",e.attr("style",i.serialize(t)),a=e,Y(["color","face","size"],e=>{a.attr(e,null)})})})),n=r,o=l,e.addNodeFilter("strike",e=>{const r="html4"!==n.type;Y(e,e=>{var t;r?e.name="s":((t=o.parse(e.attr("style")))["text-decoration"]="line-through",e.name="span",e.attr("style",o.serialize(t)))})})},ib=(d,e,c)=>{e.addNodeFilter("br",(n,e,o)=>{const a=J.extend({},c.getBlockElements()),i=c.getNonEmptyElements(),s=c.getWhitespaceElements();a.body=1;var l=e=>e.name in a||Ba(c,e);for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t.parent;if(r&&l(r)&&t===r.lastChild){let e=t.prev;for(;e;){const d=e.name;if("span"!==d||"bookmark"!==e.attr("data-mce-type")){"br"===d&&(t=null);break}e=e.prev}if(t&&(t.remove(),Bh(c,i,s,r))){const n=c.getElementRule(r.name);n&&(n.removeEmpty?r.remove():n.paddEmpty&&Oh(d,o,l,r))}}else{let e=t;for(;r&&r.firstChild===e&&r.lastChild===e&&(e=r,!a[r.name]);)r=r.parent;if(e===r){const d=new xg("#text",3);d.value=Co,t.replace(d)}}}})},sb=e=>{const[t,...r]=e.split(","),n=r.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const e=";base64"===o[2],t=e?(a=/([a-z0-9+\/=\s]+)/i.exec(n))?a[1]:"":decodeURIComponent(n);return W.some({type:o[1],data:t,base64Encoded:e})}var a;return W.none()},lb=(e,t,r=!0)=>{let n=t;if(r)try{n=atob(t)}catch(e){return W.none()}var o=new Uint8Array(n.length);for(let e=0;e<o.length;e++)o[e]=n.charCodeAt(e);return W.some(new Blob([o],{type:e}))},db=n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var e;t(null==(e=r.error)?void 0:e.message)},r.readAsDataURL(n)});let cb=0;const ub=(e,n,o)=>sb(e).bind(({data:e,type:t,base64Encoded:r})=>{if(n&&!r)return W.none();{const n=r?e:btoa(e);return o(n,t)}}),mb=(e,t,r)=>{t=e.create("blobid"+cb++,t,r);return e.add(t),t},fb=(r,e,t=!1)=>ub(e,t,(t,e)=>W.from(r.getByData(t,e)).orThunk(()=>lb(e,t).map(e=>mb(r,e,t)))),gb=(e,r)=>{var t=e.schema;r.remove_trailing_brs&&ib(r,e,t),e.addAttributeFilter("href",e=>{let t=e.length;if(!r.allow_unsafe_link_target)for(;t--;){const r=e[t];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",(e=>{e=e?J.trim(e):"";return/\b(noopener)\b/g.test(e)?e:e.split(" ").filter(e=>0<e.length).concat(["noopener"]).sort().join(" ")})(r.attr("rel")))}}),r.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t,r,n,o,a=e.length;for(;a--;)if("a"===(o=e[a]).name&&o.firstChild&&!o.attr("href"))for(n=o.parent,t=o.lastChild;t&&n;)r=t.prev,n.insert(t,o),t=r}),r.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,r,n=e.length;for(;n--;)if((r=(t=e[n]).parent)&&("ul"===r.name||"ol"===r.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new xg("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}});const s=t.getValidClasses();r.validate&&s&&e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var o=e[t],a=null!=(a=o.attr("class"))?a:"",i=J.explode(a," ");let n="";for(let r=0;r<i.length;r++){const a=i[r];let e=!1,t=s["*"];t&&t[a]&&(e=!0),t=s[o.name],(e=!e&&t&&t[a]?!0:e)&&(n&&(n+=" "),n+=a)}n.length||(n=null),o.attr("class",n)}});{var n=r;const o=n["blob_cache"];if(o){const n=t=>{var e,r=t.attr("src");(e=t).attr("src")===I.transparentSrc||H(e.attr("data-mce-placeholder"))||(e=t,H(e.attr("data-mce-bogus")))||de(r)||fb(o,r,!0).each(e=>{t.attr("src",e.blobUri())})};e.addAttributeFilter("src",e=>Y(e,n))}}};function pb(e){return(pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hb(e,t){return(hb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vb(e,t,r){return(vb=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){}}}()?Reflect.construct:function(e,t,r){var n=[null],t=(n.push.apply(n,t),new(Function.bind.apply(e,n)));return r&&hb(t,r.prototype),t}).apply(null,arguments)}function bb(e){return function(e){if(Array.isArray(e))return yb(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?yb(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?yb(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cb(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Tb(wb,t)}var wb,xb=Object.hasOwnProperty,kb=Object.setPrototypeOf,Eb=Object.isFrozen,Sb=Object.getPrototypeOf,_b=Object.getOwnPropertyDescriptor,Nb=Object.freeze,t=Object.seal,Rb=Object.create,Ab="undefined"!=typeof Reflect&&Reflect,Ob=(Ob=Ab.apply)||function(e,t,r){return e.apply(t,r)},Nb=Nb||function(e){return e},t=t||function(e){return e},Tb=(Tb=Ab.construct)||function(e,t){return vb(e,bb(t))},Bb=jb(Array.prototype.forEach),Db=jb(Array.prototype.pop),Pb=jb(Array.prototype.push),Lb=jb(String.prototype.toLowerCase),Mb=jb(String.prototype.match),Ib=jb(String.prototype.replace),Fb=jb(String.prototype.indexOf),Ub=jb(String.prototype.trim),zb=jb(RegExp.prototype.test);wb=TypeError;function jb(o){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Ob(o,e,r)}}function Le(e,t){kb&&kb(e,null);for(var r=t.length;r--;){var n,o=t[r];"string"==typeof o&&(n=Lb(o))!==o&&(Eb(t)||(t[r]=n),o=n),e[o]=!0}return e}function Hb(e){var t,r=Rb(null);for(t in e)Ob(xb,e,[t])&&(r[t]=e[t]);return r}function Vb(e,t){for(;null!==e;){var r=_b(e,t);if(r){if(r.get)return jb(r.get);if("function"==typeof r.value)return jb(r.value)}e=Sb(e)}return function(e){return console.warn("fallback value for",e),null}}var qb,$b,Wb,Kb=Nb(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Gb=Nb(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Yb=Nb(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Xb=Nb(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qb=Nb(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Jb=Nb(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zb=Nb(["#text"]),e0=Nb(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),t0=Nb(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),r0=Nb(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),n0=Nb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),o0=t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),a0=t(/<%[\w\W]*|[\w\W]*%>/gm),i0=t(/^data-[\-\w.\u00B7-\uFFFF]/),s0=t(/^aria-[\-\w]+$/),l0=t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),d0=t(/^(?:\w+script|data):/i),c0=t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),u0=t(/^html$/i),m0=function L(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,d=function(e){return L(e)};if(d.version="2.3.8",d.removed=[],s&&s.document&&9===s.document.nodeType){var l=s.document,o=s.document,M=s.DocumentFragment,e=s.HTMLTemplateElement,c=s.Node,I=s.Element,t=s.NodeFilter,r=s.NamedNodeMap,F=void 0===r?s.NamedNodeMap||s.MozNamedAttrMap:r,U=s.HTMLFormElement,z=s.DOMParser,r=s.trustedTypes,n=I.prototype,j=Vb(n,"cloneNode"),H=Vb(n,"nextSibling"),V=Vb(n,"childNodes"),u=Vb(n,"parentNode"),m=("function"==typeof e&&(n=o.createElement("template")).content&&n.content.ownerDocument&&(o=n.content.ownerDocument),function(e,t){if("object"!==pb(e)||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix",t="dompurify"+((r=t.currentScript&&t.currentScript.hasAttribute(n)?t.currentScript.getAttribute(n):r)?"#"+r:"");try{return e.createPolicy(t,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(r,l)),q=m?m.createHTML(""):"",e=o,a=e.implementation,$=e.createNodeIterator,W=e.createDocumentFragment,K=e.getElementsByTagName,G=l.importNode,n={};try{n=Hb(o).documentMode?o.documentMode:{}}catch(L){}var i={};d.isSupported="function"==typeof u&&a&&void 0!==a.createHTMLDocument&&9!==n;var f,g,Y,X=o0,Q=a0,J=i0,Z=s0,ee=d0,te=c0,re=l0,p=null,ne=Le({},[].concat(bb(Kb),bb(Gb),bb(Yb),bb(Qb),bb(Zb))),h=null,oe=Le({},[].concat(bb(e0),bb(t0),bb(r0),bb(n0))),v=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),b=null,ae=null,ie=!0,se=!0,le=!1,y=!1,C=!1,de=!1,ce=!1,w=!1,x=!1,k=!1,ue=!0,me=!0,E=!1,S={},_=null,fe=Le({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ge=null,pe=Le({},["audio","video","img","source","image","track"]),he=null,ve=Le({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),be="http://www.w3.org/1998/Math/MathML",ye="http://www.w3.org/2000/svg",N="http://www.w3.org/1999/xhtml",R=N,Ce=["application/xhtml+xml","text/html"],A=null,we=o.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},ke=function(e){A&&A===e||(e=Hb(e=e&&"object"===pb(e)?e:{}),p="ALLOWED_TAGS"in e?Le({},e.ALLOWED_TAGS):ne,h="ALLOWED_ATTR"in e?Le({},e.ALLOWED_ATTR):oe,he="ADD_URI_SAFE_ATTR"in e?Le(Hb(ve),e.ADD_URI_SAFE_ATTR):ve,ge="ADD_DATA_URI_TAGS"in e?Le(Hb(pe),e.ADD_DATA_URI_TAGS):pe,_="FORBID_CONTENTS"in e?Le({},e.FORBID_CONTENTS):fe,b="FORBID_TAGS"in e?Le({},e.FORBID_TAGS):{},ae="FORBID_ATTR"in e?Le({},e.FORBID_ATTR):{},S="USE_PROFILES"in e&&e.USE_PROFILES,ie=!1!==e.ALLOW_ARIA_ATTR,se=!1!==e.ALLOW_DATA_ATTR,le=e.ALLOW_UNKNOWN_PROTOCOLS||!1,y=e.SAFE_FOR_TEMPLATES||!1,C=e.WHOLE_DOCUMENT||!1,w=e.RETURN_DOM||!1,x=e.RETURN_DOM_FRAGMENT||!1,k=e.RETURN_TRUSTED_TYPE||!1,ce=e.FORCE_BODY||!1,ue=!1!==e.SANITIZE_DOM,me=!1!==e.KEEP_CONTENT,E=e.IN_PLACE||!1,re=e.ALLOWED_URI_REGEXP||re,R=e.NAMESPACE||N,e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(v.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(v.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(v.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),f=-1===Ce.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,g="application/xhtml+xml"===f?function(e){return e}:Lb,y&&(se=!1),x&&(w=!0),S&&(p=Le({},bb(Zb)),h=[],!0===S.html&&(Le(p,Kb),Le(h,e0)),!0===S.svg&&(Le(p,Gb),Le(h,t0),Le(h,n0)),!0===S.svgFilters&&(Le(p,Yb),Le(h,t0),Le(h,n0)),!0===S.mathMl)&&(Le(p,Qb),Le(h,r0),Le(h,n0)),e.ADD_TAGS&&Le(p=p===ne?Hb(p):p,e.ADD_TAGS),e.ADD_ATTR&&Le(h=h===oe?Hb(h):h,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&Le(he,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&Le(_=_===fe?Hb(_):_,e.FORBID_CONTENTS),me&&(p["#text"]=!0),C&&Le(p,["html","head","body"]),p.table&&(Le(p,["tbody"]),delete b.tbody),Nb&&Nb(e),A=e)},Ee=Le({},["mi","mo","mn","ms","mtext"]),Se=Le({},["foreignobject","desc","title","annotation-xml"]),_e=Le({},["title","style","font","a","script"]),O=Le({},Gb),Ne=(Le(O,Yb),Le(O,Xb),Le({},Qb)),T=(Le(Ne,Jb),function(t){Pb(d.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=q}catch(e){t.remove()}}}),B=function(e,t){try{Pb(d.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Pb(d.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!h[e])if(w||x)try{T(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Re=function(e){ce?e="<remove></remove>"+e:r=(r=Mb(e,/^[\r\n\t ]+/))&&r[0],"application/xhtml+xml"===f&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var t,r,n=m?m.createHTML(e):e;if(R===N)try{t=(new z).parseFromString(n,f)}catch(e){}if(!t||!t.documentElement){t=a.createDocument(R,"template",null);try{t.documentElement.innerHTML=Y?"":n}catch(e){}}n=t.body||t.documentElement;return e&&r&&n.insertBefore(o.createTextNode(r),n.childNodes[0]||null),R===N?K.call(t,C?"html":"body")[0]:C?t.documentElement:n},Ae=function(e){return $.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT,null,!1)},D=function(e){return"object"===pb(c)?e instanceof c:e&&"object"===pb(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},P=function(e,t,r){i[e]&&Bb(i[e],function(e){e.call(d,t,r,A)})},Oe=function(e){if(P("beforeSanitizeElements",e,null),(!((a=e)instanceof U)||"string"==typeof a.nodeName&&"string"==typeof a.textContent&&"function"==typeof a.removeChild&&a.attributes instanceof F&&"function"==typeof a.removeAttribute&&"function"==typeof a.setAttribute&&"string"==typeof a.namespaceURI&&"function"==typeof a.insertBefore)&&!zb(/[\u0080-\uFFFF]/,e.nodeName)){var t,r,n,o,a=g(e.nodeName);if(P("uponSanitizeElement",e,{tagName:a,allowedTags:p}),(!e.hasChildNodes()||D(e.firstElementChild)||D(e.content)&&D(e.content.firstElementChild)||!zb(/<[/\w]/g,e.innerHTML)||!zb(/<[/\w]/g,e.textContent))&&("select"!==a||!zb(/<template/i,e.innerHTML))){if(p[a]&&!b[a])return(!(e instanceof I)||((r=u(t=e))&&r.tagName||(r={namespaceURI:N,tagName:"template"}),n=Lb(t.tagName),o=Lb(r.tagName),t.namespaceURI===ye?r.namespaceURI===N?"svg"===n:r.namespaceURI===be?"svg"===n&&("annotation-xml"===o||Ee[o]):Boolean(O[n]):t.namespaceURI===be?r.namespaceURI===N?"math"===n:r.namespaceURI===ye?"math"===n&&Se[o]:Boolean(Ne[n]):t.namespaceURI===N&&(r.namespaceURI!==ye||Se[o])&&(r.namespaceURI!==be||Ee[o])&&!Ne[n]&&(_e[n]||!O[n])))&&("noscript"!==a&&"noembed"!==a||!zb(/<\/no(script|embed)/i,e.innerHTML))?(y&&3===e.nodeType&&(t=e.textContent,t=Ib(t,X," "),t=Ib(t,Q," "),e.textContent!==t)&&(Pb(d.removed,{element:e.cloneNode()}),e.textContent=t),P("afterSanitizeElements",e,null),!1):(T(e),!0);if(!b[a]&&Be(a)){if(v.tagNameCheck instanceof RegExp&&zb(v.tagNameCheck,a))return!1;if(v.tagNameCheck instanceof Function&&v.tagNameCheck(a))return!1}if(me&&!_[a]){var i=u(e)||e.parentNode,s=V(e)||e.childNodes;if(s&&i)for(var l=s.length-1;0<=l;--l)i.insertBefore(j(s[l],!0),H(e))}}}return T(e),!0},Te=function(e,t,r){if(ue&&("id"===t||"name"===t)&&(r in o||r in we))return!1;if((!se||ae[t]||!zb(J,t))&&(!ie||!zb(Z,t)))if(!h[t]||ae[t]){if(!(Be(e)&&(v.tagNameCheck instanceof RegExp&&zb(v.tagNameCheck,e)||v.tagNameCheck instanceof Function&&v.tagNameCheck(e))&&(v.attributeNameCheck instanceof RegExp&&zb(v.attributeNameCheck,t)||v.attributeNameCheck instanceof Function&&v.attributeNameCheck(t))||"is"===t&&v.allowCustomizedBuiltInElements&&(v.tagNameCheck instanceof RegExp&&zb(v.tagNameCheck,r)||v.tagNameCheck instanceof Function&&v.tagNameCheck(r))))return!1}else if(!he[t]&&!zb(re,Ib(r,te,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Fb(r,"data:")||!ge[e])&&(!le||zb(ee,Ib(r,te,"")))&&r)return!1;return!0},Be=function(e){return 0<e.indexOf("-")},De=function(e){P("beforeSanitizeAttributes",e,null);var t,r=e.attributes;if(r){for(var n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:h},o=r.length;o--;){t=r[o];var a=t.name,i=t.namespaceURI,s="value"===a?t.value:Ub(t.value),l=g(a),d=s;if(n.attrName=l,n.attrValue=s,n.keepAttr=!0,n.forceKeepAttr=void 0,P("uponSanitizeAttribute",e,n),s=n.attrValue,!n.forceKeepAttr)if(n.keepAttr)if(zb(/\/>/i,s))B(a,e);else{y&&(s=Ib(s,X," "),s=Ib(s,Q," "));var c=g(e.nodeName);if(Te(c,l,s)){if(s!==d)try{i?e.setAttributeNS(i,a,s):e.setAttribute(a,s)}catch(t){B(a,e)}}else B(a,e)}else B(a,e)}P("afterSanitizeAttributes",e,null)}},Pe=function e(t){var r,n=Ae(t);for(P("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)P("uponSanitizeShadowNode",r,null),Oe(r)||(r.content instanceof M&&e(r.content),De(r));P("afterSanitizeShadowDOM",t,null)};d.sanitize=function(e,t){var r,n,o,a;if("string"!=typeof(e=(Y=!e)?"\x3c!--\x3e":e)&&!D(e)){if("function"!=typeof e.toString)throw Cb("toString is not a function");if("string"!=typeof(e=e.toString()))throw Cb("dirty is not a string, aborting")}if(!d.isSupported){if("object"===pb(s.toStaticHTML)||"function"==typeof s.toStaticHTML){if("string"==typeof e)return s.toStaticHTML(e);if(D(e))return s.toStaticHTML(e.outerHTML)}return e}if(de||ke(t),d.removed=[],E="string"==typeof e?!1:E){if(e.nodeName){var t=g(e.nodeName);if(!p[t]||b[t])throw Cb("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)1===(t=(r=Re("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?r=t:r.appendChild(t);else{if(!w&&!y&&!C&&-1===e.indexOf("<"))return m&&k?m.createHTML(e):e;if(!(r=Re(e)))return w?null:k?q:""}r&&ce&&T(r.firstChild);for(var i=Ae(E?e:r);n=i.nextNode();)3===n.nodeType&&n===o||Oe(n)||(n.content instanceof M&&Pe(n.content),De(n),o=n);if(o=null,E)return e;if(w){if(x)for(a=W.call(r.ownerDocument);r.firstChild;)a.appendChild(r.firstChild);else a=r;return a=h.shadowroot?G.call(l,a,!0):a}t=C?r.outerHTML:r.innerHTML;return C&&p["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&zb(u0,r.ownerDocument.doctype.name)&&(t="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+t),y&&(t=Ib(t,X," "),t=Ib(t,Q," ")),m&&k?m.createHTML(t):t},d.setConfig=function(e){ke(e),de=!0},d.clearConfig=function(){A=null,de=!1},d.isValidAttribute=function(e,t,r){A||ke({});e=g(e),t=g(t);return Te(e,t,r)},d.addHook=function(e,t){"function"==typeof t&&(i[e]=i[e]||[],Pb(i[e],t))},d.removeHook=function(e){if(i[e])return Db(i[e])},d.removeHooks=function(e){i[e]&&(i[e]=[])},d.removeAllHooks=function(){i={}}}else d.isSupported=!1;return d}();const f0=J.each,g0=J.trim,p0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],h0={ftp:21,http:80,https:443,mailto:25},v0=["img","video"],b0=(e,t,r)=>{t=(t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(t)||!e.allow_html_data_urls&&(/^data:image\//i.test(t)?(e=e.allow_svg_data_urls,r=r,(H(e)?!e:!H(r)||!K(v0,r))&&/^data:image\/svg\+xml/i.test(t)):/^data:/i.test(t)))};class y0{static parseDataUri(e){let t;var e=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(e[0]);return{type:t=r?r[1]:t,data:e[1]}}static isDomSafe(e,t,r={}){return!!r.allow_script_urls||(e=ei.decode(e).replace(/[\s\u0000-\u001F]+/g,""),!b0(r,e,t))}static getDocumentBaseUrl(e){var t;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!=(t=e.href)?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,t={}){this.path="",this.directory="",e=g0(e);const r=(this.settings=t).base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))n.source=e;else{const o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=r?r.path:new y0(document.location.href).directory;if(""===(null==r?void 0:r.protocol))e="//mce_host"+n.toAbsPath(t,e);else{const o=/([^#?]*)([#?]?.*)/.exec(e);o&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(t,o[1])+o[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&f0(p0,(e,t)=>{let r=a[t];r=r&&r.replace(/\(mce_at\)/g,"@@"),n[e]=r}),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}}setPath(e){e=/^(.*?)\/?(\w+)?$/.exec(e);e&&(this.path=e[0],this.directory=e[1],this.file=e[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;e=new y0(e,{base_uri:this});if("mce_host"!==e.host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var t=this.getURI(),r=e.getURI();if(t===r||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===r)return t;let n=this.toRelPath(this.path,e.path);return e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n}toAbsolute(e,t){e=new y0(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?h0[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r,n,o=0,a="";var i=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(i.length>=s.length)for(r=0,n=i.length;r<n;r++)if(r>=s.length||i[r]!==s[r]){o=r+1;break}if(i.length<s.length)for(r=0,n=s.length;r<n;r++)if(r>=i.length||i[r]!==s[r]){o=r+1;break}if(1===o)return t;for(r=0,n=i.length-(o-1);r<n;r++)a+="../";for(r=o-1,n=s.length;r<n;r++)a+=r!==o-1?"/"+s[r]:s[r];return a}toAbsPath(e,t){let r=0;const n=/\/$/.test(t)?"/":"",o=e.split("/"),a=t.split("/"),i=[];f0(o,e=>{e&&i.push(e)});var s=[];for(let e=a.length-1;0<=e;e--)0!==a[e].length&&"."!==a[e]&&(".."!==a[e]?0<r?r--:s.push(a[e]):r++);e=i.length-r;let l;return 0!==(l=e<=0?Se(s).join("/"):i.slice(0,e).join("/")+"/"+Se(s).join("/")).indexOf("/")&&(l="/"+l),n&&l.lastIndexOf("/")!==l.length-1&&(l+=n),l}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const C0=J.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),w0="data-mce-type";let x0=0;const k0=(e,t,r,n)=>{var o=t.validate,a=r.getSpecialElements(),t=(8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!=(t=e.nodeValue)?t:"")&&(e.nodeValue=" "+e.nodeValue),null!=(t=null==n?void 0:n.tagName)?t:e.nodeName.toLowerCase());if(1===e.nodeType&&"body"!==t){const i=ee(e),s=fr(i,w0),l=ur(i,"data-mce-bogus");!s&&j(l)?("all"===l?re:On)(i):(e=r.getElementRule(t),!o||e?(H(n)&&(n.allowedTags[t]=!0),o&&e&&!s&&(Y(null!=(r=e.attributesForced)?r:[],e=>{dr(i,e.name,"{$uid}"===e.value?"mce_"+x0++:e.value)}),Y(null!=(n=e.attributesDefault)?n:[],e=>{fr(i,e.name)||dr(i,e.name,"{$uid}"===e.value?"mce_"+x0++:e.value)}),(!e.attributesRequired||G(e.attributesRequired,e=>fr(i,e)))&&(!e.removeEmptyAttrs||null!=(o=i.dom.attributes)&&0!==o.length)?e.outputName&&e.outputName!==t&&(r=i,n=((e,t)=>{t=Nr(t),e=pr(e);return cr(t,e),t})(r,e.outputName),Sn(r,n),o=Vr(r),Rn(n,o),re(r)):On(i))):(Q(a,t)?re:On)(i))}},E0=(e,t,r,n,o)=>!(n in C0&&b0(e,o,r))&&(!e.validate||t.isValid(r,n)||st(n,"data-")||st(n,"aria-")),S0=(e,t)=>e.hasAttribute(w0)&&("id"===t||"class"===t||"style"===t),_0=(e,t)=>e in t.getBoolAttrs(),N0=J.makeMap,R0=J.extend,A0=(r,e,n)=>{const o=r.name,a=o in n&&"title"!==o&&"textarea"!==o,i=e.childNodes;for(let e=0,t=i.length;e<t;e++){const o=i[e],s=new xg(o.nodeName.toLowerCase(),o.nodeType);if(ne(o)){const r=o.attributes;for(let e=0,t=r.length;e<t;e++){const n=r[e];s.attr(n.name,n.value)}}else oe(o)?(s.value=o.data,a&&(s.raw=!0)):(so(o)||ao(o)||io(o))&&(s.value=o.data);A0(s,o,n),r.append(s)}},O0=(e={},_=ui())=>{const t=ob(),r=ob(),N={validate:!0,root_name:"body",sanitize:!0,...e},R=new DOMParser,A=((c,u)=>{if(c.sanitize){a=c,i=u,(e=m0()).addHook("uponSanitizeElement",(e,t)=>{k0(e,a,i,t)}),e.addHook("uponSanitizeAttribute",(e,t)=>{var r=e.tagName.toLowerCase(),{attrName:n,attrValue:o}=t;t.keepAttr=E0(a,i,r,n,o),t.keepAttr?(t.allowedAttributes[n]=!0,_0(n,i)&&(t.attrValue=n),a.allow_svg_data_urls&&st(o,"data:image/svg+xml")&&(t.forceKeepAttr=!0)):S0(e,n)&&(t.forceKeepAttr=!0)});const n=e;return(e,t)=>{var r;n.sanitize(e,(e=c,(r={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}).PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r)),n.removed=[]}}var a,i,e;return(e,t)=>{for(var r,n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);r=n.nextNode();)if(k0(r,c,u),ne(r)){d=l=s=void 0;var o=r,a=c,i=u,s=o["attributes"];for(let e=s.length-1;0<=e;e--){var l=s[e],d=l.name,l=l.value;E0(a,i,o.tagName.toLowerCase(),d,l)||S0(o,d)?_0(d,i)&&o.setAttribute(d,d):o.removeAttribute(d)}}}})(N,_),n=t.addFilter,O=t.getFilters,o=t.removeFilter,a=r.addFilter,T=r.getFilters,i=r.removeFilter,B=(e,t)=>{var r=j(t.attr(w0)),e=1===t.type&&!Q(e,t.name)&&!Ba(_,t);return 3===t.type||e&&!r},s={schema:_,addAttributeFilter:a,getAttributeFilters:T,removeAttributeFilter:i,addNodeFilter:n,getNodeFilters:O,removeNodeFilter:o,parse:(e,t={})=>{var r,n=N.validate,o=null!=(o=t.context)?o:N.root_name,a=([e,a,r="html"]=[e,o,t.format],v="xhtml"===r?"application/xhtml+xml":"text/html",a=(b=Q(_.getSpecialElements(),a.toLowerCase()))?`<${a}>${e}</${a}>`:e,e="xhtml"===r?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${a}</body></html>`:`<body>${a}</body>`,r=R.parseFromString(e,v).body,A(r,v),b?r.firstChild:r);_a(_,a);const i=new xg(o,11),[s,l]=(A0(i,a,_.getSpecialElements()),a.innerHTML="",((r,n,o,a)=>{const i=o.validate,s=n.getNonEmptyElements(),l=n.getWhitespaceElements(),t=R0(N0("script,style,head,html,body,title,meta,param"),n.getBlockElements()),d=di(n),c=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,f=e=>{let t=e.parent;for(;H(t);){if(t.name in l)return!0;t=t.parent}return!1},g=e=>e.name in t||Ba(n,e),p=(e,t)=>{t=t?e.prev:e.next;return!H(t)&&!de(e.parent)&&g(e.parent)&&(e.parent!==r||!0===a.isRootContent)};return[t=>{var r,n;if(3===t.type&&!f(t)){let e=null!=(r=t.value)?r:"";e=e.replace(c," "),r=t.prev,n=g,0===(e=H(r)&&(n(r)||"br"===r.name)||p(t,!0)?e.replace(u,""):e).length?t.remove():t.value=e}},t=>{var r,e;if(1===t.type){const r=n.getElementRule(t.name);if(i&&r){const i=Bh(n,s,l,t);r.paddInEmptyBlock&&i&&(()=>{let e=t;for(;H(e);){if(e.name in d)return Bh(n,s,l,e);e=e.parent}return!1})()?Oh(o,a,g,t):r.removeEmpty&&i?g(t)?t.remove():t.unwrap():r.paddEmpty&&(i||(e=t,Th(e,"#text")&&(null==(e=null==e?void 0:e.firstChild)?void 0:e.value)===Co))&&Oh(o,a,g,t)}}else if(3===t.type&&!f(t)){let e=null!=(r=t.value)?r:"";0===(e=t.next&&g(t.next)||p(t,!1)?e.replace(m,""):e).length?t.remove():t.value=e}}]})(i,_,N,t)),d=[],c=n?e=>{var t;e=e,t=d,Mh(_,e)&&t.push(e)}:q,u={nodes:{},attributes:{}},m=e=>Nh(O(),T(),e,u);var f=i,g=[s,m],p=[l,c],h=[];for(let e=f,t=e;e;e=(t=e).walk()){const x=e;Y(g,e=>e(x)),de(x.parent)&&x!==f?e=t:h.push(x)}for(let e=h.length-1;0<=e;e--){const g=h[e];Y(p,e=>e(g))}if(d.reverse(),n&&0<d.length)if(t.context){const{pass:e,fail:o}=he(d,e=>e.parent===i);Lh(o,_,i,m),t.invalid=0<e.length}else Lh(d,_,i,m);e=N;var v,b=!1===(v=null!=(v=t.forced_root_block)?v:e.forced_root_block)?"":!0===v?"p":v;if(b&&("body"===i.name||t.isRootContent)){var y=i,C=b;const k=R0(N0("script,style,head,html,body,title,meta,param"),_.getBlockElements()),E=/^[ \t\r\n]+/,S=/[ \t\r\n]+$/;let r=y.firstChild,e=null;var w=e=>{var t;e&&((r=e.firstChild)&&3===r.type&&(r.value=null==(t=r.value)?void 0:t.replace(E,"")),r=e.lastChild)&&3===r.type&&(r.value=null==(t=r.value)?void 0:t.replace(S,""))};if(_.isValidChild(y.name,C.toLowerCase())){for(;r;){const _=r.next;B(k,r)?(e||((e=new xg(C,1)).attr(N.forced_root_block_attrs),y.insert(e,r)),e.append(r)):(w(e),e=null),r=_}w(e)}}return t.invalid||Rh(u,t),i}};return gb(s,N),e=s,l=N,d=_,l.inline_styles&&ab(e,l,d),s;var l,d},T0=(e,t,r)=>{n=e;var n=qh(n)?Og({validate:!1}).serialize(n):n,o=t(n);if(o.isDefaultPrevented()||!qh(e))return o;if(o.content===n)return{...o,content:e};{const t=O0({validate:!1,forced_root_block:!1,sanitize:r}).parse(o.content,{context:e.name});return{...o,content:t}}},B0=(e,t)=>{return!t.no_events&&(t=e.dispatch("BeforeGetContent",t)).isDefaultPrevented()?rl.error(Hm(e,{content:"",...t}).content):rl.value(t)},D0=(t,e,r)=>{return r.no_events?e:T0(e,e=>Hm(t,{...r,content:e}),Zd(t)).content},P0=(r,n)=>{var e;return n.no_events?rl.value(n):(e=T0(n.content,e=>{return t=r,e={...n,content:e},t.dispatch("BeforeSetContent",e);var t},Zd(r))).isDefaultPrevented()?(jm(r,e),rl.error(void 0)):rl.value(e)},L0=(e,t,r)=>{r.no_events||jm(e,{...r,content:t})},M0=(e,t,r)=>({element:e,width:t,rows:r}),I0=(e,t)=>({element:e,cells:t}),F0=(e,t)=>mr(e,t).bind(pt).getOr(1),U0=e=>be(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),z0=(e,r)=>{var n=e.rows;for(let t=0;t<n.length;t++){var o=n[t].cells;for(let e=0;e<o.length;e++)if(F(o[e],r))return W.some({x:e,y:t})}return W.none()},j0=(e,t,r,n,o)=>{var a=[],i=e.rows;for(let e=r;e<=o;e++){const r=i[e].cells,o=t<n?r.slice(t,n+1):r.slice(n,t+1);a.push(I0(i[e].element,o))}return a},H0=(e,t)=>{var r,n,o,a=ee(t.commonAncestorContainer),e=Xg(a,e),i=L(e,Io),e=(n=e,o=t,Ce(n,e=>"li"===Z(e)&&qu(e,o)).fold($([]),e=>{return t=n,Ce(t,e=>"ul"===Z(e)||"ol"===Z(e)).map(e=>{var t=Nr(Z(e)),e=ze(xn(e),(e,t)=>st(t,"list-style"));return bn(t,e),[Nr("li"),t]}).getOr([]);var t})),t=i.concat(e.length?e:(r=a,Bo(r)?Mr(r).filter(To).fold($([]),e=>[r,e]):To(r)?[r]:[]));return C(t,ts)},V0=()=>df([]),q0=(e,o)=>{return e=e,t=o[0],cn(t,"table",D(F,e)).bind(e=>{var i,t,r=o[0],n=o[o.length-1],e=(e=>{const m=M0(ts(e),0,[]);return Y(Wn(e,"tr"),(c,u)=>{Y(Wn(c,"td,th"),(e,t)=>{var r=m,n=((e,t,r)=>{for(;((e,t,r)=>{e=e.rows;return!!(e[r]?e[r].cells:[])[t]})(e,t,r);)t++;return t})(m,t,u),o=u,a=c,i=e,s=F0(i,"rowspan"),l=F0(i,"colspan"),d=r.rows;for(let t=o;t<o+s;t++){d[t]||(d[t]=I0(rs(a),[]));for(let e=n;e<n+l;e++)d[t].cells[e]=t===o&&e===n?i:ts(i)}})}),M0(m.element,U0(m.rows),m.rows)})(e);return i=e,e=r,t=n,z0(i,e).bind(a=>z0(i,t).map(e=>{return t=i,r=a.x,n=a.y,o=e.x,e=e.y,r=n<e?j0(t,r,n,o,e):j0(t,r,e,o,n),M0(t.element,U0(r),r);var t,r,n,o})).map(e=>{return df([(r=e=e=e,r=C(r.rows,e=>{var t=C(e.cells,e=>{e=rs(e);return gr(e,"colspan"),gr(e,"rowspan"),e}),e=ts(e.element);return Rn(e,t),e}),e=ts(e.element),t=Nr("tbody"),Rn(t,r),te(e,t),e)]);var t,r})}).getOrThunk(V0);var t},$0=(e,t)=>0<=t&&t<e.length&&Au(e.charAt(t)),W0=e=>Vo(e.innerText),K0=e=>ne(e)?e.outerHTML:oe(e)?ei.encodeRaw(e.data,!1):so(e)?"\x3c!--"+e.data+"--\x3e":"",G0=(e,t)=>{{e=((f,g)=>{const e=f.length+g.length+2,p=new Array(e),h=new Array(e),s=(r,n,o,a,i)=>{var t=l(r,n,o,a);if(null===t||t.start===n&&t.diag===n-a||t.end===r&&t.diag===r-o){let e=r,t=o;for(;e<n||t<a;)e<n&&t<a&&f[e]===g[t]?(i.push([0,f[e]]),++e,++t):a-o<n-r?(i.push([2,f[e]]),++e):(i.push([1,g[t]]),++t)}else{s(r,t.start,o,t.start-t.diag,i);for(let e=t.start;e<t.end;++e)i.push([0,f[e]]);s(t.end,n,t.end-t.diag,a,i)}},v=(e,t,r,n)=>{let o=e;for(;o-t<n&&o<r&&f[o]===g[o-t];)++o;return{start:e,end:o,diag:t}},l=(a,i,s,l)=>{var d=i-a,c=l-s;if(0!=d&&0!=c){var u=d-c,c=c+d,m=(c%2==0?c:1+c)/2;let e,t,r,n,o;for(p[1+m]=a,h[1+m]=i+1,e=0;e<=m;++e){for(t=-e;t<=e;t+=2){for(r=t+m,t===-e||t!==e&&p[r-1]<p[r+1]?p[r]=p[r+1]:p[r]=p[r-1]+1,n=p[r],o=n-a+s-t;n<i&&o<l&&f[n]===g[o];)p[r]=++n,++o;if(u%2!=0&&u-e<=t&&t<=u+e&&h[r-u]<=p[r])return v(h[r-u],t+a-s,i,l)}for(t=u-e;t<=u+e;t+=2){for(r=t+m-u,t===u-e||t!==u+e&&h[r+1]<=h[r-1]?h[r]=h[r+1]-1:h[r]=h[r-1],n=h[r]-1,o=n-a+s-t;n>=a&&o>=s&&f[n]===g[o];)h[r]=n--,o--;if(u%2==0&&-e<=t&&t<=e&&h[r]<=p[r+u])return v(h[r],t+a-s,i,l)}}}return null},t=[];return s(0,f.length,0,g.length,t),t})(C(Be(t.childNodes),K0),e);var i=t;let a=0;Y(e,e=>{if(0===e[0])a++;else if(1===e[0]){var t=i,r=e[1],n=a,o=(e=>{var t,r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(r);if(t.hasChildNodes()&&n<t.childNodes.length){const r=t.childNodes[n];t.insertBefore(o,r)}else t.appendChild(o);a++}else 2===e[0]&&(r=i,n=a,r.hasChildNodes())&&n<r.childNodes.length&&(n=r.childNodes[n],r.removeChild(n))})}return t},Y0=Ze(()=>document.implementation.createHTMLDocument("undo")),X0=t=>{e=t.getBody();var e=L(C(Be(e.childNodes),K0),e=>0<e.length),e=ke(e,e=>{e=Eg(t.serializer,e);return 0<e.length?[e]:[]}),r=e.join("");return-1!==r.indexOf("</iframe>")?{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:r,bookmark:null,beforeBookmark:null}},Q0=(e,t,r)=>{r=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?G0(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!H(r)||!bu(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},J0=e=>"fragmented"===e.type?e.fragments.join(""):e.content,Z0=e=>{var t=Nr("body",Y0());return Dn(t,J0(e)),Y(Wn(t,"*[data-mce-bogus]"),On),Bn(t)},ey=(e,t)=>{return!(!e||!t||(r=e,n=t,J0(r)!==J0(n)&&(r=e,n=t,Z0(r)!==Z0(n))));var r,n},ty=e=>0===e.get(),ry=(e,t,r)=>{ty(r)&&(e.typing=t)},ny=(e,t)=>{e.typing&&(ry(e,!1,t),e.add())},oy=g=>({init:{bindEvents:q},undoManager:{beforeChange:(e,t)=>{var r;r=g,e=e,t=t,ty(e)&&t.set(Zs(r.selection))},add:(e,t,r,n,o,a)=>{var i=g,s=e,l=t,e=r,t=n,r=o,n=a,o=X0(i),r=J.extend(r||{},o);if(!ty(e)||i.removed)return null;if(o=s.data[l.get()],i.dispatch("BeforeAddUndo",{level:r,lastLevel:o,originalEvent:n}).isDefaultPrevented())return null;if(o&&ey(o,r))return null;if(s.data[l.get()]&&t.get().each(e=>{s.data[l.get()].beforeBookmark=e}),(e=hd(i))&&s.data.length>e){for(let e=0;e<s.data.length-1;e++)s.data[e]=s.data[e+1];s.data.length--,l.set(s.data.length)}return r.bookmark=Zs(i.selection),l.get()<s.data.length-1&&(s.data.length=l.get()+1),s.data.push(r),l.set(s.data.length-1),t={level:r,lastLevel:o,originalEvent:n},0<l.get()?(i.setDirty(!0),i.dispatch("AddUndo",t),i.dispatch("change",t)):i.dispatch("AddUndo",t),r},undo:(t,r,n)=>{{var o=g;let e;return t.typing&&(t.add(),t.typing=!1,ry(t,!1,r)),0<n.get()&&(n.set(n.get()-1),e=t.data[n.get()],Q0(o,e,!0),o.setDirty(!0),o.dispatch("Undo",{level:e})),e}},redo:(t,r)=>{{var n=g;let e;return t.get()<r.length-1&&(t.set(t.get()+1),e=r[t.get()],Q0(n,e,!1),n.setDirty(!0),n.dispatch("Redo",{level:e})),e}},clear:(e,t)=>{return r=g,t=t,(e=e).data=[],t.set(0),e.typing=!1,void r.dispatch("ClearUndos");var r},reset:e=>{(e=e).clear(),e.add()},hasUndo:(e,t)=>{return r=g,e=e,0<t.get()||e.typing&&e.data[0]&&!ey(X0(r),e.data[0]);var r},hasRedo:(e,t)=>{return e=e,t.get()<e.data.length-1&&!e.typing},transact:(e,t,r)=>{return e=e,t=t,r=r,ny(e,t),e.beforeChange(),e.ignore(r),e.add()},ignore:(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:(e,t,r,n)=>{var o=g,a=r,r=n;if(e.transact(a)){const a=e.data[t.get()].bookmark,i=e.data[t.get()-1];Q0(o,i,!0),e.transact(r)&&(e.data[t.get()-1].beforeBookmark=a)}}},formatter:{match:(e,t,r,n)=>tv(g,e,t,r,n),matchAll:(e,t)=>{{var n=g,o=e,a=t;const i=[],s={},r=n.selection.getStart();return n.dom.getParent(r,t=>{for(let e=0;e<o.length;e++){var r=o[e];!s[r]&&ev(n,t,r,a)&&(s[r]=!0,i.push(r))}},n.dom.getRoot()),i}},matchNode:(e,t,r,n)=>ev(g,e,t,r,n),canApply:e=>{var t=g,r=e,n=t.formatter.get(r),o=t.dom;if(n&&t.selection.isEditable()){const r=t.selection.getStart(),a=dm(o,r);for(let e=n.length-1;0<=e;e--){const r=n[e];if(!mm(r))return!0;for(let e=a.length-1;0<=e;e--)if(o.is(a[e],r.selector))return!0}}return!1},closest:e=>{{var n=g,t=e;const r=e=>F(e,ee(n.getBody()));return W.from(n.selection.getStart(!0)).bind(e=>Gh(ee(e),r=>De(t,e=>{return t=r,e=e,ev(n,t.dom,e)?W.some(e):W.none();var t}),r)).getOrNull()}},apply:(e,t,r)=>Qv(g,e,t,r),remove:(e,t,r,n)=>$v(g,e,t,r,n),toggle:(e,t,r)=>{var n,o;e=e,t=t,r=r,(o=(n=g).formatter.get(e))&&(!tv(n,e,t,r)||"toggle"in o[0]&&!o[0].toggle?Qv:$v)(n,e,t,r)},formatChanged:(e,t,r,n,o)=>{var a=g,i=e,s=t,l=r,e=n,t=o;{var d=a,r=s,c=l,u=e,m=t;const f=(a=i).get();Y(r.split(","),t=>{var e=M(f,t).getOrThunk(()=>{var e={withSimilar:{state:Bi(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Bi(!1),similar:!1,callbacks:[]},withVars:[]};return f[t]=e}),r=()=>{var e=tb(d);return eb(d,e,t,u,m).isSome()};if(S(m)){const d=u?e.withSimilar:e.withoutSimilar;d.callbacks.push(c),1===d.callbacks.length&&d.state.set(r())}else e.withVars.push({state:Bi(r()),similar:u,vars:m,callback:c})}),a.set(f)}return{unbind:()=>{{var e=i,t=s,r=l;const n=e.get();Y(t.split(","),t=>M(n,t).each(e=>{n[t]={withSimilar:{...e.withSimilar,callbacks:L(e.withSimilar.callbacks,e=>e!==r)},withoutSimilar:{...e.withoutSimilar,callbacks:L(e.withoutSimilar.callbacks,e=>e!==r)},withVars:L(e.withVars,e=>e.callback!==r)}})),e.set(n)}}}}},editor:{getContent:e=>{return i=g,s=e,W.from(i.getBody()).fold($("tree"===s.format?new xg("body",11):""),e=>{return t=i,e=e,a="raw"===(r=s).format?J.trim(Sg(t.serializer,e.innerHTML)):"text"===r.format?(n=e,o=(a=t).getDoc(),a=Qr(ee(a.getBody())),o=Nr("div",o),dr(o,"data-mce-bogus","all"),bn(o,{position:"fixed",left:"-9999999px",top:"0"}),Dn(o,n.innerHTML),_g(o),Ng(o),n=a,a=Gr(n)?n:ee(Pr(n).dom.body),te(a,o),n=Vo(o.dom.innerText),re(o),n):"tree"===r.format?t.serializer.serialize(e,r):((e,t)=>{e=kl(e),e=new RegExp(`^(<${e}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${e}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(e,"")})(t,t.serializer.serialize(e,r)),"text"!==r.format&&!Lo(ee(e))&&j(a)?J.trim(a):a;var t,r,n,o,a});var i,s},setContent:(e,t)=>{return s=g,l=e,d=t,W.from(s.getBody()).map(e=>{if(qh(l))return t=s,r=e,n=l,o=d,Ah(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n),a=Og({validate:!1},t.schema).serialize(n),r=Lo(ee(r))?a:J.trim(a),$h(t,r,o.no_selection),{content:n,html:r};a=s,t=e,o=l,n=d;if(0===o.length||/^\s+$/.test(o))return r='<br data-mce-bogus="1">',"TABLE"===t.nodeName?o="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+r+"</li>"),i=kl(a),o=a.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(o=r,a.dom.createHTML(i,El(a),o)):o||r,$h(a,o,n.no_selection),{content:o,html:o};"raw"!==n.format&&(o=Og({validate:!1},a.schema).serialize(a.parser.parse(o,{isRootContent:!0,insert:!0})));var t,r,n,o,a,i=Lo(ee(t))?o:J.trim(o);return $h(a,i,n.no_selection),{content:i,html:i}}).getOr({content:l,html:qh(d.content)?"":d.content});var s,l,d},insertContent:(e,t)=>Vh(g,e,t),addVisual:e=>{{var n=g;const o=n.dom,t=H(e)?e:n.getBody();Y(o.select("table,a",t),e=>{switch(e.nodeName){case"TABLE":var t=Sd(n),r=o.getAttrib(e,"border");r&&"0"!==r||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t);break;case"A":o.getAttrib(e,"href")||(r=o.getAttrib(e,"name")||e.id,t=_d(n),r&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t))}}),n.dispatch("VisualAid",{element:e,hasVisual:n.hasVisual})}}},selection:{getContent:(e,t)=>{return[u,t={}]=[g,t],e=e,t={...t,format:e,get:!0,selection:!0,getInner:!0},B0(u,t).fold(p,e=>{t=u;var t,r,s,n,o,a,i,l,d,c="text"===(r=e).format?(s=t,W.from(s.selection.getRng()).map(e=>{const t=W.from(s.dom.getParent(e.commonAncestorContainer,s.dom.isBlock)),r=s.getBody(),n=t.map(e=>e.nodeName).getOr("div").toLowerCase(),o=ee(e.cloneContents());_g(o),Ng(o);var e=s.dom.add(r,n,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},o.dom),a=W0(e),i=Vo(null!=(i=e.textContent)?i:"");if(s.dom.remove(e),$0(i,0)||$0(i,i.length-1)){const s=t.getOr(r),e=W0(s),i=e.indexOf(a);return-1===i?a:($0(e,i-1)?" ":"")+a+($0(e,i+a.length)?" ":"")}return a}).getOr("")):(o=r,i=(n=t).selection.getRng(),l=n.dom.create("body"),c=n.selection.getSel(),c=fg(n,Fu(c)),(d=o.contextual?(d=ee(n.getBody()),c=c,(0<(a=Uu(c,d)).length?q0(d,a):(a=d,0<(d=c).length&&d[0].collapsed?V0():(a=a,d=d[0],c=ee(d.cloneContents()),a=H0(a,d),c=be(a,(e,t)=>(te(t,e),t),c),0<a.length?df([c]):c))).dom):i.cloneContents())&&l.appendChild(d),a=n.selection.serializer.serialize(l,o),"tree"!==r.format&&t.selection.isCollapsed()?"":a);return D0(u,c,e)});var u}},autocompleter:{addDecoration:e=>vg(g,e),removeDecoration:()=>{return r=g,e=ee(g.getBody()),bg(e).each(e=>{var t=r.selection.getBookmark();On(e),r.selection.moveToBookmark(t)});var r,e}},raw:{getModel:()=>W.none()}}),ay=e=>Q(e.plugins,"rtc"),iy=e=>e.rtcInstance||oy(e),h=e=>{e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},sy=e=>h(e).init.bindEvents(),ly=e=>0===e.dom.length?(re(e),W.none()):W.some(e),dy=(e,t,i,s)=>{e.bind(a=>((s?Np:_p)(a.dom,s?a.dom.length:0),t.filter(or).map(e=>{var t,r,n,o;t=i,r=s,n=a.dom,e=e.dom,o=(r?n:e).length,r?(Rp(n,e,!1,!r),t.setStart(e,o)):(Rp(e,n,!1,!r),t.setEnd(e,o))}))).orThunk(()=>{var e;return e=s,t.filter(e=>Mm.isBookmarkNode(e.dom)).bind(e?zr:Ur).or(t).filter(or).map(e=>{var r,n;r=e,n=s,Mr(r).each(e=>{var t=r.dom;n&&bp(e,z(t,0))?_p(t,0):!n&&yp(e,z(t,t.length))&&Np(t,t.length)})})})},cy=(e,t,r)=>{var n;Q(e,t)&&(0===(n=L(e[t],e=>e!==r)).length?delete e[t]:e[t]=n)},uy=e=>!(!e||!e.ownerDocument)&&Br(ee(e.ownerDocument),ee(e)),my=(d,n,e,s)=>{let o,a;const r=((r,n)=>{let a,i;const s=(t,e)=>Ce(e,e=>r.is(e,t)),l=e=>r.getParents(e,void 0,r.getRoot());return{selectorChangedWithUnbind:(e,t)=>(a||(a={},i={},n.on("NodeChange",e=>{const r=e.element,n=l(r),o={};X(a,(e,r)=>{s(r,n).each(t=>{i[r]||(Y(e,e=>{e(!0,{node:t,selector:r,parents:n})}),i[r]=e),o[r]=e})}),X(i,(e,t)=>{o[t]||(delete i[t],Y(e,e=>{e(!1,{node:r,selector:t,parents:n})}))})})),a[e]||(a[e]=[]),a[e].push(t),s(e,l(n.selection.getStart())).each(()=>{i[e]=a[e]}),{unbind:()=>{cy(a,e,t),cy(i,e,t)}})}})(d,s)["selectorChangedWithUnbind"],t=(e,t)=>{var l;[l,t={}]=[s,t],e=e,t={format:"html",...t,set:!0,selection:!0,content:e},P0(l,t).each(e=>{i=l;var t,r,n,o,a,i="raw"!==(t=e).format?(s=i.selection.getRng(),s=(s=i.dom.getParent(s.commonAncestorContainer,i.dom.isBlock))?{context:s.nodeName.toLowerCase()}:{},s=i.parser.parse(t.content,{forced_root_block:!1,...s,...t}),Og({validate:!1},i.schema).serialize(s)):t.content,s=l.selection.getRng();r=(t=s).createContextualFragment(i),n=W.from(r.firstChild).map(ee),o=W.from(r.lastChild).map(ee),t.deleteContents(),t.insertNode(r),r=n.bind(Ur).filter(or).bind(ly),a=o.bind(zr).filter(or).bind(ly),dy(r,n,t,!0),dy(a,o,t,!1),t.collapse(!1),l.selection.setRng(s),Ff(l,s),L0(l,i,e)})},i=e=>{var t=c();t.collapse(!!e),u(t)},l=()=>n.getSelection?n.getSelection():n.document.selection,c=()=>{let e;var t=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},r=n.document;if(H(s.bookmark)&&!sg(s)){const d=Yf(s);if(d.isSome())return d.map(e=>fg(s,[e])[0]).getOr(r.createRange())}try{const d=l();d&&!Xn(d.anchorNode)&&(e=0<d.rangeCount?d.getRangeAt(0):r.createRange(),e=fg(s,[e])[0])}catch(e){}if(e=e||r.createRange(),lo(e.startContainer)&&e.collapsed){const n=d.getRoot();e.setStart(n,0),e.setEnd(n,0)}return o&&a&&(0===t(e.START_TO_START,e,o)&&0===t(e.END_TO_END,e,o)?e=a:(o=null,a=null)),e},u=(e,t)=>{if((r=e)&&uy(r.startContainer)&&uy(r.endContainer)){var r=l();if(e=s.dispatch("SetSelectionRange",{range:e,forward:t}).range,r){a=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),o=0<r.rangeCount?r.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&null!=r&&r.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){const t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(t,0,t,1))}s.dispatch("AfterSetSelectionRange",{range:e,forward:t})}},m=()=>{var e=l(),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.focusNode;if(!e||!t||!r||Xn(t)||Xn(r))return!0;var n=d.createRng(),o=d.createRng();try{n.setStart(t,e.anchorOffset),n.collapse(!0),o.setStart(r,e.focusOffset),o.collapse(!0)}catch(e){return!0}return n.compareBoundaryPoints(n.START_TO_START,o)<=0},f={dom:d,win:n,serializer:e,editor:s,expand:(e={type:"word"})=>u(Cf(d).expand(c(),e)),collapse:i,setCursorLocation:(e,t)=>{var r=d.createRng();H(e)&&H(t)?(r.setStart(e,t),r.setEnd(e,t),u(r),i(!1)):($u(d,r,s.getBody(),!0),u(r))},getContent:e=>{return[e={}]=[e],t=s,r=e.format||"html",e=e,h(t).selection.getContent(r,e);var t,r},setContent:t,getBookmark:(e,t)=>g.getBookmark(e,t),moveToBookmark:e=>g.moveToBookmark(e),select:(e,t)=>{return o=d,r=e,a=t,W.from(r).bind(n=>W.from(n.parentNode).map(e=>{var t=o.nodeIndex(n),r=o.createRng();return r.setStart(e,t),r.setEnd(e,t+1),a&&($u(o,r,n,!0),$u(o,r,n,!1)),r})).each(u),e;var o,r,a},isCollapsed:()=>{var e=c(),t=l();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{var e=c(),t=s.getBody().querySelectorAll('[data-mce-selected="1"]');return 0<t.length?Ee(t,e=>d.isEditable(e.parentElement)):e.startContainer===e.endContainer?d.isEditable(e.startContainer):d.isEditable(e.startContainer)&&d.isEditable(e.endContainer)},isForward:m,setNode:e=>(t(d.getOuterHTML(e)),e),getNode:()=>{{var n=s.getBody(),o=c();if(!o)return n;let e=o.startContainer,t=o.endContainer;var a=o.startOffset,i=o.endOffset;let r=o.commonAncestorContainer;return o.collapsed||(e===t&&i-a<2&&e.hasChildNodes()&&(r=e.childNodes[a]),oe(e)&&oe(t)&&(e=e.length===a?mg(e.nextSibling,!0):e.parentNode,t=0===i?mg(t.previousSibling,!1):t.parentNode,e)&&e===t&&(r=e)),o=oe(r)?r.parentNode:r,ne(o)?o:n}},getSel:l,setRng:u,getRng:c,getStart:e=>cg(s.getBody(),c(),e),getEnd:e=>ug(s.getBody(),c(),e),getSelectedBlocks:(e,t)=>{var r,n=d,o=c(),a=e,e=t,i=[],t=n.getRoot(),s=n.getParent(a||cg(t,o,o.collapsed),n.isBlock),l=n.getParent(e||ug(t,o,o.collapsed),n.isBlock);if(s&&s!==t&&i.push(s),s&&l&&s!==l){const a=new Gn(s,t);for(;(r=a.next())&&r!==l;)n.isBlock(r)&&i.push(r)}return l&&s!==l&&l!==t&&i.push(l),i},normalize:()=>{const e=c(),t=l();if(1<Fu(t).length||!Wu(s))return e;{const t=vf(d,e);return t.each(e=>{u(e,m())}),t.getOr(e)}},selectorChanged:(e,t)=>(r(e,t),f),selectorChangedWithUnbind:r,getScrollContainer:()=>{let e,t=d.getRoot();for(;t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:(e,t)=>{var r,n;H(e)?(e=e,n=t,((r=s).inline?Lf:If)(r,e,n)):Ff(s,c(),t)},placeCaretAt:(e,t)=>u(uf(e,t,s.getDoc())),getBoundingClientRect:()=>{var e=c();return e.collapsed?z.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{n=o=a=null,p.destroy()}},g=Mm(f),p=Gm(f,s);return f.bookmarkManager=g,f.controlSelection=p,f},fy=(e,t,r)=>{-1===J.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},gy=(e,a)=>{const t=["data-mce-selected"],i={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},s=a&&a.dom?a.dom:ae.DOM,l=a&&a.schema?a.schema:ui(i),d=O0(i,l);return r=d,c=i,u=s,r.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),r.addAttributeFilter("src,href,style",(t,r)=>{var n="data-mce-"+r,o=c.url_converter,a=c.url_converter_scope;let i=t.length;for(;i--;){const c=t[i];let e=c.attr(n);void 0!==e?(c.attr(r,0<e.length?e:null),c.attr(n,null)):(e=c.attr(r),"style"===r?e=u.serializeStyle(u.parseStyle(e),c.name):o&&(e=o.call(a,e,r,c.name)),c.attr(r,0<e.length?e:null))}}),r.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){var n=t[r];let e=n.attr("class");e&&(e=e.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",0<e.length?e:null))}}),r.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){const t=e[n];if("bookmark"===t.attr("data-mce-type")&&!r.cleanup){const e=W.from(t.firstChild).exists(e=>{return!Ho(null!=(e=e.value)?e:"")});e?t.unwrap():t.remove()}}}),r.addNodeFilter("noscript",e=>{let t=e.length;for(;t--;){var r=e[t].firstChild;r&&(r.value=ei.decode(null!=(r=r.value)?r:""))}}),r.addNodeFilter("script,style",(e,t)=>{var r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let n=e.length;for(;n--;){var o=e[n],a=o.firstChild,i=null!=(i=null==a?void 0:a.value)?i:"";if("script"===t){const e=o.attr("type");e&&o.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===c.element_format&&a&&0<i.length&&(a.value="// <![CDATA[\n"+r(i)+"\n// ]]>")}else"xhtml"===c.element_format&&a&&0<i.length&&(a.value="\x3c!--\n"+r(i)+"\n--\x3e")}}),r.addNodeFilter("#comment",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.value;c.preserve_cdata&&0===(null==n?void 0:n.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=u.decode(n.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==n?void 0:n.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(n).substr(14))}}),r.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];7===n.type?n.remove():1!==n.type||"input"!==t||n.attr("type")||n.attr("type","text")}}),r.addAttributeFilter("data-mce-type",e=>{Y(e,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(r.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),r.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),c.remove_trailing_brs&&ib(c,r,r.schema),{schema:l,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:(e,t={})=>{var r,n,o,t={format:"html",...t},e=((r,n,o)=>{if(i=r,s=o,H(i)&&i.hasEventListeners("PreProcess")&&!s.no_events){var a=r,i=n,s=o;let e;r=a.dom;let t=i.cloneNode(!0);if((i=document.implementation).createHTMLDocument){const a=i.createHTMLDocument("");J.each("BODY"===t.nodeName?t.childNodes:[t],e=>{a.body.appendChild(a.importNode(e,!0))}),t="BODY"!==t.nodeName?a.body.firstChild:a.body,e=r.doc,r.doc=a}return i=a,a={...s,node:t},i.dispatch("PreProcess",a),e&&(r.doc=e),t}return n;var i,s})(a,e,t),e=((e,t,r)=>{e=Vo(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||Lo(ee(t))?e:J.trim(e)})(s,e,t),e=((e,t,r)=>{var r=r.selection?{forced_root_block:!1,...r}:r,e=e.parse(t,r),n=e,t=e=>"br"===(null==e?void 0:e.name),r=n.lastChild;if(t(r)){const n=r.prev;t(n)&&(r.remove(),n.remove())}return e})(d,e,t);return"tree"===t.format?e:(r=a,n=i,o=l,t=t,n=n,o=o,e=e,n=Og(n,o).serialize(e),o=n,!t.no_events&&r?(e=r,n={...t,content:o},e.dispatch("PostProcess",n).content):o)},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:D(fy,d,t),getTempAttrs:$(t),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter};var r,c,u},py=(e,t)=>{e=gy(e,t);return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs,getNodeFilters:e.getNodeFilters,getAttributeFilters:e.getAttributeFilters,removeNodeFilter:e.removeNodeFilter,removeAttributeFilter:e.removeAttributeFilter}},hy=(o,e,t={})=>{r=e;var r,t={format:"html",...t,set:!0,content:r};return P0(o,t).map(e=>{n=o,t=e.content,r=e;var t,r,n=iy(n).editor.setContent(t,r);return L0(o,n.html,e),n.content}).getOr(e)},vy="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),by="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),yy="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Cy=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],wy=(t,e)=>{e=L(e,e=>Q(t,e));return Re(e)},xy=(e,t)=>{const r=J.makeMap(e.plugins," "),n=L(t,e=>Q(r,e));return Re(n)},ky=t=>Ce(Cy,e=>e.name===t).fold(()=>t,e=>e.replacedWith?t+", replaced by "+e.replacedWith:t),Ey=ae.DOM,Sy=e=>W.from(e).each(e=>e.destroy()),_y=(()=>{const r={};return{add:(e,t)=>{r[e]=t},get:e=>r[e]||{icons:{}},has:e=>Q(r,e)}})(),Ny=Ii.ModelManager,Ry=(e,t)=>t.dom[e],Ay=(e,t)=>parseInt(yn(t,e),10),Oy=D(Ry,"clientWidth"),Ty=D(Ry,"clientHeight"),By=D(Ay,"margin-top"),Dy=D(Ay,"margin-left"),Py=n=>{const o=[],a=()=>{var e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,getArgs:e}},i=()=>W.from(o[0]),s=()=>{Y(o,e=>{e.reposition()})},l=t=>{we(o,e=>e===t).each(e=>{o.splice(e,1)})},t=(r,e=!0)=>{return n.removed||(t=(t=n).inline?t.getBody():t.getContentAreaContainer(),!W.from(t).map(ee).map(rn).getOr(!1))?{}:(e&&n.dispatch("BeforeOpenNotification",{notification:r}),Ce(o,e=>{return!((e=a().getArgs(e)).type!==r.type||e.text!==r.text||e.progressBar||e.timeout||r.progressBar||r.timeout)}).getOrThunk(()=>{n.editorManager.setActive(n);const e=a().open(r,()=>{l(e),s(),i().fold(()=>n.focus(),e=>Uf(ee(e.getEl())))});return t=e,o.push(t),s(),n.dispatch("OpenNotification",{notification:{...e}}),e;var t}));var t},e=$(o);return(r=n).on("SkinLoaded",()=>{var e=ed(r);e&&t({text:e,type:"warning",timeout:0},!1),s()}),r.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(s)}),r.on("remove",()=>{Y(o.slice(),e=>{a().close(e)})}),{open:t,close:()=>{i().each(e=>{a().close(e),l(e),s()})},getNotifications:e};var r},Ly=Ii.PluginManager,My=Ii.ThemeManager,Iy=r=>{let n=[];const o=()=>{var e=r.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:e,alert:e,confirm:e,close:e}},a=(t,r)=>(...e)=>r?r.apply(t,e):void 0,i=t=>{r.dispatch("CloseWindow",{dialog:t}),0===(n=L(n,e=>e!==t)).length&&r.focus()},s=e=>{r.editorManager.setActive(r),Gf(r),r.ui.show();var t,e=e();return t=e,n.push(t),r.dispatch("OpenWindow",{dialog:t}),e};return r.on("remove",()=>{Y(n,e=>{o().close(e)})}),{open:(e,t)=>s(()=>o().open(e,t,i)),openUrl:e=>s(()=>o().openUrl(e,i)),alert:(e,t,r)=>{var n=o();n.alert(e,a(r||n,t))},confirm:(e,t,r)=>{var n=o();n.confirm(e,a(r||n,t))},close:()=>{W.from(n[n.length-1]).each(e=>{o().close(e),i(e)})}}},Fy=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Uy=(e,t)=>{e._skinLoaded?Fy(e,t):e.on("SkinLoaded",()=>{Fy(e,t)})},zy=(e,t,r)=>{Fm(e,t,{message:r}),console.error(r)},jy=(e,t,r)=>r?`Failed to load ${e}: ${r} from url `+t:`Failed to load ${e} url: `+t,Hy=(e,...t)=>{var r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},Vy=(t,e)=>{const r=t.editorManager.baseURL+"/skins/content",n=`content${t.editorManager.suffix}.css`;return C(e,e=>/^[a-z0-9\-]+$/i.test(e)&&!t.inline?r+`/${e}/`+n:t.documentBaseURI.toAbsolute(e))},qy=(n,o)=>{const a={};return{findAll:(e,r=ce)=>{e=L((e=e)?Be(e.getElementsByTagName("img")):[],e=>{var t=e.src;return!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t===I.transparentSrc)&&(st(t,"blob:")?!n.isUploaded(t)&&r(e):!!st(t,"data:")&&r(e))}),e=C(e,t=>{const r=t.src;var e;return Q(a,r)?a[r].then(e=>j(e)?e:{image:t,blobInfo:e.blobInfo}):(e=((r,e)=>{const n=()=>Promise.reject("Invalid data URI");var t,o,a;return st(e,"blob:")?(o=r.getByUri(e),H(o)?Promise.resolve(o):(o=e,(st(o,"blob:")?(t=o,fetch(t).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${t} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):st(o,"data:")?(a=o,new Promise((e,t)=>{sb(a).bind(({type:e,data:t,base64Encoded:r})=>lb(e,t,r)).fold(()=>t("Invalid data URI"),e)})):Promise.reject("Unknown URI format")).then(t=>db(t).then(e=>ub(e,!1,e=>W.some(mb(r,t,e))).getOrThunk(n))))):st(e,"data:")?fb(r,e).fold(n,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(o,r).then(e=>(delete a[r],{image:t,blobInfo:e})).catch(e=>(delete a[r],e)),a[r]=e)});return Promise.all(e)}}},$y=()=>{let r={};const n=(e,t)=>({status:e,resultUri:t}),t=e=>e in r;return{hasBlobUri:t,getResultUri:e=>{e=r[e];return e?e.resultUri:null},isPending:e=>!!t(e)&&1===r[e].status,isUploaded:e=>!!t(e)&&2===r[e].status,markPending:e=>{r[e]=n(1,null)},markUploaded:(e,t)=>{r[e]=n(2,t)},removeFailed:e=>{delete r[e]},destroy:()=>{r={}}}};let Wy=0;const Ky=(l,i)=>{const n={},o=(t,a)=>new Promise((r,n)=>{const o=new XMLHttpRequest;o.open("POST",i.url),o.withCredentials=i.credentials,o.upload.onprogress=e=>{a(e.loaded/e.total*100)},o.onerror=()=>{n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=()=>{var e,t;o.status<200||300<=o.status?n("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&j(t.location)?r((e=i.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):n("Invalid JSON: "+o.responseText)};var e=new FormData;e.append("file",t.blob(),t.filename()),o.send(e)}),d=V(i.handler)?i.handler:o,c=(e,t)=>({url:t,blobInfo:e,status:!0}),u=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),m=(e,t)=>{J.each(n[e],e=>{e(t)}),delete n[e]};return{upload:(e,t)=>{return i.url||d!==o?(e=e,r=t,e=J.grep(e,e=>!l.isUploaded(e.blobUri())),Promise.all(J.map(e,e=>{if(l.isPending(e.blobUri())){const t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[],n[t].push(e)})}return a=e,i=d,s=r,l.markPending(a.blobUri()),new Promise(t=>{let r,e;try{const n=()=>{r&&(r.close(),e=q)},o=e=>{n(),l.markUploaded(a.blobUri(),e),m(a.blobUri(),c(a,e)),t(c(a,e))};e=t=>{t<0||100<t||W.from(r).orThunk(()=>W.from(s).map(O)).each(e=>{(r=e).progressBar.value(t)})},i(a,e).then(o,e=>{e=j(e)?{message:e}:e,n(),l.removeFailed(a.blobUri()),m(a.blobUri(),u(a,e)),t(u(a,e))})}catch(e){t(u(a,e))}});var a,i,s}))):new Promise(e=>{e([])});var r}}},Gy=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Yy=(e,t)=>Ky(t,{url:Ll(e),basePath:Ml(e),credentials:Il(e),handler:Fl(e)}),Xy=c=>{const u=(()=>{let r=[];const a=e=>{var t,r,n;if(e.blob&&e.base64)return n=e.id||"blobid"+Wy+++(n=()=>Math.round(4294967295*Math.random()).toString(36),"s")+(new Date).getTime().toString(36)+n()+n()+n(),t=e.name||n,r=e.blob,{id:$(n),name:$(t),filename:$(e.filename||t+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.type.toLowerCase()]||"dat")),blob:$(r),base64:$(e.base64),blobUri:$(e.blobUri||URL.createObjectURL(r)),uri:$(e.uri)};throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")},e=e=>Ce(r,e).getOrUndefined(),t=t=>e(e=>e.id()===t);return{create:(e,t,r,n,o)=>{if(j(e))return a({id:e,name:n,filename:o,blob:t,base64:r});if(se(e))return a(e);throw new Error("Unknown input type")},add:e=>{t(e.id())||r.push(e)},get:t,getByUri:t=>e(e=>e.blobUri()===t),getByData:(t,r)=>e(e=>e.base64()===t&&e.blob().type===r),findFirst:e,removeByUri:t=>{r=L(r,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{Y(r,e=>{URL.revokeObjectURL(e.blobUri())}),r=[]}}})();let t,e;const o=$y(),r=[],n=t=>e=>c.selection?t(e):[],a=(e,t,r)=>{let n=0;for(;-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1),-1!==n;);return e},i=(e,t,r)=>{var n=`src="${r}"`+(r===I.transparentSrc?' data-mce-placeholder="1"':"");return e=a(e,`src="${t}"`,n),a(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},m=(t,r)=>{Y(c.undoManager.data,e=>{"fragmented"===e.type?e.fragments=C(e.fragments,e=>i(e,t,r)):e.content=i(e.content,t,r)})},s=()=>(t=t||Yy(c,o),f().then(n(d=>{var e=C(d,e=>e.blobInfo);return t.upload(e,Gy(c)).then(n(e=>{const s=[];let l=!1;e=C(e,(e,t)=>{var r,n,o,{blobInfo:t,image:a}=d[t];let i=!1;return e.status&&Bl(c)?(e.url&&!it(a.src,e.url)&&(l=!0),u.removeByUri(a.src),ay(c)||(r=a,n=e.url,o=c.convertURL(n,"src"),m(r.src,n),cr(ee(r),{src:Tl(c)?n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":o}))):e.error&&(e.error.remove&&(m(a.src,I.transparentSrc),s.push(a),i=!0),r=c,n=e.error.message,Uy(r,Mi.translate(["Failed to upload image: {0}",n]))),{element:a,status:e.status,uploadUri:e.url,blobInfo:t,removed:i}});return 0<s.length&&!ay(c)?c.undoManager.transact(()=>{Y(Tn(s),e=>{var n,t=Mr(e);re(e),t.each((n=c,e=>{var t,r;r=e,(t=n).dom.isEmpty(r.dom)&&H(t.schema.getTextBlockElements()[Z(r)])&&te(e,_r('<br data-mce-bogus="1" />'))})),u.removeByUri(e.dom.src)})}):l&&c.undoManager.dispatchChange(),e}))}))),l=()=>Ol(c)?s():Promise.resolve([]),d=t=>Ee(r,e=>e(t)),f=()=>(e=e||qy(o,u)).findAll(c.getBody(),d).then(n(e=>{e=L(e,e=>j(e)?(Uy(c,e),!1):"blob"!==e.uriType);return ay(c)||Y(e,e=>{m(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e})),g=e=>e.replace(/src="(blob:[^"]+)"/g,(e,r)=>{var t=o.getResultUri(r);if(t)return'src="'+t+'"';let n=u.getByUri(r);return(n=n||be(c.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0))?'src="data:'+n.blob().type+";base64,"+n.base64()+'"':e});return c.on("SetContent",()=>{(Ol(c)?l:f)()}),c.on("RawSaveContent",e=>{e.content=g(e.content)}),c.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=g(e.content))}),c.on("PostRender",()=>{c.parser.addNodeFilter("img",e=>{Y(e,e=>{var t=e.attr("src");t&&!u.getByUri(t)&&(t=o.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:u,addFilter:e=>{r.push(e)},uploadImages:s,uploadImagesAuto:l,scanForImages:f,destroy:()=>{u.destroy(),o.destroy(),e=t=null}}},Qy={remove_similar:!0,inherit:!1},Jy={selector:"td,th",...Qy},Zy={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Jy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Jy},tablecellbordercolor:{styles:{borderColor:"%value"},...Jy},tablecellclass:{classes:["%value"],...Jy},tableclass:{selector:"table",classes:["%value"],...Qy},tablecellborderstyle:{styles:{borderStyle:"%value"},...Jy},tablecellborderwidth:{styles:{borderWidth:"%value"},...Jy}},eC=$(Zy),tC=J.each,rC=ae.DOM,nC=e=>H(e)&&se(e),oC=(e,t)=>{const l=t&&t.schema||ui({}),d=e=>{var t,e=j(e)?{name:e,classes:[],attrs:{}}:e,r=rC.create(e.name);return t=r,0<(e=e).classes.length&&rC.addClass(t,e.classes.join(" ")),rC.setAttribs(t,e.attrs),r},c=(t,e,r)=>{let n;var o=e[0],a=nC(o)?o.name:void 0,i=((e,t)=>{e=l.getElementRule(e.nodeName.toLowerCase()),e=null==e?void 0:e.parentsRequired;return!(!e||!e.length)&&(t&&K(e,t)?t:e[0])})(t,a);if(i)a===i?(n=o,e=e.slice(1)):n=i;else if(o)n=o,e=e.slice(1);else if(!r)return t;const s=n?d(n):rC.create("div");s.appendChild(t),r&&J.each(r,e=>{e=d(e);s.insertBefore(e,t)});a=nC(n)?n.siblings:void 0;return c(s,e,a)},r=rC.create("div");if(0<e.length){const t=e[0],l=d(t),n=nC(t)?t.siblings:void 0;r.appendChild(c(l,e.slice(1),n))}return r},aC=e=>{let t="div";const a={name:t,classes:[],attrs:{},selector:e=J.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,r,n,o)=>{switch(t){case"#":a.attrs.id=r;break;case".":a.classes.push(r);break;case":":-1!==J.inArray("checked disabled enabled read-only required".split(" "),r)&&(a.attrs[r]=r)}if("["===n){const e=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(a.attrs[e[1]]=e[2])}return""})),a.name=t||"div",a},iC=(r,e)=>{let n="",t=sd(r);if(""===t)return"";const o=e=>j(e)?e.replace(/%(\w+)/g,""):"",a=(e,t)=>rC.getStyle(null!=t?t:r.getBody(),e,!0);if(j(e)){const n=r.formatter.get(e);if(!n)return"";e=n[0]}if("preview"in e){const r=e.preview;if(!1===r)return"";t=r||t}let i,s=e.block||e.inline||"span";l=e.selector;var l=j(l)?(l=(l=l.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),J.map(l.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{var e=J.map(e.split(/(?:~\+|~|\+)/),aC),t=e.pop();return e.length&&(t.siblings=e),t}).reverse()):[];i=0<l.length?(l[0].name||(l[0].name=s),s=e.selector,oC(l,r)):oC([s],r);const d=rC.select(s,i)[0]||i.firstChild,c=(tC(e.styles,(e,t)=>{e=o(e);e&&rC.setStyle(d,t,e)}),tC(e.attributes,(e,t)=>{e=o(e);e&&rC.setAttrib(d,t,e)}),tC(e.classes,e=>{e=o(e);rC.hasClass(d,e)||rC.addClass(d,e)}),r.dispatch("PreviewFormats"),rC.setStyles(i,{position:"absolute",left:-65535}),r.getBody().appendChild(i),a("fontSize")),u=/px$/.test(c)?parseInt(c,10):0;return tC(t.split(" "),e=>{let t=a(e,d);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a(e),"#ffffff"===Iu(t).toLowerCase())||"color"===e&&"#000000"===Iu(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===u)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*u+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),r.dispatch("AfterPreviewFormats"),rC.remove(i),n},sC=i=>{const e=(i=>{const r={},n=(e,t)=>{e&&(j(e)?(le(t)||(t=[t]),Y(t,e=>{S(e.deep)&&(e.deep=!mm(e)),S(e.split)&&(e.split=!mm(e)||fm(e)),S(e.remove)&&mm(e)&&!fm(e)&&(e.remove="none"),mm(e)&&fm(e)&&(e.mixed=!0,e.block_expand=!0),j(e.classes)&&(e.classes=e.classes.split(/\s+/))}),r[e]=t):X(e,(e,t)=>{n(t,e)}))};return n((()=>{const n=i.dom,e=i.schema.type,t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(r={inline:"span",styles:{textDecoration:"line-through"},exact:!0},o={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==e?[a,r,o]:[r,a,o]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>ne(e)&&e.hasAttribute("href"),onformat:(r,e,t)=>{J.each(t,(e,t)=>{n.setAttrib(r,t,e)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{return null!=(e=null==e?void 0:e.customValue)?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};var r,o,a;return J.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{t[e]={block:e,remove:"all"}}),t})()),n(eC()),n(id(i)),{get:e=>H(e)?r[e]:r,has:e=>Q(r,e),register:n,unregister:e=>(e&&r[e]&&delete r[e],r)}})(i),s=Bi({});var t,r,a,n=i;n.addShortcut("meta+b","","Bold"),n.addShortcut("meta+i","","Italic"),n.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++)n.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);return n.addShortcut("access+7","",["FormatBlock",!1,"p"]),n.addShortcut("access+8","",["FormatBlock",!1,"div"]),n.addShortcut("access+9","",["FormatBlock",!1,"address"]),(a=i).on("mouseup keydown",e=>{var t,r,n,o;t=a,e=e.keyCode,r=a.selection.getRng().endContainer,r=oe(r)&&lt(r.data,Co),n=t.selection,o=t.getBody(),sv(t,null,r),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==rv||sv(t,hu(o,n.getStart())),37!==e&&39!==e||sv(t,hu(o,n.getStart()))}),ay(i)||(t=s,r=i,t.set({}),r.on("NodeChange",e=>{rb(r,e.element,t.get())}),r.on("FormatApply FormatRemove",e=>{e=W.from(e.node).map(e=>Yu(e)?e:e.startContainer).bind(e=>ne(e)?W.some(e):W.from(e.parentElement)).getOrThunk(()=>Zv(r));rb(r,e,t.get())})),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(e,t,r)=>{var n;n=i,e=e,t=t,r=r,h(n).formatter.apply(e,t,r)},remove:(e,t,r,n)=>{var o;o=i,e=e,t=t,r=r,n=n,h(o).formatter.remove(e,t,r,n)},toggle:(e,t,r)=>{var n;n=i,e=e,t=t,r=r,h(n).formatter.toggle(e,t,r)},match:(e,t,r,n)=>{return o=i,e=e,t=t,r=r,n=n,h(o).formatter.match(e,t,r,n);var o},closest:e=>{return t=i,e=e,h(t).formatter.closest(e);var t},matchAll:(e,t)=>{return r=i,e=e,t=t,h(r).formatter.matchAll(e,t);var r},matchNode:(e,t,r,n)=>{return o=i,e=e,t=t,r=r,n=n,h(o).formatter.matchNode(e,t,r,n);var o},canApply:e=>{return t=i,e=e,h(t).formatter.canApply(e);var t},formatChanged:(e,t,r,n)=>{return o=i,a=s,e=e,t=t,r=r,n=n,h(o).formatter.formatChanged(a,e,t,r,n);var o,a},getCssText:D(iC,i)}},lC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},dC=s=>{const l=Fi(),d=Bi(0),c=Bi(0),u={data:[],typing:!1,beforeChange:()=>{var e,t,r;e=s,t=d,r=l,h(e).undoManager.beforeChange(t,r)},add:(e,t)=>{return r=s,n=u,o=c,a=d,i=l,e=e,t=t,h(r).undoManager.add(n,o,a,i,e,t);var r,n,o,a,i},dispatchChange:()=>{s.setDirty(!0);var e=X0(s);e.bookmark=Zs(s.selection),s.dispatch("change",{level:e,lastLevel:Ae(u.data,c.get()).getOrUndefined()})},undo:()=>{return e=s,t=u,r=d,n=c,h(e).undoManager.undo(t,r,n);var e,t,r,n},redo:()=>{return e=s,t=c,r=u.data,h(e).undoManager.redo(t,r);var e,t,r},clear:()=>{var e,t,r;e=s,t=u,r=c,h(e).undoManager.clear(t,r)},reset:()=>{var e,t;e=s,t=u,h(e).undoManager.reset(t)},hasUndo:()=>{return e=s,t=u,r=c,h(e).undoManager.hasUndo(t,r);var e,t,r},hasRedo:()=>{return e=s,t=u,r=c,h(e).undoManager.hasRedo(t,r);var e,t,r},transact:e=>{return t=s,r=u,n=d,e=e,h(t).undoManager.transact(r,n,e);var t,r,n},ignore:e=>{var t,r;t=s,r=d,e=e,h(t).undoManager.ignore(r,e)},extra:(e,t)=>{var r,n,o;r=s,n=u,o=c,e=e,t=t,h(r).undoManager.extra(n,o,e,t)}};if(!ay(s)){var n=s,o=u,a=d;const i=Bi(!1),m=e=>{ry(o,!1,a),o.add({},e)};n.on("init",()=>{o.add()}),n.on("BeforeExecCommand",e=>{e=e.command;lC(e)||(ny(o,a),o.beforeChange())}),n.on("ExecCommand",e=>{var t=e.command;lC(t)||m(e)}),n.on("ObjectResizeStart cut",()=>{o.beforeChange()}),n.on("SaveContent ObjectResized blur",m),n.on("dragend",m),n.on("keyup",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(t=I.os.isMacOS()&&"Meta"===e.key,(33<=r&&r<=36||37<=r&&r<=40||45===r||e.ctrlKey||t)&&(m(),n.nodeChanged()),46!==r&&8!==r||n.nodeChanged(),i.get()&&o.typing&&!ey(X0(n),o.data[0])&&(n.isDirty()||n.setDirty(!0),n.dispatch("TypingUndo"),i.set(!1),n.nodeChanged()))}),n.on("keydown",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(33<=r&&r<=36||37<=r&&r<=40||45===r?o.typing&&m(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(r<16||20<r)||224===r||91===r||o.typing||t?(I.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&o.beforeChange():(o.beforeChange(),ry(o,!0,a),o.add({},e),i.set(!0))))}),n.on("mousedown",e=>{o.typing&&m(e)}),n.on("input",e=>{e.inputType&&("insertReplacementText"===e.inputType||"insertText"===e.inputType&&null===e.data||"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)&&m(e)}),n.on("AddUndo Undo Redo ClearUndos",e=>{e.isDefaultPrevented()||n.nodeChanged()})}return(e=s).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),u;var e},cC=[9,27,ie.HOME,ie.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ie.DOWN,ie.UP,ie.LEFT,ie.RIGHT].concat(I.browser.isFirefox()?[224]:[]),uC="data-mce-placeholder",mC=e=>"keydown"===e.type||"keyup"===e.type,fC=e=>{e=e.keyCode;return e===ie.BACKSPACE||e===ie.DELETE},gC=(e,t)=>({from:e,to:t}),pC=(e,t)=>{var e=ee(e),r=ee(t.container());return Kp(e,r).map(e=>({block:e,position:t}))},hC=(t,e)=>dn(e,e=>Po(e)||mo(e.dom),e=>F(e,t)).filter(nr).getOr(t),vC=e=>{e=(e=>{const t=Vr(e);return we(t,No).fold($(t),e=>t.slice(0,e))})(e);return Y(e,re),e},bC=(e,t)=>{t=Xg(t,e);return Ce(t.reverse(),e=>U(e)).each(re)},yC=(e,t,r,n)=>{if(U(r))return Uo(r),mu(r.dom);0===L(jr(n),e=>!U(e)).length&&U(t)&&En(n,Nr("br"));r=uu(r.dom,z.before(n.dom));return Y(vC(t),e=>{En(n,e)}),bC(e,t),r},CC=(e,t,r)=>{if(U(r)){if(U(t)){const e=e=>{const r=(e,t)=>$r(e).fold(()=>t,e=>Ro(e)?r(e,t.concat(ts(e))):t);return r(e,[])},n=ve(e(r),(e,t)=>(Nn(e,t),t),Fo());An(t),te(t,n)}return re(r),mu(t.dom)}const n=fu(r.dom);return Y(vC(t),e=>{te(r,e)}),bC(e,t),n},wC=(e,t)=>{du(e,t.dom).bind(e=>W.from(e.getNode())).map(ee).filter(Ao).each(re)},xC=(e,t,r)=>{return wC(!0,t),wC(!1,r),n=t,o=r,(Br(o,n)?(o=o,n=n,n=Xg(n,o),W.from(n[n.length-1])):W.none()).fold(D(CC,e,t,r),D(yC,e,t,r));var n,o},kC=(e,t,r,n)=>t?xC(e,n,r):xC(e,r,n),EC=(t,r)=>{const n=ee(t.getBody()),e=(o=n.dom,a=r,((i=t.selection.getRng()).collapsed?(s=o,l=a,o=i,o=pC(s,z.fromRangeStart(o)),a=o.bind(e=>iu(l,s,e.position).bind(e=>pC(s,e).map(e=>{return t=s,r=l,n=e,_(n.position.getNode())&&!U(n.block)?du(!1,n.block.dom).bind(e=>e.isEqual(n.position)?iu(r,t,e).bind(e=>pC(t,e)):W.some(n)).getOr(n):n;var t,r,n}))),Gt(o,a,gC).filter(e=>{return t=e,!F(t.from.block,t.to.block)&&((e,t)=>{e=ee(e);return F(hC(e,t.from.block),hC(e,t.to.block))})(s,e)&&(t=e,!1===k(t.from.block.dom))&&!1===k(t.to.block.dom)&&(t=e=>Oo(e)||Na(e.dom))((e=e).from.block)&&t(e.to.block);var t})):W.none()).map(e=>()=>{kC(n,r,e.from.block,e.to.block).each(e=>{t.selection.setRng(e.toRange())})}));var o,a,i,s,l;return e},SC=(e,t)=>{t=ee(t),e=D(F,e);return ln(t,Po,e).isSome()},_C=(e,t)=>{if(e.selection.isCollapsed())return W.none();var r,n,o,a,i,s=ee(e.getBody());if(n=s,o=e.selection.getRng(),a=uu(n.dom,z.fromRangeStart(o)).isNone(),i=cu(n.dom,z.fromRangeEnd(o)).isNone(),n=n,o=o,!SC(n,o.startContainer)&&!SC(n,o.endContainer)&&a&&i)return r=e,W.some(()=>{r.setContent(""),r.selection.setCursorLocation()});{var l=s,d=e.selection;const c=d.getRng();return Gt(Kp(l,ee(c.startContainer)),Kp(l,ee(c.endContainer)),(e,t)=>F(e,t)?W.none():W.some(()=>{c.deleteContents(),kC(l,!0,e,t).each(e=>{d.setRng(e.toRange())})})).getOr(W.none())}},NC=(e,t,r,n,o)=>W.from(t._selectionOverrides.showCaret(e,r,n,o)),RC=(e,t)=>{return e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?W.none():W.some(((t=(e=t).ownerDocument.createRange()).selectNode(e),t))},AC=(e,t,r)=>{return t.collapsed?(e=e,n=t,r=r,n=zc(1,e.getBody(),n),n=z.fromRangeStart(n),o=n.getNode(),(bc(o)?NC(1,e,o,!n.isAtEnd(),!1):(o=n.getNode(!0),bc(o)?NC(1,e,o,!1,!1):(o=kh(e.dom.getRoot(),n.getNode()),bc(o)?NC(1,e,o,!1,r):W.none()))).getOr(t)):t;var n,o},OC=e=>Kg(e)||Vg(e),TC=e=>Gg(e)||qg(e),BC=(t,r,e,n,o,a)=>{NC(n,t,a.getNode(!o),o,!0).each(e=>{if(r.collapsed){const t=r.cloneRange();o?t.setEnd(e.startContainer,e.startOffset):t.setStart(e.endContainer,e.endOffset),t.deleteContents()}else r.deleteContents();t.selection.setRng(e)}),n=t.dom,a=e,oe(a)&&0===a.data.length&&n.remove(a)},DC=(e,t)=>{{var r=e,n=t;const o=r.selection.getRng();if(!oe(o.commonAncestorContainer))return W.none();const a=n?on.Forwards:on.Backwards,i=ru(r.getBody()),s=D(qc,n?i.next:i.prev),l=n?OC:TC,d=Hc(a,r.getBody(),o),c=s(d),u=c&&jp(n,c);if(!u||!$c(d,u))return W.none();if(l(u))return W.some(()=>BC(r,o,d.getNode(),a,n,u));const m=s(u);return m&&l(m)&&$c(u,m)?W.some(()=>BC(r,o,d.getNode(),a,n,m)):W.none()}},PC=(e,t)=>{e=e.getBody();return t?mu(e).filter(Kg):fu(e).filter(Gg)},LC=e=>{const t=e.selection.getRng();return!t.collapsed&&(PC(e,!0).exists(e=>e.isEqual(z.fromRangeStart(t)))||PC(e,!1).exists(e=>e.isEqual(z.fromRangeEnd(t))))},MC=nl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),IC=(o,a,i)=>iu(a,o,i).bind(e=>{{if(r=e.getNode(),H(r)&&(Po(ee(r))||Bo(ee(r)))||((t,e,r,n)=>{const o=e=>Ro(ee(e))&&!Pc(r,n,t);return jc(!e,r).fold(()=>jc(e,n).fold(P,o),o)})(o,a,i,e))return W.none();if(a&&k(e.getNode())||!a&&k(e.getNode(!0))){r=o;var t=i;const n=e.getNode(!a);return Kp(ee(r),ee(t.getNode())).map(e=>U(e)?MC.remove(e.dom):MC.moveToElement(n)).orThunk(()=>W.some(MC.moveToElement(n)))}return a&&Gg(i)||!a&&Kg(i)?W.some(MC.moveToPosition(e)):W.none()}var r}),FC=(e,t)=>W.from(kh(e.getBody(),t)),UC=(s,l)=>{var e=s.selection.getNode();return FC(s,e).filter(k).fold(()=>{return e=s.getBody(),t=l,r=s.selection.getRng(),r=zc(t?1:-1,e,r),r=z.fromRangeStart(r),i=ee(e),(!t&&Gg(r)?W.some(MC.remove(r.getNode(!0))):t&&Kg(r)?W.some(MC.remove(r.getNode())):!t&&Kg(r)&&lp(i,r)?dp(i,r).map(e=>MC.remove(e.getNode())):t&&Gg(r)&&sp(i,r)?cp(i,r).map(e=>MC.remove(e.getNode())):(n=e,i=o=t,e=(a=r).getNode(!i),i=i?"after":"before",ne(e)&&e.getAttribute("data-mce-caret")===i?(e=o,i=a.getNode(!o),(de(i)?W.none():e&&k(i.nextSibling)?W.some(MC.moveToElement(i.nextSibling)):!e&&k(i.previousSibling)?W.some(MC.moveToElement(i.previousSibling)):W.none()).orThunk(()=>IC(n,o,a))):IC(n,o,a).bind(e=>{return t=n,r=a,e.fold(e=>W.some(MC.remove(e)),e=>W.some(MC.moveToElement(e)),e=>Pc(r,e,t)?W.none():W.some(MC.moveToPosition(e)));var t,r}))).map(e=>()=>{return e.fold(e=>(o._selectionOverrides.hideFakeCaret(),Mp(o,a,ee(e)),!0),(n=a=l,e=>{e=n?z.before(e):z.after(e);return r.selection.setRng(e.toRange()),!0}),(t=r=o=s,e=>(t.selection.setRng(e.toRange()),!0)));var t,r,n,o,a});var e,t,r,n,o,a,i},()=>W.some(q))},zC=e=>{var t=e.dom,r=e.selection,n=kh(e.getBody(),r.getNode());if(mo(n)&&t.isBlock(n)&&t.isEmpty(n)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(e),r.setRng(z.before(e).toRange())}return!0},jC=(e,t)=>{return e.selection.isCollapsed()?UC(e,t):(n=t,t=(r=e).selection.getNode(),k(t)&&!fo(t)?FC(r,t.parentNode).filter(k).fold(()=>W.some(()=>{var e=ee(r.getBody());Y(Wn(e,".mce-offscreen-selection"),re),Mp(r,n,ee(r.selection.getNode())),Gp(r)}),()=>W.some(q)):LC(r)?W.some(()=>{Qp(r,r.selection.getRng(),ee(r.getBody()))}):W.none());var r,n},HC=(e,t)=>{return e.selection.isCollapsed()?(r=e,n=t,e=z.fromRangeStart(r.selection.getRng()),iu(n,r.getBody(),e).filter(e=>(n?jg:Hg)(e)).bind(e=>Lc(n?0:-1,e)).map(e=>()=>r.selection.select(e))):W.none();var r,n},VC=oe,qC=e=>VC(e)&&e.data[0]===jo,$C=e=>VC(e)&&e.data[e.data.length-1]===jo,WC=e=>{return(null!=(e=e.ownerDocument)?e:document).createTextNode(jo)},KC=(e,t)=>{return e?(e=t,VC(e.previousSibling)?($C(e.previousSibling)||e.previousSibling.appendData(jo),e.previousSibling):VC(e)?(qC(e)||e.insertData(0,jo),e):(o=WC(e),null!=(n=e.parentNode)&&n.insertBefore(o,e),o)):(n=t,VC(n.nextSibling)?(qC(n.nextSibling)||n.nextSibling.insertData(0,jo),n.nextSibling):VC(n)?($C(n)||n.appendData(jo),n):(e=WC(n),n.nextSibling?null!=(r=n.parentNode)&&r.insertBefore(e,n.nextSibling):null!=(r=n.parentNode)&&r.appendChild(e),e));var r,n,o},GC=D(KC,!0),YC=D(KC,!1),XC=(e,t)=>oe(e.container())?KC(t,e.container()):KC(t,e.getNode()),QC=(e,t)=>{t=t.get();return t&&e.container()===t&&Ko(t)},JC=(t,e)=>e.fold(e=>{uc(t.get());e=GC(e);return t.set(e),W.some(z(e,e.length-1))},e=>mu(e).map(e=>{if(QC(e,t)){const e=t.get();return z(e,1)}uc(t.get());e=XC(e,!0);return t.set(e),z(e,1)}),e=>fu(e).map(e=>{if(QC(e,t)){const e=t.get();return z(e,e.length-1)}uc(t.get());e=XC(e,!1);return t.set(e),z(e,e.length-1)}),e=>{uc(t.get());e=YC(e);return t.set(e),W.some(z(e,1))}),ZC=(t,r)=>{for(let e=0;e<t.length;e++){var n=t[e].apply(null,r);if(n.isSome())return n}return W.none()},e1=nl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),t1=(e,t)=>Dc(t,e)||e,r1=(e,t,r)=>{const n=Hp(r),o=t1(t,n.container());return zp(e,o,n).fold(()=>cu(o,n).bind(D(zp,e,o)).map(e=>e1.before(e)),W.none)},n1=(e,t)=>null===hu(e,t),o1=(e,t,r)=>zp(e,t,r).filter(D(n1,t)),a1=(e,t,r)=>{const n=Vp(r);return o1(e,t,n).bind(e=>uu(e,n).isNone()?W.some(e1.start(e)):W.none())},i1=(e,t,r)=>{const n=Hp(r);return o1(e,t,n).bind(e=>cu(e,n).isNone()?W.some(e1.end(e)):W.none())},s1=(e,t,r)=>{const n=Vp(r),o=t1(t,n.container());return zp(e,o,n).fold(()=>uu(o,n).bind(D(zp,e,o)).map(e=>e1.after(e)),W.none)},l1=e=>!Up(c1(e)),d1=(e,t,r)=>ZC([r1,a1,i1,s1],[e,t,r]).filter(l1),c1=e=>e.fold(p,p,p,p),u1=e=>e.fold($("before"),$("start"),$("end"),$("after")),m1=e=>e.fold(e1.before,e1.before,e1.after,e1.after),f1=e=>e.fold(e1.start,e1.start,e1.end,e1.end),g1=(r,e,n,t,o,a)=>Gt(zp(e,n,t),zp(e,n,o),(e,t)=>e!==t&&((e,t,r)=>{t=Dc(t,e),r=Dc(r,e);return H(t)&&t===r})(n,e,t)?e1.after(r?e:t):a).getOr(a),p1=(e,r)=>e.fold(ce,e=>{return t=r,!(u1(e=e)===u1(t)&&c1(e)===c1(t));var t}),h1=(e,t)=>e?t.fold(d(W.some,e1.start),W.none,d(W.some,e1.after),W.none):t.fold(W.none,d(W.some,e1.before),W.none,d(W.some,e1.end)),v1=(e,t,r)=>{var n=e?1:-1;return t.setRng(z(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},b1=((Ab=qb=qb||{})[Ab.Br=0]="Br",Ab[Ab.Block=1]="Block",Ab[Ab.Wrap=2]="Wrap",Ab[Ab.Eol=3]="Eol",(e,t)=>e===on.Backwards?Se(t):t),y1=(e,t,r,n)=>{var o=ru(r);let a=n;for(var i,s,l,d=[];a;){s=o,l=a;const r=t===on.Forwards?s.next(l):s.prev(l);if(!r)break;if(_(r.getNode(!1)))return t===on.Forwards?{positions:b1(t,d).concat([r]),breakType:qb.Br,breakAt:W.some(r)}:{positions:b1(t,d),breakType:qb.Br,breakAt:W.some(r)};if(r.isVisible()){if(e(a,r)){s=t,l=a,i=r;const e=_(i.getNode(s===on.Forwards))?qb.Br:!1===Pc(l,i)?qb.Block:qb.Wrap;return{positions:b1(t,d),breakType:e,breakAt:W.some(r)}}d.push(r)}a=r}return{positions:b1(t,d),breakType:qb.Eol,breakAt:W.none()}},C1=(r,n,o,e)=>n(o,e).breakAt.map(e=>{var t=n(o,e).positions;return r===on.Backwards?t.concat(e):[e].concat(t)}).getOr([]),w1=(e,o)=>be(e,(e,n)=>e.fold(()=>W.some(n),r=>Gt(Oe(r.getClientRects()),Oe(n.getClientRects()),(e,t)=>{e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?n:r}).or(e)),W.none()),x1=(t,e)=>Oe(e.getClientRects()).bind(e=>w1(t,e.left)),k1=D(y1,z.isAbove,-1),E1=D(y1,z.isBelow,1),S1=D(C1,-1,k1),_1=D(C1,1,E1),N1=(e,t)=>k1(e,t).breakAt.isNone(),R1=(e,t)=>E1(e,t).breakAt.isNone(),A1=(e,t)=>x1(S1(e,t),t),O1=(e,t)=>x1(_1(e,t),t),T1=k,B1=(e,t)=>Math.abs(e.left-t),D1=(e,t)=>Math.abs(e.right-t),P1=(e,o)=>Xe(e,(e,t)=>{var r=Math.min(B1(e,o),D1(e,o)),n=Math.min(B1(t,o),D1(t,o));return n===r&&Ve(t,"node")&&T1(t.node)||n<r?t:e}),L1=t=>{var e,r=e=>C(e,e=>{e=is(e);return e.node=t,e});return ne(t)?r(t.getClientRects()):oe(t)?((e=t.ownerDocument.createRange()).setStart(t,0),e.setEnd(t,t.data.length),r(e.getClientRects())):[]},M1=e=>ke(e,L1),I1=((t=$b=$b||{})[t.Up=-1]="Up",t[t.Down=1]="Down",(e,n,o,t,a,r)=>{let i=0;const s=[],l=t=>{let r=M1([t]);-1===e&&(r=r.reverse());for(let e=0;e<r.length;e++){const t=r[e];if(!o(t,d)){if(0<s.length&&n(t,Je(s))&&i++,t.line=i,a(t))return!0;s.push(t)}}return!1},d=Je(r.getClientRects());var c;return d&&(c=r.getNode())&&(l(c),((e,t,r)=>{let n=c;for(;n=Bc(n,e,ma,t);)if(r(n))return})(e,t,l)),s}),F1=D(I1,$b.Up,ds,cs),U1=D(I1,$b.Down,cs,ds),z1=e=>Je(e.getClientRects()),j1=t=>e=>e.line>t,H1=t=>e=>e.line===t,V1=(e,t)=>{e.selection.setRng(t),Ff(e,e.selection.getRng())},q1=(e,t,r)=>W.some(AC(e,t,r)),$1=(e,t,r,n,o,a)=>{var i=t===on.Forwards,s=ru(e.getBody()),s=D(qc,i?s.next:s.prev),n=i?n:o;if(!r.collapsed){const n=ms(r);if(a(n))return NC(t,e,n,t===on.Backwards,!1);if(LC(e)){const e=r.cloneRange();return e.collapse(t===on.Backwards),W.from(e)}}var o=Hc(t,e.getBody(),r);return n(o)?RC(e,o.getNode(!i)):(a=s(o),o=ta(r),a?n(a=jp(i,a))?NC(t,e,a.getNode(!i),i,!1):(s=s(a))&&n(s)&&$c(a,s)?NC(t,e,s.getNode(!i),i,!1):o?q1(e,a.toRange(),!1):W.none():o?W.some(r):W.none())},W1=(t,r,n,e,o,a)=>{var i=Hc(r,t.getBody(),n),s=Je(i.getClientRects()),l=r===$b.Down,d=t.getBody();if(!s)return W.none();if(LC(t)){const t=l?z.fromRangeEnd(n):z.fromRangeStart(n);return(l?O1:A1)(d,t).orThunk(()=>W.from(t)).map(e=>e.toRange())}var c=(l?U1:F1)(d,j1(1),i),c=L(c,H1(1)),s=s.left,u=P1(c,s);if(u&&a(u.node)){const n=Math.abs(s-u.left),e=Math.abs(s-u.right);return NC(r,t,u.node,n<e,!1)}if(a=e(i)?i.getNode():o(i)?i.getNode(!0):ms(n)){const n=((e,t,r,n)=>{t=ru(t);let o,a,i,s;var l=[];let d=0;s=1===e?(o=t.next,a=cs,i=ds,z.after(n)):(o=t.prev,a=ds,i=cs,z.before(n));var c=z1(s);do{if(s.isVisible()){const e=z1(s);if(!i(e,c)){0<l.length&&a(e,Je(l))&&d++;const t=is(e);if(t.position=s,t.line=d,r(t))return l;l.push(t)}}}while(s=o(s));return l})(r,d,j1(1),a);let e=P1(L(n,H1(1)),s);if(e)return q1(t,e.position.toRange(),!1);if(e=Je(L(n,H1(0))))return q1(t,e.position.toRange(),!1)}return 0===c.length?K1(t,l).filter(l?o:e).map(e=>AC(t,e.toRange(),!1)):W.none()},K1=(e,t)=>{var r,n=e.selection.getRng(),n=t?z.fromRangeEnd(n):z.fromRangeStart(n),o=(o=n.container(),r=e.getBody(),ln(ee(o),e=>Cc(e.dom),e=>e.dom===r).map(e=>e.dom).getOr(r));if(t){const e=E1(o,n);return Te(e.positions)}{const e=k1(o,n);return Oe(e.positions)}},G1=(t,e,r)=>K1(t,e).filter(r).exists(e=>(t.selection.setRng(e.toRange()),!0)),Y1=(e,t)=>{var r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},X1=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Q1=(t,e,r)=>JC(e,r).map(e=>(Y1(t,e),r)),J1=(t,r,e)=>{var n,o,a,i=t.getBody(),s=(n=t.selection.getRng(),o=i,s=e,a=z.fromRangeStart(n),n.collapsed?a:(n=z.fromRangeEnd(n),s?uu(o,n).getOr(n):cu(o,a).getOr(a)));return((i,s,l,d)=>{const e=jp(i,d),c=d1(s,l,e);return d1(s,l,e).bind(D(h1,i)).orThunk(()=>{{var t=i,r=s,n=l,o=c,e=d;const a=jp(t,e);return iu(t,n,a).map(D(jp,t)).fold(()=>o.map(m1),e=>d1(r,n,e).map(D(g1,t,r,n,a,e)).filter(D(p1,o))).filter(l1)}})})(e,D(Fp,t),i,s).bind(e=>Q1(t,r,e))},Z1=(e,t,r)=>!!ad(e)&&J1(e,t,r).isSome(),ew=(e,t,r)=>{return!!ad(t)&&(e=e,o=(t=t).selection.getRng(),o=e?z.fromRangeEnd(o):z.fromRangeStart(o),n=t,!!V(n.selection.getSel().modify))&&(e&&Xo(o)?v1(!0,t.selection,o):!(e||!Qo(o))&&v1(!1,t.selection,o));var n,o},tw=f=>{const g=Bi(null),p=D(Fp,f);return f.on("NodeChange",e=>{var r,n,o,t,a,i,s,l,d,c,u,m;ad(f)&&(((e,t,r)=>{t=C(Wn(ee(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),t=L(t,e),r=L(r,e);Y(_e(t,r),D(X1,!1)),Y(_e(r,t),D(X1,!0))})(p,f.dom,e.parents),t=f,a=g,m=a.get(),t.selection.isCollapsed()&&!t.composing&&m&&(i=z.fromRangeStart(t.selection.getRng()),!z.isTextPosition(i)||(u=i,Xo(u))||Qo(u)||(Y1(t,(u=m,t=i,z.isTextPosition(t)?(m=u,i=t,ic(m)&&i.container()===m?(s=m,l=i,d=lc(s.data.substr(0,l.offset())),c=lc(s.data.substr(l.offset())),0<(d.text+c.text).length?(dc(s),z(s,l.offset()-d.count)):l):cc(m,i)):(c=u,((s=t).container()===c.parentNode?(e,t)=>{const r=t.container(),n=((e,t)=>{e=ge(e,t);return-1===e?W.none():W.some(e)})(Be(r.childNodes),e).map(e=>e<t.offset()?z(r,t.offset()-1):t).getOr(t);return uc(e),n}:cc)(c,s)))),a.set(null))),r=p,n=f,o=g,d=e.parents,n.selection.isCollapsed())&&(d=L(d,r),Y(d,e=>{var t=z.fromRangeStart(n.selection.getRng());d1(r,n.getBody(),t).bind(e=>Q1(n,o,e))}))}),g},rw=D(ew,!0),nw=D(ew,!1),ow=(t,r,n)=>{var e;return!!ad(t)&&(e=K1(t,r).getOrThunk(()=>{var e=t.selection.getRng();return r?z.fromRangeEnd(e):z.fromRangeStart(e)}),d1(D(Fp,t),t.getBody(),e).exists(e=>{e=m1(e);return JC(n,e).exists(e=>(Y1(t,e),!0))}))},aw=(t,r)=>e=>JC(r,e).map(e=>()=>Y1(t,e)),iw=(n,o,a,i)=>{const s=n.getBody(),l=D(Fp,n);n.undoManager.ignore(()=>{var e,t,r;n.selection.setRng((e=a,t=i,(r=document.createRange()).setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r)),$p(n),d1(l,s,z.fromRangeStart(n.selection.getRng())).map(f1).bind(aw(n,o)).each(B)}),n.nodeChanged()},sw=(e,t,r)=>{if(e.selection.isCollapsed()&&ad(e)){var n=z.fromRangeStart(e.selection.getRng());{var a=e,o=t,i=r,s=n;e=a.getBody(),t=s.container();const l=Dc(t,e)||e,d=D(Fp,a),c=d1(d,l,s);return c.bind(e=>i?e.fold($(W.some(f1(e))),W.none,$(W.some(m1(e))),W.none):e.fold(W.none,$(W.some(m1(e))),W.none,$(W.some(f1(e))))).map(aw(a,o)).getOrThunk(()=>{const e=su(i,l,s),t=e.bind(e=>d1(d,l,e));return Gt(c,t,()=>zp(d,l,s).bind(e=>{return o=e,Gt(mu(o),fu(o),(e,t)=>{const r=jp(!0,e),n=jp(!1,t);return cu(o,r).forall(e=>e.isEqual(n))}).getOr(!0)?W.some(()=>{Mp(a,i,ee(e))}):W.none();var o})).getOrThunk(()=>t.bind(()=>e.map(e=>()=>{i?iw(a,o,s,e):iw(a,o,e,s)})))})}}return W.none()},lw=(e,t)=>{const r=ee(e.getBody()),n=ee(e.selection.getStart()),o=Xg(n,r);return we(o,t).fold($(o),e=>o.slice(0,e))},dw=e=>1===Kr(e),cw=(e,t)=>{const r=D(fv,e);return ke(t,e=>r(e)?[e.dom]:[])},uw=e=>{t=e;var t=lw(t,No);return cw(e,t)},mw=(a,i)=>{const s=L((e=a,lw(e,e=>{return No(e)||(e=e,1<Kr(e))})),dw);var e;return Te(s).bind(o=>{var e=z.fromRangeStart(a.selection.getRng());return Yp(i,e,o.dom)&&!gv(o)?W.some(()=>{var e=i,t=a,r=o,n=s;if(0===(n=cw(t,n)).length)Mp(t,e,r);else{const e=mv(r.dom,n);t.selection.setRng(e.toRange())}}):W.none()})},fw=(e,t)=>{var r,n,o=e.selection.getStart(),a=(r=e,n=(a=o).parentElement,_(a)&&!T(n)&&r.dom.isEmpty(n)||gv(ee(o))?mv(o,t):((e,t)=>{var{caretContainer:t,caretPosition:r}=uv(t);return e.insertNode(t.dom),r})(e.selection.getRng(),t));e.selection.setRng(a.toRange())},gw=e=>oe(e.startContainer),pw=(e,t)=>{if(e.selection.isCollapsed())return mw(e,t);var r,n,o=e;if(e=(t=o).selection.getRng(),0===(n=e).startOffset&&gw(n)&&(n=t,t=e.startContainer.parentElement,!T(t))&&fv(n,ee(t))&&(e=(t=n=e).startContainer.parentNode,r=t.endContainer.parentNode,!T(e)&&!T(r)&&e.isEqualNode(r)&&(e=t.endContainer,t.endOffset===(oe(e)?e:e.childNodes).length)||!n.endContainer.isEqualNode(n.commonAncestorContainer))){const a=uw(o);return W.some(()=>{$p(o);var e=o,t=a;0<(t=_e(t,uw(e))).length&&fw(e,t)})}return W.none()},hw=e=>{return(r=(t=e).selection.getRng()).collapsed&&(gw(r)||t.dom.isEmpty(r.startContainer))&&(r=t,r=r=ee(r.selection.getStart()),t=No,!ln(r,e=>pu(e.dom),t).isSome())&&fw(e,[]),!0;var t,r},vw=(e,t,r)=>H(r)?W.some(()=>{e._selectionOverrides.hideFakeCaret(),Mp(e,t,ee(r))}):W.none(),bw=(e,t)=>{if(e.selection.isCollapsed()){var r=e,n=t;const a=n?Vg:qg,i=n?on.Forwards:on.Backwards,s=Hc(i,r.getBody(),r.selection.getRng());return a(s)?vw(r,n,s.getNode(!n)):W.from(jp(n,s)).filter(e=>a(e)&&$c(s,e)).bind(e=>vw(r,n,e.getNode(!n)))}return t=t,o=(e=e).selection.getNode(),po(o)?vw(e,t,o):W.none();var o},yw=e=>pt(null!=e?e:"").getOr(0),Cw=(e,t)=>(e||"table"===Z(t)?"margin":"padding")+("rtl"===yn(t,"direction")?"-right":"-left"),ww=e=>{var r,t=kw(e);return!e.mode.isReadOnly()&&(1<t.length||(r=e,e=t,Ee(e,e=>{var t=Cw(Vl(r),e),t=wn(e,t).map(yw).getOr(0);return"false"!==r.dom.getContentEditable(e.dom)&&0<t})))},xw=e=>To(e)||Bo(e),kw=e=>L(Tn(e.selection.getSelectedBlocks()),e=>{return!xw(e)&&(t=e,!Mr(t).exists(xw))&&dn(e,e=>mo(e.dom)||k(e.dom)).exists(e=>mo(e.dom));var t}),Ew=(e,s)=>{var t;const l=e["dom"],r=ql(e),d=null!=(t=null==(t=/[a-z%]+$/i.exec(r))?void 0:t[0])?t:"px",c=yw(r),u=Vl(e);Y(kw(e),e=>{var t=l,r=s,n=u,o=c,a=d,e=e.dom,n=Cw(n,ee(e)),i=yw(t.getStyle(e,n));if("outdent"===r){const r=Math.max(0,i-o);t.setStyle(e,n,r?r+a:"")}else{const r=i+o+a;t.setStyle(e,n,r)}})},Sw=e=>Ew(e,"outdent"),_w=e=>{if(e.selection.isCollapsed()&&ww(e)){var t=e.dom,r=e.selection.getRng(),n=z.fromRangeStart(r),r=t.getParent(r.startContainer,t.isBlock);if(null!==r&&tp(ee(r),n))return W.some(()=>Sw(e))}return W.none()},Nw=(t,r,n)=>De([_w,jC,DC,(e,t)=>sw(e,r,t),EC,xh,HC,bw,_C,pw],e=>e(t,n)).filter(e=>t.selection.isEditable()),Rw=(r,n)=>{r.addCommand("delete",()=>{var e,t;e=r,t=n,Nw(e,t,!1).fold(()=>{$p(e),Gp(e)},B)}),r.addCommand("forwardDelete",()=>{var t,e;t=r,e=n,Nw(t,e,!0).fold(()=>{return e=t,qp(e,"ForwardDelete");var e},B)})},Aw=e=>void 0===e.touches||1!==e.touches.length?W.none():W.some(e.touches[0]),Ow=(e,t)=>Q(e,t.nodeName),Tw=e=>e.dom.create(kl(e),El(e)),Bw=t=>{var r=t.dom,n=t.selection,o=t.schema,a=o.getBlockElements(),i=n.getStart(),s=t.getBody();let l,d,c=!1;var u=kl(t);if(i&&ne(i)){var m=s.nodeName.toLowerCase();if(o.isValidChild(m,u.toLowerCase())&&(f=a,m=s,u=i,!G(Yg(ee(u),ee(m)),e=>Ow(f,e.dom)))){var f,g,p,i=n.getRng(),{startContainer:u,startOffset:m,endContainer:h,endOffset:v}=i,b=sg(t);let e=s.firstChild;for(;e;)if(ne(e)&&(g=o,p=e,Aa(g,p)&&(g=wa(g.getBlockElements()),xa(g,p))),g=o,p=e,!oe(p)&&(!ne(p)||Ow(g.getBlockElements(),p)||Nu(p)||Oa(g,p)))l=null,e=e.nextSibling;else{if(((e,t)=>{if(oe(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||Ow(e,t.nextSibling)))return!0}return!1})(a,e)){e=(d=e).nextSibling,r.remove(d);continue}l||(l=Tw(t),s.insertBefore(l,e),c=!0),e=(d=e).nextSibling,l.appendChild(d)}c&&b&&(i.setStart(u,m),i.setEnd(h,v),n.setRng(i),t.nodeChanged())}}},Dw=(e,t,r)=>{var e=ee(Tw(e)),n=Fo(),r=(te(e,n),r(t,e),document.createRange());return r.setStartBefore(n.dom),r.setEndBefore(n.dom),r},Pw=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),Lw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(ea(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},Mw=(e,t)=>{r=e;var r=un(ee(r.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull();if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Lw(e,r)):void(Yo(r)&&(Lw(e,r),e.undoManager.add()))},Iw=k,Fw=(e,t,r)=>{const n=ru(e.getBody()),o=D(qc,1===t?n.next:n.prev);if(r.collapsed){const n=e.dom.getParent(r.startContainer,"PRE");if(n&&!o(z.fromRangeStart(r))){const r=ee((e=>{e=e.dom.create(kl(e));return e.innerHTML='<br data-mce-bogus="1">',e})(e));(1===t?Sn:En)(ee(n),r),e.selection.select(r.dom,!0),e.selection.collapse()}}},Uw=(i,s)=>(e=>{const t=((e,t)=>{const r=t?e.getEnd(!0):e.getStart(!0);return Up(r)?!t:t})(i.selection,s)?on.Forwards:on.Backwards,r=e.selection.getRng();return n=t,o=e,a=r,$1(o,n,a,Kg,Gg,Iw).orThunk(()=>(Fw(e,t,r),W.none()));var n,o,a})(i).exists(e=>(V1(i,e),!0)),zw=(t,i)=>(e=>{const t=i?1:-1,r=e.selection.getRng();return n=t,o=e,a=r,W1(o,n,a,e=>Kg(e)||$g(e),e=>Gg(e)||Wg(e),Iw).orThunk(()=>(Fw(e,t,r),W.none()));var n,o,a})(t).exists(e=>(V1(t,e),!0)),jw=(e,t)=>G1(e,t,t?Gg:Kg),Hw=(r,n)=>PC(r,!n).map(e=>{var e=e.toRange(),t=r.selection.getRng();return n?e.setStart(t.startContainer,t.startOffset):e.setEnd(t.endContainer,t.endOffset),e}).exists(e=>(V1(r,e),!0)),Vw=e=>K(["figcaption"],Z(e)),qw=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const a=ee(n.getBody()),i=z.fromRangeStart(n.selection.getRng());return((e,t)=>{t=D(F,t);return dn(ee(e.container()),No,t).filter(Vw)})(i,a).exists(()=>{if(e=a,t=o,r=i,(t?R1:N1)(e.dom,r)){const i=Dw(n,a,o?te:_n);return n.selection.setRng(i),!0}var e,t,r;return!1})})(e,t),$w=(e,t)=>{return a=e,(t?W.from(a.dom.getParent(a.selection.getNode(),"details")).map(e=>{return e=e,r=(t=a).selection.getRng(),r=z.fromRangeStart(r),!(t.getBody().lastChild!==e||!R1(e,r)||(t.execCommand("InsertNewBlockAfter"),0));var t,r}):W.from(a.dom.getParent(a.selection.getNode(),"summary")).bind(o=>W.from(a.dom.getParent(o,"details")).map(e=>{return e=e,r=o,n=(t=a).selection.getRng(),n=z.fromRangeStart(n),!(t.getBody().firstChild!==e||!N1(r,n)||(t.execCommand("InsertNewBlockBefore"),0));var t,r,n}))).getOr(!1);var a},Ww={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Kw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,v=(e,...t)=>()=>e.apply(null,t),Gw=(e,t)=>{return Ce((e=e,r=t,ke((e=e,C(e,e=>({...Ww,...e}))),e=>Kw(e,r)?[e]:[])),e=>e.action());var r},Yw=(e,t)=>{return De((e=e,r=t,ke((e=e,C(e,e=>({...Ww,...e}))),e=>Kw(e,r)?[e]:[])),e=>e.action());var r},Xw=(t,e)=>{var e=e?on.Forwards:on.Backwards,r=t.selection.getRng();return $1(t,e,r,Vg,qg,po).exists(e=>(V1(t,e),!0))},Qw=(t,e)=>{var e=e?1:-1,r=t.selection.getRng();return W1(t,e,r,Vg,qg,po).exists(e=>(V1(t,e),!0))},Jw=(e,t)=>G1(e,t,t?qg:Vg),Zw=nl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ex={...Zw,none:e=>Zw.none(e)},tx=(e,t,r)=>ke(Vr(e),e=>Or(e,t)?r(e)?[e]:[]:tx(e,t,r)),rx=(e,t)=>mn(e,"table",t),nx=(e,t,r,n,o=ce)=>{const a=1===n;if(!a&&r<=0)return ex.first(e[0]);if(a&&r>=e.length-1)return ex.last(e[e.length-1]);{const a=r+n,i=e[a];return o(i)?ex.middle(t,i):nx(e,t,a,n,o)}},ox=(r,e)=>rx(r,e).bind(e=>{const t=tx(e,"th,td",ce);return we(t,e=>F(r,e)).map(e=>({index:e,all:t}))}),ax=(e,t,r,n,o)=>{var a,i,s,r=Wn(ee(r),"td,th,caption").map(e=>e.dom),r=L((a=e,e=r,ke(e,e=>{var t={left:(t=is(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:t.left,y:a(t),cell:e},{x:t.right,y:a(t),cell:e}]})),e=>t(e,o));return e=r,i=n,s=o,be(e,(e,n)=>e.fold(()=>W.some(n),e=>{var t=Math.sqrt(Math.abs(e.x-i)+Math.abs(e.y-s)),r=Math.sqrt(Math.abs(n.x-i)+Math.abs(n.y-s));return W.some(r<t?n:e)}),W.none()).map(e=>e.cell)},ix=D(ax,e=>e.bottom,(e,t)=>e.y<t),sx=D(ax,e=>e.top,(e,t)=>e.y>t),lx=(e,t,r)=>{var n,o,a=e(t,r);return a.breakType===qb.Wrap&&0===a.positions.length||!_(r.getNode())&&a.breakType===qb.Br&&1===a.positions.length?(n=e,o=t,!a.breakAt.exists(e=>n(o,e).breakAt.isSome())):a.breakAt.isNone()},dx=D(lx,k1),cx=D(lx,E1),ux=(t,e,r,n)=>{var o=t.selection.getRng(),a=e?1:-1;return!(!vc()||!((e,t,r)=>{const n=z.fromRangeStart(t);return du(!e,r).exists(e=>e.isEqual(n))})(e,o,r)||(NC(a,t,r,!e,!1).each(e=>{V1(t,e)}),0))},mx=(a,i,t)=>{n=t.getNode(!!i);const e=ro(n)?W.some(n):W.none(),r=!1===i;var n;e.fold(()=>V1(a,t.toRange()),o=>du(r,a.getBody()).filter(e=>e.isEqual(t)).fold(()=>V1(a,t.toRange()),e=>{var t,r,n;t=i,n=o,(r=a).undoManager.transact(()=>{var e=t?Sn:En,e=Dw(r,ee(n),e);V1(r,e)})}))},fx=(e,t,r,n)=>{var o,a,i,s,l,d,c,u,m,f,g=e.selection.getRng(),g=z.fromRangeStart(g),p=e.getBody();if(!t&&dx(n,g)){o=p,s=a=r,l=i=g;const n=Oe(l.getClientRects()).bind(e=>ix(s,e.left,e.top)).bind(e=>{return x1(fu(t=e).map(e=>k1(t,e).positions.concat(e)).getOr([]),l);var t}).orThunk(()=>Oe(i.getClientRects()).bind(e=>w1(S1(o,z.before(a)),e.left))).getOr(z.before(a));return mx(e,t,n),!0}if(t&&cx(n,g)){d=p,m=c=r,f=u=g;const n=Te(f.getClientRects()).bind(e=>sx(m,e.left,e.top)).bind(e=>{return x1(mu(t=e).map(e=>[e].concat(E1(t,e).positions)).getOr([]),f);var t}).orThunk(()=>Oe(u.getClientRects()).bind(e=>w1(_1(d,z.after(c)),e.left))).getOr(z.after(c));return mx(e,t,n),!0}return!1},gx=(r,n,o)=>W.from(r.dom.getParent(r.selection.getNode(),"td,th")).bind(t=>W.from(r.dom.getParent(t,"table")).map(e=>o(r,n,e,t))).getOr(!1),px=(e,t)=>gx(e,t,ux),hx=(e,t)=>gx(e,t,fx),vx=(t,r,e)=>e.fold(W.none,W.none,(e,t)=>{return((e,n)=>{const o=t=>{for(let e=0;e<t.childNodes.length;e++){var r=ee(t.childNodes[e]);if(n(r))return W.some(r);r=o(t.childNodes[e]);if(r.isSome())return r}return W.none()};return o(e.dom)})(t,pg).map(e=>{return e=of.exact(e,0,e,0),cf(e)})},e=>(t.execCommand("mceTableInsertRowAfter"),bx(t,r,e))),bx=(e,t,r)=>{return vx(e,t,(o=fn,ox(n=r,void 0).fold(()=>ex.none(n),e=>nx(e.all,n,e.index,1,o))));var n,o},yx=(e,t,r)=>{return vx(e,t,(o=fn,ox(n=r,void 0).fold(()=>ex.none(),e=>nx(e.all,n,e.index,-1,o))));var n,o},Cx=(t,r)=>{const n=["table","li","dl"],o=ee(t.getBody()),a=e=>{var t=Z(e);return F(e,o)||K(n,t)},e=t.selection.getRng();return i=ee(r?e.endContainer:e.startContainer),s=a,l=["td","th"],((d=s)(s=i)?W.none():K(l,Z(s))?W.some(s):cn(s,l.join(","),e=>Or(e,"table")||d(e))).map(e=>(rx(e,a).each(e=>{t.model.table.clearSelectedCells(e.dom)}),t.selection.collapse(!r),(r?bx:yx)(t,a,e).each(e=>{t.selection.setRng(e)}),!0)).getOr(!1);var i,s,l,d},wx=(e,t)=>({container:e,offset:t}),xx=ae.DOM,kx=t=>e=>t===e?-1:0,Ex=(e,t,r)=>{var n;return oe(e)&&0<=t?W.some(wx(e,t)):(n=os(xx),W.from(n.backwards(e,t,kx(e),r)).map(e=>wx(e.container,e.container.data.length)))},Sx=(e,r,n)=>{if(!oe(e))return W.none();const t=e.data;if(0<=r&&r<=t.length)return W.some(wx(e,r));{const t=os(xx);return W.from(t.backwards(e,r,kx(e),n)).bind(e=>{var t=e.container.data;return Sx(e.container,r+t.length,n)})}},_x=(e,t,r)=>{if(!oe(e))return W.none();const n=e.data;var o;return t<=n.length?W.some(wx(e,t)):(o=os(xx),W.from(o.forwards(e,t,kx(e),r)).bind(e=>_x(e.container,t-n.length,r)))},Nx=(e,t,r,n,o)=>{var a,e=os(e,(a=e,e=>a.isBlock(e)||K(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===a.getContentEditable(e)));return W.from(e.backwards(t,r,n,o))},Rx=e=>Vo(e.toString().replace(/\u00A0/g," ")),Ax=e=>""!==e&&-1!=="  \f\n\r\t\v".indexOf(e),Ox=(e,t)=>e.substring(t.length),Tx=(s,l,d,c=0)=>{return e=ee(l.startContainer),mn(e,hg).fold(()=>{{var[e,r,n,o=0]=[s,l,d,c],t;if(!(t=r).collapsed||!oe(t.startContainer))return W.none();const a={text:"",offset:0},i=e.getParent(r.startContainer,e.isBlock)||e.getRoot();return Nx(e,r.startContainer,r.startOffset,(e,t,r)=>(a.text=r+a.text,a.offset+=t,((e,t,r)=>{let n;var o=r.charAt(0);for(n=t-1;0<=n;n--){var a=e.charAt(n);if(Ax(a))return W.none();if(o===a&&it(e,r,n,t))break}return W.some(n)})(a.text,a.offset,n).getOr(t)),i).bind(e=>{var t=r.cloneRange();return t.setStart(e.container,e.offset),t.setEnd(r.endContainer,r.endOffset),t.collapsed||0!==(e=Rx(t)).lastIndexOf(n)||Ox(e,n).length<o?W.none():W.some({text:Ox(e,n),range:t,trigger:n})})}},e=>{var t=s.createRng(),e=(t.selectNode(e.dom),Rx(t));return W.some({range:t,text:Ox(e,d),trigger:d})});var e},Bx=e=>{var t;return 3===e.nodeType?wx(e,e.data.length):0<(t=e.childNodes).length?Bx(t[t.length-1]):wx(e,t.length)},Dx=(e,t)=>{var r=e.childNodes;return 0<r.length&&t<r.length?Dx(r[t],0):0<r.length&&1===e.nodeType&&r.length===t?Bx(r[r.length-1]):wx(e,t)},Px=(t,e,r,n={})=>{const o=e(),a=null!=(e=t.selection.getRng().startContainer.nodeValue)?e:"",i=L(o.lookupByTrigger(r.trigger),e=>r.text.length>=e.minChars&&e.matches.getOrThunk(()=>{return n=t.dom,e=>{var t,r,e=Dx(e.startContainer,e.startOffset);return e=e,r=null!=(r=(t=n).getParent(e.container,t.isBlock))?r:t.getRoot(),!Nx(t,e.container,e.offset,(e,t)=>0===t?-1:t,r).filter(e=>{e=e.container.data.charAt(e.offset-1);return!Ax(e)}).isSome()};var n})(r.range,a,r.text));return 0===i.length?W.none():(e=Promise.all(C(i,t=>t.fetch(r.text,t.maxResults,n).then(e=>({matchText:r.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn})))),W.some({lookupData:e,context:r}))},Lx=((Ab=Wb=Wb||{})[Ab.Error=0]="Error",Ab[Ab.Value=1]="Value",(e,t,r)=>e.stype===Wb.Error?t(e.serror):r(e.svalue)),Mx=e=>({stype:Wb.Value,svalue:e}),Ix=e=>({stype:Wb.Error,serror:e}),Fx=Lx,Ux=e=>se(e)&&100<Pe(e).length?" removed due to size":JSON.stringify(e,null,2),zx=(e,t)=>Ix([{path:e,getErrorInfo:t}]),jx=(n,s)=>({extract:(r,i)=>M(i,n).fold(()=>{return e=r,t=n,zx(e,()=>'Choice schema did not contain choice key: "'+t+'"');var e,t},e=>{return n=r,t=i,o=s,a=e,M(o,a).fold(()=>{return e=n,t=o,r=a,zx(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+Ux(t));var e,t,r},e=>e.extract(n.concat(["branch: "+a]),t));var n,t,o,a}),toString:()=>"chooseOn("+n+"). Possible values: "+Pe(s)}),Hx=o=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");var r={};for(let e=0;e<t.length;e++){var n=t[e];for(const t in n)Q(n,t)&&(r[t]=o(r[t],n[t]))}return r},Vx=Hx((e,t)=>l(e)&&l(t)?Vx(e,t):t),qx=(Hx((e,t)=>t),e=>({tag:"defaultedThunk",process:$(e)})),$x=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},Wx=t=>({extract:(r,e)=>{return(e=t(e)).stype===Wb.Error?(e=>{return t=r,e=e,zx(t,$(e));var t})(e.serror):e},toString:$("val")}),Kx=Wx(Mx),Gx=(e,t,r,n)=>n(M(e,t).getOrThunk(()=>r(e))),Yx=(t,r,n,o,a)=>{const i=e=>a.extract(r.concat([o]),e),e=e=>e.fold(()=>Mx(W.none()),e=>{var e=a.extract(r.concat([o]),e),t=W.some;return e.stype===Wb.Value?{stype:Wb.Value,svalue:t(e.svalue)}:e});switch(t.tag){case"required":return c=r,u=n,m=o,f=i,M(u,m).fold(()=>{return e=c,t=m,r=u,zx(e,()=>'Could not find valid *required* value for "'+t+'" in '+Ux(r));var e,t,r},f);case"defaultedThunk":return Gx(n,o,t.process,i);case"option":return f=n,d=o,e(M(f,d));case"defaultedOptionThunk":return s=n,d=o,l=t.process,e(M(s,d).map(e=>!0===e?l(s):e));case"mergeWithThunk":return Gx(n,o,$({}),e=>{e=Vx(t.process(n),e);return i(e)})}var s,l,d,c,u,m,f},Xx=n=>({extract:(e,t)=>{{var o=e,a=t;const i={},s=[];for(const r of n)$x(r,(e,t,r,n)=>{r=Yx(r,o,a,e,n);Fx(r,e=>{s.push(...e)},e=>{i[t]=e})},(e,t)=>{i[e]=t(a)});return 0<s.length?Ix(s):Mx(i)}},toString:()=>{return"obj{\n"+C(n,e=>$x(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")")).join("\n")+"}"}}),Qx=n=>({extract:(r,e)=>{var t,e=C(e,(e,t)=>n.extract(r.concat(["["+t+"]"]),e));return 0<(e=(e=>{const t=[],r=[];return Y(e,e=>{Lx(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}})(e=e)).errors.length?(t=e.errors,d(Ix,xe)(t)):Mx(e.values)},toString:()=>"array("+n.toString()+")"}),Jx=(e,t,r)=>{return r=r,r=(t=t.extract([e],r)).stype===Wb.Error?{stype:Wb.Error,serror:(e=t.serror,{input:r,errors:e})}:t,Lx(r,rl.error,rl.value)},Zx=(e,t)=>jx(e,Ie(t,Xx)),ek=$(Kx),tk=(r,n)=>Wx(e=>{var t=typeof e;return r(e)?Mx(e):Ix(`Expected type: ${n} but got: `+t)}),rk=tk(N,"number"),nk=tk(j,"string"),ok=tk(E,"boolean"),ak=tk(V,"function"),ik=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),sk=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),lk=(e,t)=>ik(e,e,{tag:"required",process:{}},t),dk=e=>lk(e,nk),ck=e=>lk(e,ak),uk=(e,t)=>ik(e,e,{tag:"option",process:{}},t),mk=e=>uk(e,nk),fk=(e,t,r)=>ik(e,e,qx(t),r),gk=(e,t)=>fk(e,t,rk),pk=(e,t,r)=>{return fk(e,t,(n=r,o=e=>K(n,e)?rl.value(e):rl.error(`Unsupported value: "${e}", choose one of "${n.join(", ")}".`),Wx(e=>o(e).fold(Ix,Mx))));var n,o},hk=(e,t)=>fk(e,t,ok),vk=(e,t)=>fk(e,t,ak),bk=dk("type"),yk=ck("fetch"),Ck=ck("onAction"),wk=vk("onSetup",()=>q),xk=mk("text"),kk=mk("icon"),Ek=mk("tooltip"),Sk=mk("label"),_k=hk("active",!1),Nk=hk("enabled",!0),Rk=hk("primary",!1),Ak=e=>{return e=e,fk("type",e,nk)},Ok=Xx([bk,dk("trigger"),gk("minChars",1),ik("columns","columns",qx(1),ek()),gk("maxResults",10),uk("matches",ak),yk,Ck,(t=nk,fk("highlightOn",[],Qx(t)))]);var Tk,Bk,Ab=[Nk,Ek,kk,xk,wk],t=[_k].concat(Ab),Dk=[vk("predicate",P),pk("scope","node",["node","editor"]),pk("position","selection",["node","selection","line"])],Pk=Ab.concat([Ak("contextformbutton"),Rk,Ck,sk("original",p)]),Lk=t.concat([Ak("contextformbutton"),Rk,Ck,sk("original",p)]),Ab=Ab.concat([Ak("contextformbutton")]),t=t.concat([Ak("contextformtogglebutton")]),Pk=Zx("type",{contextformbutton:Pk,contextformtogglebutton:Lk});Xx([Ak("contextform"),vk("initValue",$("")),Sk,ik("commands","commands",{tag:"required",process:{}},Qx(Pk)),uk("launch",Zx("type",{contextformbutton:Ab,contextformtogglebutton:t}))].concat(Dk));const Mk=i=>{const o=Fi(),a=Bi(!1),s=o.isSet,l=()=>{var e;s()&&(e=i,h(e).autocompleter.removeDecoration(),i.dispatch("AutocompleterEnd"),a.set(!1),o.clear())},d=Ze(()=>{{var e;const t=i.ui.registry.getAll().popups,r=Ie(t,e=>{return e=e,Jx("Autocompleter",Ok,{trigger:e.ch,...e}).fold(e=>{throw new Error("Errors: \n"+(e=>{e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:$("... (only showing first ten failures)")}]):e;return C(e,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})((e=e).errors).join("\n")+"\n\nInput object: "+Ux(e.input))},p)}),n=qe(je(r,e=>e.trigger)),o=He(r);return{dataset:r,triggers:n,lookupByTrigger:t=>L(o,e=>e.trigger===t)}}}),r=e=>{var t;t=e,o.get().map(e=>Tx(i.dom,i.selection.getRng(),e.trigger).bind(e=>Px(i,d,e,t))).getOrThunk(()=>{return t=i,r=d,e=r(),a=t.selection.getRng(),n=t.dom,o=a,a=e,De(a.triggers,e=>Tx(n,o,e)).bind(e=>Px(t,r,e));var t,r,n,o,e,a}).fold(l,n=>{var e,t,r;e=n.context,s()||(t=i,r=e.range,h(t).autocompleter.addDecoration(r),o.set({trigger:e.trigger,matchLength:e.text.length})),n.lookupData.then(r=>{o.get().map(e=>{var t=n.context;e.trigger===t.trigger&&(10<=t.text.length-e.matchLength?l():(o.set({...e,matchLength:t.text.length}),a.get()?i.dispatch("AutocompleterUpdate",{lookupData:r}):(a.set(!0),i.dispatch("AutocompleterStart",{lookupData:r}))))})})})};i.addCommand("mceAutocompleterReload",(e,t)=>{t=se(t)?t.fetchOptions:{};r(t)}),i.addCommand("mceAutocompleterClose",l);{var e=i,t={cancelIfNecessary:l,load:r};const n=zi(t.load,50);e.on("keypress compositionend",e=>{27!==e.which&&n.throttle()}),e.on("keydown",e=>{e=e.which;8===e?n.throttle():27===e&&t.cancelIfNecessary()}),e.on("remove",n.cancel)}},Ik=It().browser.isSafari(),Fk=e=>Uo(ee(e)),Uk=(e,t)=>{return 0===e.startOffset&&e.endOffset===(null==(e=t.textContent)?void 0:e.length)},zk=(e,t)=>W.from(e.getParent(t.container(),"details")),jk=(e,t)=>zk(e,t).isSome(),Hk=(e,t)=>{var r=t.getNode();S(r)||e.selection.setCursorLocation(r,t.offset())},Vk=(t,e,r)=>{var n=t.dom.getParent(e.container(),"details");if(n&&!n.open){const e=t.dom.select("summary",n)[0];e&&(r?mu:fu)(e).each(e=>Hk(t,e))}else Hk(t,e)},qk=(r,n,e)=>{const{dom:o,selection:t}=r,a=r.getBody();if("character"!==e)return!1;{const e=z.fromRangeStart(t.getRng()),i=o.getParent(e.container(),o.isBlock),s=zk(o,e),l=i&&o.isEmpty(i),d=T(null==i?void 0:i.previousSibling),c=T(null==i?void 0:i.nextSibling);return!!(l&&(n?c:d)&&su(!n,a,e).exists(e=>jk(o,e)&&!Kt(s,zk(o,e))))||su(n,a,e).fold(P,e=>{var t=zk(o,e);if(!jk(o,e)||Kt(s,t))return!1;if(n||Vk(r,e,!1),i&&l){if(n&&d)return!0;if(!n&&c)return!0;Vk(r,e,n),r.dom.remove(i)}return!0})}},$k=(e,t,r,n)=>{var o,a,i,s,l,d,c,u,m,f=e.selection.getRng(),g=z.fromRangeStart(f),e=e.getBody();return"selection"===n?(c=f,n=(u=t).startSummary.exists(e=>e.contains(c.startContainer)),f=u.startSummary.exists(e=>e.contains(c.endContainer)),m=u.startDetails.forall(t=>u.endDetails.forall(e=>t!==e)),(n||f)&&!(n&&f)||m):r?(d=g,t.startSummary.exists(e=>{return t=d,r=e,fu(r).exists(e=>_(e.getNode())&&uu(r,e).exists(e=>e.isEqual(t))||e.isEqual(t));var t,r})||(s=e,l=g,t.startDetails.exists(t=>cu(s,l).forall(e=>!t.contains(e.container()))))):(i=g,t.startSummary.exists(e=>{return t=i,e=e,mu(e).exists(e=>e.isEqual(t));var t})||(o=g,(a=t).startDetails.exists(e=>uu(e,o).forall(t=>a.startSummary.exists(e=>!e.contains(o.container())&&e.contains(t.container()))))))},Wk=(e,t,r)=>{return o=t,a=r,((t,e)=>{var r=W.from(t.getParent(e.startContainer,"details")),n=W.from(t.getParent(e.endContainer,"details"));if(r.isSome()||n.isSome()){const e=r.bind(e=>W.from(t.select("summary",e)[0]));return W.some({startSummary:e,startDetails:r,endDetails:n})}return W.none()})((n=e).dom,n.selection.getRng()).fold(()=>qk(n,o,a),e=>$k(n,e,o,a)||qk(n,o,a))||Ik&&((l,d,c)=>{const u=l.selection,m=u.getNode(),e=u.getRng(),t=z.fromRangeStart(e);return!!bo(m)&&("selection"===c&&Uk(e,m)||Yp(d,t,m)?Fk(m):l.undoManager.transact(()=>{const e=u.getSel();let{anchorNode:t,anchorOffset:r,focusNode:n,focusOffset:o}=null!=e?e:{};var a=()=>{H(t)&&H(r)&&H(n)&&H(o)&&null!=e&&e.setBaseAndExtent(t,r,n,o)},i=(e,t)=>{Y(e.childNodes,e=>{Yu(e)&&t.appendChild(e)})},s=l.dom.create("span",{"data-mce-bogus":"1"});i(m,s),m.appendChild(s),a(),"word"!==c&&"line"!==c||null==e||e.modify("extend",d?"right":"left",c),!u.isCollapsed()&&Uk(u.getRng(),s)?Fk(m):(l.execCommand(d?"ForwardDelete":"Delete"),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.anchorOffset,n=null==e?void 0:e.focusNode,o=null==e?void 0:e.focusOffset,i(s,m),a()),l.dom.remove(s)}),!0)})(e,t,r)?W.some(q):W.none();var n,o,a},Kk=o=>(e,t,r={})=>{var n=e.getBody(),n={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:n,currentTarget:n,eventPhase:Event.AT_TARGET,originalTarget:n,explicitOriginalTarget:n,isTrusted:!1,srcElement:n,cancelable:!1,preventDefault:q,inputType:t},t=gi(new InputEvent(o));return e.dispatch(o,{...t,...n,...r})},Gk=Kk("input"),Yk=Kk("beforeinput"),Xk=It(),Qk=Xk.os,Jk=Qk.isMacOS()||Qk.isiOS(),Zk=Xk.browser.isFirefox(),eE=(r,n)=>{var e=r.dom,o=r.schema.getMoveCaretBeforeOnEnterElements();if(n){if(/^(LI|DT|DD)$/.test(n.nodeName)){const r=(e=>{for(;e;){if(ne(e)||oe(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(n.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&n.insertBefore(e.doc.createTextNode(Co),n.firstChild)}var a=e.createRng();if(n.normalize(),n.hasChildNodes()){const r=new Gn(n,n);let e,t=n;for(;e=r.current();){if(oe(e)){a.setStart(e,0),a.setEnd(e,0);break}if(o[e.nodeName.toLowerCase()]){a.setStartBefore(e),a.setEndBefore(e);break}t=e,e=r.next()}e||(a.setStart(t,0),a.setEnd(t,0))}else _(n)?n.nextSibling&&e.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));r.selection.setRng(a),Ff(r,a)}},tE=(e,t)=>{var r=e.getRoot();let n,o=t;for(;o!==r&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){n=o;break}o=o.parentNode}return o!==r?n:r},rE=e=>W.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),nE=e=>{e.innerHTML='<br data-mce-bogus="1">'},oE=(e,t)=>{if(kl(e).toLowerCase()===t.tagName.toLowerCase()){var r=e,n=t,t=El(e);const o=r.dom;W.from(t.style).map(o.parseStyle).each(e=>{e={...xn(ee(n)),...e};o.setStyles(n,e)});r=W.from(t.class).map(e=>e.split(/\s+/)),e=W.from(n.className).map(e=>L(e.split(/\s+/),e=>""!==e));Gt(r,e,(t,e)=>{e=L(e,e=>!K(t,e)),e=[...t,...e];o.setAttrib(n,"class",e.join(" "))});const a=["style","class"],i=ze(t,(e,t)=>!K(a,t));o.setAttribs(n,i)}},aE=(e,t,r,n,o=!0,a)=>{var i=e.dom,s=e.schema,l=kl(e),d=r?r.nodeName.toUpperCase():"";let c=t;var u=s.getTextInlineElements(),m=a||"TABLE"===d||"HR"===d?i.create(a||l):r.cloneNode(!1);let f=m;if(o){do{if(u[c.nodeName]&&!pu(c)&&!Nu(c)){const e=c.cloneNode(!1);i.setAttrib(e,"id",""),m.hasChildNodes()?e.appendChild(m.firstChild):f=e,m.appendChild(e)}}while((c=c.parentNode)&&c!==n)}else i.setAttrib(m,"style",null),i.setAttrib(m,"class",null);return oE(e,m),nE(f),m},iE=(e,t)=>{e=null==e?void 0:e.parentNode;return H(e)&&e.nodeName===t},sE=e=>H(e)&&/^(OL|UL|LI)$/.test(e.nodeName),lE=e=>{var t,r=e.parentNode;return H(t=r)&&/^(LI|DT|DD)$/.test(t.nodeName)?r:e},dE=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!ne(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},cE=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,uE=(e,t)=>H(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),mE=(e,t,r)=>oe(t)?e?1===r&&t.data.charAt(r-1)===jo?0:r:r===t.data.length-1&&t.data.charAt(r)===jo?t.data.length:r:r,fE={insert:(r,n)=>{let o,a,t,i,s=!1;const l=r.dom,d=r.schema.getNonEmptyElements(),c=r.selection.getRng(),u=kl(r),e=ee(c.startContainer),m=qr(e,c.startOffset),f=m.exists(e=>rr(e)&&!fn(e)),g=c.collapsed&&f,p=e=>aE(r,o,x,w,Rl(r),e),h=e=>{var t=mE(e,o,a);if(oe(o)&&(e?0<t:t<o.data.length))return!1;if((o.parentNode!==x||!s||e)&&(!e||!ne(o)||o!==x.firstChild)){if(cE(o,"TABLE")||cE(o,"HR"))return s&&!e||!s&&e;var r,n=new Gn(o,x);for(oe(o)&&(e&&0===t?n.prev():e||t!==o.data.length||n.next());r=n.current();){if(ne(r)){if(!r.getAttribute("data-mce-bogus")){const e=r.nodeName.toLowerCase();if(d[e]&&"br"!==e)return!1}}else if(oe(r)&&!ga(r.data))return!1;e?n.prev():n.next()}}return!0},v=()=>{let e;return e=/^(H[1-6]|PRE|FIGURE)$/.test(t)&&"HGROUP"!==k?p(u):p(),((e,t)=>{e=Al(e);return!de(t)&&(j(e)?K(J.explode(e),t.nodeName.toLowerCase()):e)})(r,i)&&uE(l,i)&&l.isEmpty(x,void 0,{includeZwsp:!0})?e=l.split(i,x):l.insertAfter(e,x),eE(r,e),e};vf(l,c).each(e=>{c.setStart(e.startContainer,e.startOffset),c.setEnd(e.endContainer,e.endOffset)}),o=c.startContainer,a=c.startOffset;var b,y,C=!(!n||!n.shiftKey),n=!(!n||!n.ctrlKey);ne(o)&&o.hasChildNodes()&&!g&&(s=a>o.childNodes.length-1,o=o.childNodes[Math.min(a,o.childNodes.length-1)]||o,a=s&&oe(o)?o.data.length:0);const w=tE(l,o);if(!w||((e,t)=>{t=e.dom.getParent(t,"ol,ul,dl");return null!==t&&"false"===e.dom.getContentEditableParent(t)})(r,o))return;C||(o=((r,n,o,a,i)=>{var s;const l=r.dom,d=null!=(u=tE(l,a))?u:l.getRoot();var c=l.getParent(a,l.isBlock);if(!c||!uE(l,c)){if(!(c=c||d).hasChildNodes()){const a=l.create(n);return oE(r,a),c.appendChild(a),o.setStart(a,0),o.setEnd(a,0),a}let e,t=a;for(;t&&t.parentNode!==c;)t=t.parentNode;for(;t&&!l.isBlock(t);)t=(e=t).previousSibling;var u=null==(s=null==e?void 0:e.parentElement)?void 0:s.nodeName;if(e&&u&&r.schema.isValidChild(u,n.toLowerCase())){const s=e.parentNode,d=l.create(n);for(oE(r,d),s.insertBefore(d,e),t=e;t&&!l.isBlock(t);){const r=t.nextSibling;d.appendChild(t),t=r}o.setStart(a,i),o.setEnd(a,i)}}return a})(r,u,c,o,a));let x=l.getParent(o,l.isBlock)||l.getRoot();i=H(null==x?void 0:x.parentNode)?l.getParent(x.parentNode,l.isBlock):null,t=x?x.nodeName.toUpperCase():"";const k=i?i.nodeName.toUpperCase():"";if("LI"!==k||n||(i=(x=i).parentNode,t=k),ne(i)&&(b=r,y=x,!C)&&y.nodeName.toLowerCase()===kl(b)&&b.dom.isEmpty(y)&&(e=>{let t=y;for(;t&&t!==e&&T(t.nextSibling);){const e=t.parentElement;if(!e||(r=e,!Q(b.schema.getTextBlockElements(),r.nodeName.toLowerCase())))return vo(e);t=e}var r;return!1})(b.getBody()))n=r,C=p,N=x,C=C(kl(n)),(_=n.dom.getParent(N,vo))&&(n.dom.insertAfter(C,_),eE(n,C),1<(null!=(_=null==(C=null==(_=N.parentElement)?void 0:_.childNodes)?void 0:C.length)?_:0))&&n.dom.remove(N);else if(/^(LI|DT|DD)$/.test(t)&&ne(i)&&l.isEmpty(x)){var E=r,S=p,C=i,_=x,n=u,N=E.dom,R=E.selection.getRng(),A=C.parentNode;if(C!==E.getBody()&&A){let e=S(n=sE(S=C)&&sE(S.parentNode)?"LI":n);if(dE(C,_,!0)&&dE(C,_,!1))if(iE(C,"LI")){const E=lE(C);N.insertAfter(e,E),(null==(S=C.parentNode)?void 0:S.firstChild)===C?N.remove(E):N.remove(C)}else N.replace(e,C);else{if(dE(C,_,!0))iE(C,"LI")?(N.insertAfter(e,lE(C)),e.appendChild(N.doc.createTextNode(" ")),e.appendChild(C)):A.insertBefore(e,C);else if(dE(C,_,!1))N.insertAfter(e,lE(C));else{C=lE(C);const E=R.cloneRange(),S=(E.setStartAfter(_),E.setEndAfter(C),E.extractContents());"LI"===n&&(A=S).firstChild&&"LI"===A.firstChild.nodeName?(e=S.firstChild,N.insertAfter(S,C)):(N.insertAfter(S,C),N.insertAfter(e,C))}N.remove(_)}eE(E,e)}}else if(g||x!==r.getBody()&&uE(l,x)){var O,S=x.parentNode;let t;if(g)t=p(u),m.fold(()=>{te(e,ee(t))},e=>{En(e,ee(t))}),r.selection.setCursorLocation(t,0);else if(Wo(x))t=ea(x),l.isEmpty(x)&&nE(x),oE(r,t),eE(r,t);else if(h(!1))t=v();else if(h(!0)&&S){t=S.insertBefore(p(),x);const n=ee(c.startContainer).dom.hasChildNodes()&&c.collapsed;eE(r,cE(x,"HR")||n?t:x)}else{R=c,(A=R.cloneRange()).setStart(R.startContainer,mE(!0,R.startContainer,R.startOffset)),A.setEnd(R.endContainer,mE(!1,R.endContainer,R.endOffset));const n=A.cloneRange(),o=(n.setEndAfter(x),n.extractContents());C=o,Y($n(ee(C),or),e=>{e=e.dom;e.nodeValue=Vo(e.data)});{let e=o;for(;oe(e)&&(e.data=e.data.replace(/^[\r\n]+/,"")),e=e.firstChild;);}t=o.firstChild,l.insertAfter(o,x),((r,n,o)=>{var a,i,s=[];if(o){let e=o;for(;e=e.firstChild;){if(r.isBlock(e))return;ne(e)&&!n[e.nodeName.toLowerCase()]&&s.push(e)}let t=s.length;for(;t--;)(!(e=s[t]).hasChildNodes()||e.firstChild===e.lastChild&&""===(null==(a=e.firstChild)?void 0:a.nodeValue)||(a=r,(i=e)&&"A"===i.nodeName&&a.isEmpty(i)))&&r.remove(e)}})(l,d,t),E=l,(C=x).normalize(),(!(O=C.lastChild)||ne(O)&&/^(left|right)$/gi.test(E.getStyle(O,"float",!0)))&&E.add(C,"br"),l.isEmpty(x)&&nE(x),t.normalize(),l.isEmpty(t)?(l.remove(t),v()):(oE(r,t),eE(r,t))}l.setAttrib(t,"id",""),r.dispatch("NewBlock",{newBlock:t})}},fakeEventName:"insertParagraph"},gE=(e,t,r)=>{var n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),Ff(e,n)},pE=(e,t)=>{var r=Nr("br");En(ee(t),r),e.undoManager.add()},hE=(e,t)=>{vE(e.getBody(),t)||Sn(ee(t),Nr("br"));var r=Nr("br");Sn(ee(t),r),gE(e,r.dom,!1),e.undoManager.add()},vE=(e,t)=>{return r=z.after(t),!!_(r.getNode())||cu(e,z.after(t)).map(e=>_(e.getNode())).getOr(!1);var r},bE=e=>e&&"A"===e.nodeName&&"href"in e,yE=e=>e.fold(P,bE,bE,P),CE=(e,t)=>{t.fold(q,D(pE,e),D(hE,e),q)},wE={insert:(a,i)=>{d=a,s=D(Fp,d),c=z.fromRangeStart(d.selection.getRng());var s=d1(s,d.getBody(),c).filter(yE);if(s.isSome())s.each(D(CE,a));else{var l=a,d=i;const u=l.selection,m=l.dom,f=u.getRng();let e,t=!1,r=(vf(m,f).each(e=>{f.setStart(e.startContainer,e.startOffset),f.setEnd(e.endContainer,e.endOffset)}),f.startOffset),n=f.startContainer;if(ne(n)&&n.hasChildNodes()){const l=r>n.childNodes.length-1;n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=l&&oe(n)?n.data.length:0}let o=m.getParent(n,m.isBlock);var c=o&&o.parentNode?m.getParent(o.parentNode,m.isBlock):null,s=c?c.nodeName.toUpperCase():"",d=!(!d||!d.ctrlKey);"LI"!==s||d||(o=c),oe(n)&&r>=n.data.length&&(((e,t,r)=>{for(var n,o=new Gn(t,r),a=e.getNonEmptyElements();n=o.next();)if(a[n.nodeName.toLowerCase()]||oe(n)&&0<n.length)return!0;return!1})(l.schema,n,o||m.getRoot())||(e=m.create("br"),f.insertNode(e),f.setStartAfter(e),f.setEndAfter(e),t=!0)),e=m.create("br"),Ps(m,f,e),gE(l,e,t),l.undoManager.add()}},fakeEventName:"insertLineBreak"},xE=(e,t)=>rE(e).filter(e=>0<t.length&&Or(ee(e),t)).isSome(),kE=nl([{br:[]},{block:[]},{none:[]}]),EE=(e,t)=>{return e=e,xE(e,Nl(e))},SE=r=>(e,t)=>{return e=e,rE(e).filter(e=>Bo(ee(e))).isSome()===r},_E=(r,n)=>(e,t)=>{return e=e,rE(e).fold($(""),e=>e.nodeName.toUpperCase())===r.toUpperCase()===n},NE=e=>{e=tE(e.dom,e.selection.getStart());return de(e)},RE=e=>_E("pre",e),AE=r=>(e,t)=>xl(e)===r,OE=(e,t)=>{return e=e,xE(e,_l(e))},TE=(e,t)=>t,BE=e=>{var t=kl(e),r=tE(e.dom,e.selection.getStart());return H(r)&&e.schema.isValidChild(r.nodeName,t)},DE=e=>{var e=e.selection.getRng(),t=ee(e.startContainer),t=qr(t,e.startOffset).map(e=>rr(e)&&!fn(e));return e.collapsed&&t.getOr(!0)},PE=(e,t)=>(r,n)=>be(e,(e,t)=>e&&t(r,n),!0)?W.some(t):W.none(),LE=(e,t,r)=>{t.selection.isCollapsed()||t.execCommand("delete"),H(r)&&Yk(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,r),H(r)&&Gk(t,e.fakeEventName))},ME=(e,t)=>{var r,n,o=()=>LE(wE,e,t),a=()=>LE(fE,e,t),i=(r=e,n=t,ZC([PE([EE],kE.none()),PE([RE(!0),NE],kE.none()),PE([_E("summary",!0)],kE.br()),PE([RE(!0),AE(!1),TE],kE.br()),PE([RE(!0),AE(!1)],kE.block()),PE([RE(!0),AE(!0),TE],kE.block()),PE([RE(!0),AE(!0)],kE.br()),PE([SE(!0),TE],kE.br()),PE([SE(!0)],kE.block()),PE([OE],kE.br()),PE([TE],kE.br()),PE([BE],kE.block()),PE([DE],kE.block())],[r,!(!n||!n.shiftKey)]).getOr(kE.none()));switch(Sl(e)){case"linebreak":i.fold(o,o,q);break;case"block":i.fold(a,a,q);break;case"invert":i.fold(a,o,q);break;default:i.fold(o,a,q)}},IE=It(),FE=IE.os.isiOS()&&IE.browser.isSafari(),UE=(e,t)=>{var r;t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact(()=>{ME(e,t)}))},zE=It(),jE=e=>e.stopImmediatePropagation(),HE=e=>e.keyCode===ie.PAGE_UP||e.keyCode===ie.PAGE_DOWN,VE=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",jE,!0):!r&&e.get()&&t.off("NodeChange",jE),e.set(r)},qE=(r,n)=>{var e=n.container(),t=n.offset();return oe(e)?(e.insertData(t,r),W.some(z(e,t+r.length))):Vc(n).map(e=>{var t=Rr(r);return(n.isAtEnd()?Sn:En)(e,t),z(t.dom,r.length)})},$E=D(qE,Co),WE=D(qE," "),KE=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},GE=n=>{const o=z.fromRangeStart(n.selection.getRng()),a=ee(n.getBody());var e,t,r;return n.selection.isCollapsed()?(e=D(Fp,n),t=z.fromRangeStart(n.selection.getRng()),d1(e,n.getBody(),t).bind((r=a,e=>e.fold(e=>uu(r.dom,z.before(e)),e=>mu(e),e=>fu(e),e=>cu(r.dom,z.after(e))))).map(e=>()=>{return t=a,r=o,(e=>(vp(t,e)?$E:WE)(r))(e).each(KE(n));var t,r})):W.none()},YE=r=>{return Yt(I.browser.isFirefox()&&r.selection.isEditable()&&(e=r.dom,t=r.selection.getRng().startContainer,e.isEditable(e.getParent(t,"summary"))),()=>{var e,t=ee(r.getBody());r.selection.isCollapsed()||r.getDoc().execCommand("Delete"),t=t,e=z.fromRangeStart(r.selection.getRng()),(vp(t,e)?$E:WE)(e).each(KE(r))});var e,t},XE=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Mk(e),ay(e))return Bi(null);var t=tw(e);(r=e).on("keyup compositionstart",D(Mw,r)),m=t,(u=e).on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=u,r=m,n=e,e=I.os.isMacOS()||I.os.isiOS(),Gw([{keyCode:ie.RIGHT,action:v(Uw,t,!0)},{keyCode:ie.LEFT,action:v(Uw,t,!1)},{keyCode:ie.UP,action:v(zw,t,!1)},{keyCode:ie.DOWN,action:v(zw,t,!0)},...e?[{keyCode:ie.UP,action:v(Hw,t,!1),metaKey:!0,shiftKey:!0},{keyCode:ie.DOWN,action:v(Hw,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ie.RIGHT,action:v(px,t,!0)},{keyCode:ie.LEFT,action:v(px,t,!1)},{keyCode:ie.UP,action:v(hx,t,!1)},{keyCode:ie.DOWN,action:v(hx,t,!0)},{keyCode:ie.UP,action:v(hx,t,!1)},{keyCode:ie.UP,action:v($w,t,!1)},{keyCode:ie.DOWN,action:v($w,t,!0)},{keyCode:ie.RIGHT,action:v(Xw,t,!0)},{keyCode:ie.LEFT,action:v(Xw,t,!1)},{keyCode:ie.UP,action:v(Qw,t,!1)},{keyCode:ie.DOWN,action:v(Qw,t,!0)},{keyCode:ie.RIGHT,action:v(Z1,t,r,!0)},{keyCode:ie.LEFT,action:v(Z1,t,r,!1)},{keyCode:ie.RIGHT,ctrlKey:!e,altKey:e,action:v(rw,t,r)},{keyCode:ie.LEFT,ctrlKey:!e,altKey:e,action:v(nw,t,r)},{keyCode:ie.UP,action:v(qw,t,!1)},{keyCode:ie.DOWN,action:v(qw,t,!0)}],n).each(e=>{n.preventDefault()}))});{var d=e,c=t;let l=!1;d.on("keydown",e=>{if(l=e.keyCode===ie.BACKSPACE,!e.isDefaultPrevented()){var t=d,r=c,n=e;const o=n.keyCode===ie.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=t.selection.isCollapsed(),i=a?"character":"selection",s=e=>a?e?"word":"line":"selection";Yw([{keyCode:ie.BACKSPACE,action:v(_w,t)},{keyCode:ie.BACKSPACE,action:v(jC,t,!1)},{keyCode:ie.DELETE,action:v(jC,t,!0)},{keyCode:ie.BACKSPACE,action:v(DC,t,!1)},{keyCode:ie.DELETE,action:v(DC,t,!0)},{keyCode:ie.BACKSPACE,action:v(sw,t,r,!1)},{keyCode:ie.DELETE,action:v(sw,t,r,!0)},{keyCode:ie.BACKSPACE,action:v(xh,t,!1)},{keyCode:ie.DELETE,action:v(xh,t,!0)},{keyCode:ie.BACKSPACE,action:v(Wk,t,!1,i)},{keyCode:ie.DELETE,action:v(Wk,t,!0,i)},...Jk?[{keyCode:ie.BACKSPACE,altKey:!0,action:v(Wk,t,!1,s(!0))},{keyCode:ie.DELETE,altKey:!0,action:v(Wk,t,!0,s(!0))},{keyCode:ie.BACKSPACE,metaKey:!0,action:v(Wk,t,!1,s(!1))}]:[{keyCode:ie.BACKSPACE,ctrlKey:!0,action:v(Wk,t,!1,s(!0))},{keyCode:ie.DELETE,ctrlKey:!0,action:v(Wk,t,!0,s(!0))}],{keyCode:ie.BACKSPACE,action:v(HC,t,!1)},{keyCode:ie.DELETE,action:v(HC,t,!0)},{keyCode:ie.BACKSPACE,action:v(bw,t,!1)},{keyCode:ie.DELETE,action:v(bw,t,!0)},{keyCode:ie.BACKSPACE,action:v(_C,t,!1)},{keyCode:ie.DELETE,action:v(_C,t,!0)},{keyCode:ie.BACKSPACE,action:v(EC,t,!1)},{keyCode:ie.DELETE,action:v(EC,t,!0)},{keyCode:ie.BACKSPACE,action:v(pw,t,!1)},{keyCode:ie.DELETE,action:v(pw,t,!0)}],n).filter(e=>t.selection.isEditable()).each(e=>{n.preventDefault(),Yk(t,o).isDefaultPrevented()||(e(),Gk(t,o))})}}),d.on("keyup",e=>{var t,r;e.isDefaultPrevented()||(t=d,e=e,r=l,Gw([{keyCode:ie.BACKSPACE,action:v(zC,t)},{keyCode:ie.DELETE,action:v(zC,t)},...Jk?[{keyCode:ie.BACKSPACE,altKey:!0,action:v(hw,t)},{keyCode:ie.DELETE,altKey:!0,action:v(hw,t)},...r?[{keyCode:Zk?224:91,action:v(hw,t)}]:[]]:[{keyCode:ie.BACKSPACE,ctrlKey:!0,action:v(hw,t)},{keyCode:ie.DELETE,ctrlKey:!0,action:v(hw,t)}]],e)),l=!1})}{var a=e;let o=W.none();a.on("keydown",e=>{var t,r,n;e.keyCode===ie.ENTER&&(FE&&!!(t=a.selection.getRng()).collapsed&&(n=t.startContainer,!!oe(n))&&(r=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,n=n.data.charAt(t.startOffset-1),r.test(n))?(t=a,o=W.some(t.selection.getBookmark()),t.undoManager.add()):UE(a,e))}),a.on("keyup",r=>{r.keyCode===ie.ENTER&&o.each(()=>{return e=r,(t=a).undoManager.undo(),o.fold(q,e=>t.selection.moveToBookmark(e)),UE(t,e),void(o=W.none());var t,e})})}(l=e).on("keydown",e=>{var t,r;e.isDefaultPrevented()||(t=l,r=e,Yw([{keyCode:ie.SPACEBAR,action:v(GE,t)},{keyCode:ie.SPACEBAR,action:v(YE,t)}],r).each(e=>{r.preventDefault(),Yk(t,"insertText",{data:" "}).isDefaultPrevented()||(e(),Gk(t,"insertText",{data:" "}))}))}),(s=e).on("input",e=>{var t,r,n,o;e.isComposing||(t=s,e=ee(t.getBody()),t.selection.isCollapsed()&&(e=e,r=z.fromRangeStart(t.selection.getRng()),o=r.container(),(oe(o)?(n=r.container(),oe(n)&&it(n.data,Co)?(n=kp(e,o,!1)||(e=>{const t=e.data,r=(()=>{const r=t.split("");return C(r,(e,t)=>Ru(e)&&0<t&&t<r.length-1&&Ou(r[t-1])&&Ou(r[t+1])?" ":e).join("")})();return r!==t&&(e.data=r,!0)})(o)||Ep(e,o,!1),Yt(n,r)):Cp(e,r)?(n=kp(e,o,!0)||Ep(e,o,!0),Yt(n,r)):W.none()):W.none()).each(e=>{t.selection.setRng(e.toRange())})))}),(n=e).on("keydown",e=>{var t,r;e.isDefaultPrevented()||(t=n,r=e,Gw([...(t=t,rc(t)?[{keyCode:ie.TAB,action:v(Cx,t,!0)},{keyCode:ie.TAB,shiftKey:!0,action:v(Cx,t,!1)}]:[])],r).each(e=>{r.preventDefault()}))}),i=t,(o=e).on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=o,r=i,n=e,e=I.os.isMacOS()||I.os.isiOS(),Gw([{keyCode:ie.END,action:v(jw,t,!0)},{keyCode:ie.HOME,action:v(jw,t,!1)},...e?[]:[{keyCode:ie.HOME,action:v(Hw,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ie.END,action:v(Hw,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ie.END,action:v(Jw,t,!0)},{keyCode:ie.HOME,action:v(Jw,t,!1)},{keyCode:ie.END,action:v(ow,t,!0,r)},{keyCode:ie.HOME,action:v(ow,t,!1,r)}],n).each(e=>{n.preventDefault()}))});var o,i,n,s,l,u,m,r,f=e,g=t;if(!zE.os.isMacOS()){const p=Bi(!1);f.on("keydown",e=>{HE(e)&&VE(p,f,!0)}),f.on("keyup",e=>{var t,r,n;e.isDefaultPrevented()||(t=f,r=g,n=e,Gw([{keyCode:ie.PAGE_UP,action:v(ow,t,!1,r)},{keyCode:ie.PAGE_DOWN,action:v(ow,t,!0,r)}],n)),HE(e)&&p.get()&&(VE(p,f,!1),f.nodeChanged())})}return t};class QE{constructor(r){let n;this.lastPath=[],this.editor=r;const t=this;"onselectionchange"in r.getDoc()||r.on("NodeChange click mouseup keyup focus",e=>{var t=r.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&mf(t,n)||r.dispatch("SelectionChange"),n=t}),r.on("contextmenu",()=>{r.dispatch("SelectionChange")}),r.on("SelectionChange",()=>{var e=r.selection.getStart(!0);e&&Wu(r)&&!t.isSameElementPath(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("mouseup",e=>{!e.isDefaultPrevented()&&Wu(r)&&("IMG"===r.selection.getNode().nodeName?Qf.setEditorTimeout(r,()=>{r.nodeChanged()}):r.nodeChanged())})}nodeChanged(e={}){var t=this.editor.selection;let r;if(this.editor.initialized&&t&&!vd(this.editor)&&!this.editor.mode.isReadOnly()){const n=this.editor.getBody(),o=((r=t.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,n)||(r=n),[]);this.editor.dom.getParent(r,e=>e===n||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:o})}}isSameElementPath(e){let t;var r=this.editor,n=Se(r.dom.getParents(e,ce,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}const JE=Zi("image"),ZE=Zi("event"),eS=t=>e=>{e[ZE]=t},tS=eS(0),rS=eS(2),nS=eS(1),oS=Zi("mode"),aS=t=>e=>{e[oS]=t},iS=(e,t)=>aS(t)(e),sS=aS(0),lS=aS(2),dS=aS(1),cS=t=>e=>{return W.from(e[oS]).exists(e=>e===t)},uS=cS(0),mS=cS(1),fS=["none","copy","link","move"],gS=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],pS=()=>{const o=new window.DataTransfer;let t="move",r="all";const a={get dropEffect(){return t},set dropEffect(e){K(fS,e)&&(t=e)},get effectAllowed(){return r},set effectAllowed(e){var t;t=a,W.from(t[ZE]).exists(e=>0===e)&&K(gS,e)&&(r=e)},get items(){return r=a,{...n=o.items,get length(){return n.length},add:(e,t)=>{if(uS(r)){if(!j(e))return n.add(e);if(!S(t))return n.add(e,t)}return null},remove:e=>{uS(r)&&n.remove(e)},clear:()=>{uS(r)&&n.clear()}};var r,n},get files(){return mS(a)?Object.freeze({length:0,item:e=>null}):o.files},get types(){return o.types},setDragImage:(e,t,r)=>{var n;uS(a)&&(n={image:e,x:t,y:r},a[JE]=n,o.setDragImage(e,t,r))},getData:e=>mS(a)?"":o.getData(e),setData:(e,t)=>{uS(a)&&o.setData(e,t)},clearData:e=>{uS(a)&&o.clearData(e)}};return sS(a),a},hS=(e,t)=>e.setData("text/html",t),vS="x-tinymce/html",bS=$(vS),yS="\x3c!-- "+vS+" --\x3e",CS=e=>-1!==e.indexOf(yS),wS="%MCEPASTEBIN%",xS=e=>e.dom.get("mcepastebin"),kS=e=>H(e)&&"mcepastebin"===e.id,ES=e=>e===wS,SS=(t,e)=>(J.each(e,e=>{t=y(e,RegExp)?t.replace(e,""):t.replace(e[0],e[1])}),t),_S=e=>SS(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?Co:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),NS=(e,t)=>({content:e,cancelled:t}),RS=(e,t)=>(e.insertContent(t,{merge:jd(e),paste:!0}),!0),AS=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),OS=(e,t,r)=>{return!(e.selection.isCollapsed()||!AS(t)||(o=t,a=r,(n=e).undoManager.extra(()=>{a(n,o)},()=>{n.execCommand("mceInsertLink",!1,o)}),0));var n,o,a},TS=(e,t,r)=>{return i=e,s=t,!(!AS(s)||!G(tc(i),e=>lt(s.toLowerCase(),"."+e.toLowerCase()))||(o=t,a=r,(n=e).undoManager.extra(()=>{a(n,o)},()=>{n.insertContent('<img src="'+o+'">')}),0));var n,o,a,i,s},BS=(()=>{let e=0;return()=>"mceclip"+e++})(),DS=(l,d,c,o,e)=>{var t=(()=>{var e=l,t=d,r=c,t=e.dispatch("PastePreProcess",{content:t,internal:r}),n=(o=e,n=t.content,(a=O0({sanitize:Zd(o)},o.schema)).addNodeFilter("meta",e=>{J.each(e,e=>{e.remove()})}),a=a.parse(n,{forced_root_block:!1,isRootContent:!0}),Og({validate:!0},o.schema).serialize(a));if(!e.hasEventListeners("PastePostProcess")||t.isDefaultPrevented())return NS(n,t.isDefaultPrevented());{var o=e,a=r;const i=o.dom.create("div",{style:"display:none"},n),s=o.dispatch("PastePostProcess",{node:i,internal:a});return NS(s.node.innerHTML,s.isDefaultPrevented())}})();if(!t.cancelled){const d=t.content,c=()=>{var e,t,r,n;e=l,t=d,o||!Hd(e)?RS(e,t):(r=e,n=t,J.each([OS,TS,RS],e=>!e(r,n,RS)))};e?Yk(l,"insertFromPaste",{dataTransfer:(t=d,e=pS(),hS(e,t),lS(e),e)}).isDefaultPrevented()||(c(),Gk(l,"insertFromPaste")):c()}},PS=(e,t,r,n)=>{r=r||CS(t);DS(e,t.replace(yS,""),r,!1,n)},LS=(e,t,r)=>{t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=((e,r,t)=>{const n=e.split(/\n\n/),o=(e=>{let t="<"+r;e=je(e,(e,t)=>t+'="'+ei.encodeAllRaw(e)+'"');return e.length&&(t+=" "+e.join(" ")),t+">"})(t),a="</"+r+">",i=C(n,e=>e.split(/\n/).join("<br />"));return 1===i.length?i[0]:C(i,e=>o+e+a).join("")})(ha(t,qd(e)),kl(e),El(e));DS(e,t,!1,!0,r)},MS=t=>{var r={};if(t&&t.types)for(let e=0;e<t.types.length;e++){var n=t.types[e];try{r[n]=t.getData(n)}catch(t){r[n]=""}}return r},IS=(e,t)=>t in e&&0<e[t].length,FS=e=>IS(e,"text/html")||IS(e,"text/plain"),US=(t,e,r)=>{var n,o="paste"===e.type?e.clipboardData:e.dataTransfer;if(Ld(t)&&o){n=t,a=(o=o).items?ke(Be(o.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],o=o.files?Be(o.files):[];var a=L(0<a.length?a:o,(e=>{const t=tc(e);return r=>st(r.type,"image/")&&G(t,e=>{return e=e.toLowerCase(),t={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(J.hasOwn(t,e)?"image/"+t[e]:"image/"+e)===r.type;var t})})(n));if(0<a.length)return e.preventDefault(),o=a,Promise.all(C(o,t=>db(t).then(e=>({file:t,uri:e})))).then(e=>{r&&t.selection.setRng(r),Y(e,e=>{var s,l;s=t,l=e,sb(l.uri).each(({data:e,type:t,base64Encoded:r})=>{var n,o,r=r?e:btoa(e),e=l.file,a=s.editorUpload.blobCache,t=a.getByData(r,t),i=null!=t?t:(t=s,a=a,e=e,r=r,i=BS(),n=Tl(t)&&H(e.name),t=n?(t=t,o=e.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i),H(o)?t.dom.encode(o[1]):void 0):i,o=n?e.name:void 0,n=a.create(i,e,r,t,o),a.add(n),n);PS(s,`<img src="${i.blobUri()}">`,!1,!0)})})}),!0}return!1},zS=(e,t,r,n,o)=>{let a=_S(r);var r=IS(t,bS())||CS(r),i=!r&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),s=AS(a);((n=ES(a)||!a.length||i&&!s?!0:n)||s)&&(a=IS(t,"text/plain")&&i?t["text/plain"]:(e=>{const n=ui(),t=O0({},n);let o="";const a=n.getVoidElements(),i=J.makeMap("script noscript style textarea video audio iframe object"," "),s=n.getBlockElements(),l=t=>{var e=t.name,r=t;if("br"!==e){if("wbr"!==e)if(a[e]&&(o+=" "),i[e])o+=" ";else{if(3===t.type&&(o+=t.value),!(t.name in n.getVoidElements())){let e=t.firstChild;if(e)for(;l(e),e=e.next;);}s[e]&&r.next&&(o+="\n","p"===e)&&(o+="\n")}}else o+="\n"};return e=SS(e,[/<!\[[^\]]+\]>/g]),l(t.parse(e)),o})(a)),ES(a)||(n?LS(e,a,o):PS(e,a,r,o))},jS=(e,t,r)=>{{var a=e,i=t,s=r;let o;a.on("keydown",e=>{var t;t=e,(ie.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!e.isDefaultPrevented()&&(o=e.shiftKey&&86===e.keyCode)}),a.on("paste",e=>{if(!e.isDefaultPrevented()&&(t=e,!I.os.isAndroid()||0!==(null==(t=null==(t=t.clipboardData)?void 0:t.items)?void 0:t.length))){var t;const r="text"===s.get()||o,n=(o=!1,MS(e.clipboardData));!FS(n)&&US(a,e,i.getLastRng()||a.selection.getRng())||(IS(n,"text/html")?(e.preventDefault(),zS(a,n,n["text/html"],r,!0)):IS(n,"text/plain")&&IS(n,"text/uri-list")?(e.preventDefault(),zS(a,n,n["text/plain"],r,!0)):(i.create(),Qf.setEditorTimeout(a,()=>{var e=i.getHtml();i.remove(),zS(a,n,e,r,!1)},0)))}})}var o;(o=e).parser.addNodeFilter("img",(e,t,r)=>{if(!Ld(o)&&!0===(null==(r=r.data)?void 0:r.paste))for(const t of e){const e=t.attr("src");j(e)&&!t.attr("data-mce-object")&&e!==I.transparentSrc&&(n=e,st(n,"webkit-fake-url")||!$d(o)&&(n=e,st(n,"data:")))&&t.remove()}var n})},HS=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(bS(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},VS=s=>(e,t)=>{const{dom:r,selection:n}=s,o=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e),i=(r.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(a),r.add(s.getBody(),o),n.getRng());a.focus();e=r.createRng();e.selectNodeContents(a),n.setRng(e),Qf.setEditorTimeout(s,()=>{n.setRng(i),r.remove(o),t()},0)},qS=e=>{return{html:(t=e.selection.getContent({contextual:!0}),yS+t),text:e.selection.getContent({format:"text"})};var t},$S=e=>{return!e.selection.isCollapsed()||!!(e=e).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},WS=(e,t)=>{var r;return Cf.getCaretRangeFromPoint(null!=(r=t.clientX)?r:0,null!=(r=t.clientY)?r:0,e.getDoc())},KS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},GS=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,YS=e=>J.trim(e).replace(GS,Iu).toLowerCase(),XS=(e,t,i)=>{const s=Ud(e);if(!i&&"all"!==s&&zd(e)){const l=s?s.split(/[, ]/):[];if(l&&"none"!==s){const i=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,n,t,r)=>{var o=i.parseStyle(i.decode(t)),a={};for(let r=0;r<l.length;r++){const n=o[l[r]];let e=n,t=i.getStyle(s,l[r],!0);/color/.test(l[r])&&(e=YS(e),t=YS(t)),t!==e&&(a[l[r]]=n)}t=i.serializeStyle(a,"span");return t?n+' style="'+t+'"'+r:n+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)}return t},QS=o=>{const a=Bi(!1),i=Bi(Vd(o)?"text":"html"),s=(i=>{const a=Bi(null);return{create:()=>{var e=i,t=a,{dom:r,selection:n}=e,o=e.getBody(),t=(t.set(n.getRng()),r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},wS));I.browser.isFirefox()&&r.setStyle(t,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(t,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),t.focus(),n.select(t,!0)},remove:()=>{var e=i,t=a,r=e.dom;if(xS(e)){for(var n,o=t.get();n=xS(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)},getEl:()=>xS(i),getHtml:()=>{{var e=i;const r=e.dom,n=(e,t)=>{e.appendChild(t),r.remove(t,!0)},[o,...a]=L(e.getBody().childNodes,kS);Y(a,e=>{n(o,e)});var t=r.select("div[id=mcepastebin]",o);for(let e=t.length-1;0<=e;e--){const a=r.create("div");o.insertBefore(a,t[e]),n(a,t[e])}return o?o.innerHTML:""}},getLastRng:a.get}})(o);var r,e,n,l,t,d,c;t=o,(I.browser.isChromium()||I.browser.isSafari())&&(d=t,c=XS,d.on("PastePreProcess",e=>{e.content=c(d,e.content,e.internal)})),l=i,(n=o).addCommand("mceTogglePlainTextPaste",()=>{var e,t;e=n,"text"===(t=l).get()?(t.set("html"),Vm(e,!1)):(t.set("text"),Vm(e,!0)),e.focus()}),n.addCommand("mceInsertClipboardContent",(e,t)=>{t.html&&PS(n,t.html,t.internal,!1),t.text&&LS(n,t.text,!1)}),r=o,t=t=>e=>{t(r,e)},e=Md(r),V(e)&&r.on("PastePreProcess",t(e)),e=Id(r),V(e)&&r.on("PastePostProcess",t(e)),o.on("PreInit",()=>{var d,c,r,e,t,n;(e=o).on("cut",(n=e,e=>{!e.isDefaultPrevented()&&$S(n)&&HS(e,qS(n),VS(n),()=>{if(I.browser.isChromium()||I.browser.isFirefox()){const e=n.selection.getRng();Qf.setEditorTimeout(n,()=>{n.selection.setRng(e),n.execCommand("Delete")},0)}else n.execCommand("Delete")})})),e.on("copy",(t=e,e=>{!e.isDefaultPrevented()&&$S(t)&&HS(e,qS(t),VS(t),q)})),d=o,c=a,Pd(d)&&d.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),Ld(d)||d.on("drop",e=>{var t=e.dataTransfer;t&&(t=t,G(t.files,e=>/^image\//.test(e.type)))&&e.preventDefault()}),d.on("drop",e=>{if(!e.isDefaultPrevented()){const r=WS(d,e);if(!de(r)){const n=MS(e.dataTransfer),o=IS(n,bS());if(FS(n)&&(!(t=n["text/plain"])||0!==t.indexOf("file://"))||!US(d,e,r)){var t;const a=n[bS()],i=a||n["text/html"]||n["text/plain"],s=((e,t,r,n)=>{var o=e.getParent(r,e=>Oa(t,e));if(!T(e.getParent(r,"summary")))return!0;if(o&&Q(n,"text/html")){const e=(new DOMParser).parseFromString(n["text/html"],"text/html").body;return!T(e.querySelector(o.nodeName.toLowerCase()))}return!1})(d.dom,d.schema,r.startContainer,n),l=c.get();l&&!s||i&&(e.preventDefault(),Qf.setEditorTimeout(d,()=>{d.undoManager.transact(()=>{(a||l&&s)&&d.execCommand("Delete"),KS(d,r);var e=_S(i);n["text/html"]?PS(d,e,o,!0):LS(d,e,!0)})}))}}}}),d.on("dragstart",e=>{c.set(!0)}),d.on("dragover dragend",e=>{Ld(d)&&!c.get()&&(e.preventDefault(),KS(d,WS(d,e))),"dragend"===e.type&&c.set(!1)}),(r=d).on("input",e=>{if("deleteByDrag"===e.inputType){const e=L(r.dom.select("details"),e=>T(e.querySelector("summary")));Y(e,e=>{_(e.firstChild)&&e.firstChild.remove();var t=r.dom.create("summary");t.appendChild(Fo().dom),e.prepend(t)})}}),jS(o,s,i)})},JS=_,ZS=oe,e_=e=>k(e.dom),t_=t=>e=>F(ee(t),e),r_=(e,t)=>dn(ee(e),e_,t_(t)),n_=(t,e,r)=>{var e=new Gn(t,e),n=(r?e.next:e.prev).bind(e);let o=t;for(let e=r?t:n();e&&!JS(e);e=n())ca(e)&&(o=e);return o},o_=e=>{var t=((e,t)=>{const r=z.fromRangeStart(e).getNode(),n=(e=r,t=t,dn(ee(e),e=>{return t=e,mo(t.dom)||No(e);var t},t_(t)).getOr(ee(t)).dom),o=n_(r,n,!1),a=n_(r,n,!0),i=document.createRange();return r_(o,n).fold(()=>{ZS(o)?i.setStart(o,0):i.setStartBefore(o)},e=>i.setStartBefore(e.dom)),r_(a,n).fold(()=>{ZS(a)?i.setEnd(a,a.data.length):i.setEndAfter(a)},e=>i.setEndAfter(e.dom)),i})(e.selection.getRng(),e.getBody());e.selection.setRng(Ih(t))},a_=((Lk=Tk=Tk||{}).Before="before",Lk.After="after",(r,t)=>{return e=L(r,e=>{return t>=e.top&&t<=e.bottom}),be(e,(e,o)=>e.fold(()=>W.some(o),e=>{var t=Math.min(o.left,e.left),r=Math.min(o.top,e.top),n=Math.max(o.right,e.right),e=Math.max(o.bottom,e.bottom);return W.some({top:r,right:n,bottom:e,left:t,width:n-t,height:e-r})}),W.none()).fold(()=>[[],r],o=>{var{pass:e,fail:t}=he(r,e=>{return n=e=e,r=t=o,n=Math.max(0,Math.min(n.bottom,r.bottom)-Math.max(n.top,r.top))/Math.min(e.height,t.height),e.top<t.bottom&&e.bottom>t.top&&.5<n;var t,r,n});return[e,t]});var e}),i_=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),s_=(e,n,o)=>{const a=e=>ca(e.node)?W.some(e):ne(e.node)?s_(Be(e.node.childNodes),n,o):W.none(),t=(e,r)=>{const t=Re(e,(e,t)=>r(e,n,o)-r(t,n,o));return((e,t)=>{if(2<=e.length){var r=a(e[0]).getOr(e[0]),e=a(e[1]).getOr(e[1]);if(Math.abs(t(r,n,o)-t(e,n,o))<2){if(oe(r.node))return W.some(r);if(oe(e.node))return W.some(e)}}return W.none()})(t,r).orThunk(()=>De(t,a))},[r,i]=a_(M1(e),o),{pass:s,fail:l}=he(i,e=>e.top<o);return t(r,i_).orThunk(()=>t(l,us)).orThunk(()=>t(s,us))},l_=(e,r,t)=>((e,t,r)=>{const n=ee(e),o=Pr(n),a=(e=o,i=t,s=r,W.from(e.dom.elementFromPoint(i,s)).map(Sr).filter(e=>Br(n,e)).getOr(n));var i,s;{var l=n,d=t,c=r;const u=(t,e)=>{const r=L(t.dom.childNodes,b(e=>ne(e)&&e.classList.contains("mce-drag-container")));return e.fold(()=>s_(r,d,c),t=>{var e=L(r,e=>e!==t.dom);return s_(e,d,c)}).orThunk(()=>(F(t,l)?W.none():Ir(t)).bind(e=>u(e,W.some(t))))};return u(a,W.none())}})(e,r,t).filter(e=>yc(e.node)).map(e=>{return t=r,{node:(e=e).node,position:Math.abs(e.left-t)<Math.abs(e.right-t)?Tk.Before:Tk.After};var t}),d_=e=>{var t,r=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:r.top+(null!=(t=null==e?void 0:e.scrollY)?t:0)-n.clientTop,left:r.left+(null!=(t=null==e?void 0:e.scrollX)?t:0)-n.clientLeft}},c_=e=>({target:e,srcElement:e}),u_=(e,t,r,n)=>{s=e,r=(t=>{const r=pS(),e=(n=t,W.from(n[oS]));var n;return lS(t),tS(r),r.dropEffect=t.dropEffect,r.effectAllowed=t.effectAllowed,n=t,W.from(n[JE]).each(e=>r.setDragImage(e.image,e.x,e.y)),Y(t.types,e=>{"Files"!==e&&r.setData(e,t.getData(e))}),Y(t.files,e=>r.items.add(e)),n=t,W.from(n[ZE]).each(e=>{var t;t=r,e=e,eS(e)(t)}),e.each(e=>{iS(t,e),iS(r,e)}),r})(r),("dragstart"===s?(tS(r),sS):"drop"===s?(rS(r),lS):(nS(r),dS))(r);var o,a,i,s=r;return S(n)?(r=e,o=t,a=s,i=A("Function not supported on simulated event."),{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:r,composedPath:i,initEvent:i,preventDefault:q,stopImmediatePropagation:q,stopPropagation:q,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:i,initMouseEvent:i,getModifierState:i,dataTransfer:a,...c_(o)}):(r=e,i=t,a=s,{...n,dataTransfer:a,type:r,...c_(i)})},m_=k,f_=(Bk=[m_,mo],t=>{for(let e=0;e<Bk.length;e++)if(Bk[e](t))return!0;return!1}),g_=(r,n)=>t=>()=>{var e="left"===r?t.scrollX:t.scrollY;t.scroll({[r]:e+n,behavior:"smooth"})},p_=g_("left",-32),h_=g_("left",32),v_=g_("top",-32),b_=g_("top",32),y_=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},C_=(e,t,r,n,o)=>{"dragstart"===t&&hS(n,e.dom.getOuterHTML(r));r=u_(t,r,n,o);return e.dispatch(t,r)},w_=(e,w)=>{const x=Ui((e,t)=>{return n=e,o=t,(r=w)._selectionOverrides.hideFakeCaret(),void l_(r.getBody(),n,o).fold(()=>r.selection.placeCaretAt(n,o),e=>{e=r._selectionOverrides.showCaret(1,e.node,e.position===Tk.Before,!1);e?r.selection.setRng(e):r.selection.placeCaretAt(n,o)});var r,n,o},0),k=(w.on("remove",x.cancel),e);return C=>e.on(r=>{const n=Math.max(Math.abs(C.screenX-r.screenX),Math.abs(C.screenY-r.screenY));if(!r.dragging&&10<n){const x=C_(w,"dragstart",r.element,r.dataTransfer,C);if(H(x.dataTransfer)&&(r.dataTransfer=x.dataTransfer),x.isDefaultPrevented())return;r.dragging=!0,w.focus()}if(r.dragging){const n=C.currentTarget===w.getDoc().documentElement,p=(l=r,g=C,u=(u=d=w).inline?d_(u.getBody()):{left:0,top:0},f=(m=d).getBody(),m=m.inline?{left:f.scrollLeft,top:f.scrollTop}:{left:0,top:0},f=d,{pageX:(e={pageX:(f=(d=g).target.ownerDocument!==f.getDoc()?(g=d_(f.getContentAreaContainer()),t=(f=f).getBody(),c=f.getDoc().documentElement,e={left:t.scrollLeft,top:t.scrollTop},t={left:t.scrollLeft||c.scrollLeft,top:t.scrollTop||c.scrollTop},c=f.inline?e:t,{left:d.pageX-g.left+c.left,top:d.pageY-g.top+c.top}):{left:d.pageX,top:d.pageY}).left-u.left+m.left,pageY:f.top-u.top+m.top}).pageX-l.relX,pageY:e.pageY+5});t=r.ghost,g=w.getBody(),t.parentNode!==g&&g.appendChild(t);{c=r.ghost;d=p;f=r.width;u=r.height;m=r.maxX;l=r.maxY;var o=C.clientY;var a=C.clientX;g=w.getContentAreaContainer();var i=w.getWin();r=k;var s=n;let e=0,t=0;c.style.left=d.pageX+"px",c.style.top=d.pageY+"px",m<d.pageX+f&&(e=d.pageX+f-m),l<d.pageY+u&&(t=d.pageY+u-l),c.style.width=f-e+"px",c.style.height=u-t+"px";const h=g.clientHeight,v=g.clientWidth,b=o+g.getBoundingClientRect().top,y=a+g.getBoundingClientRect().left;r.on(e=>{e.intervalId.clear(),e.dragging&&s&&(o+8>=h?e.intervalId.set(b_(i)):o-8<=0?e.intervalId.set(v_(i)):a+8>=v?e.intervalId.set(h_(i)):a-8<=0?e.intervalId.set(p_(i)):b+16>=window.innerHeight?e.intervalId.set(b_(window)):b-16<=0?e.intervalId.set(v_(window)):y+16>=window.innerWidth?e.intervalId.set(h_(window)):y-16<=0&&e.intervalId.set(p_(window)))})}x.throttle(C.clientX,C.clientY)}var l,d,c,e,u,m,f,t,g})},x_=(e,r,n)=>{e.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>C_(r,"dragend",t.element,t.dataTransfer),e=>C_(r,"dragend",t.element,t.dataTransfer,e))}),k_(e)},k_=e=>{e.on(e=>{e.intervalId.clear(),y_(e.ghost)}),e.clear()},E_=t=>{const r=Fi(),e=ae.DOM,n=document,o=(m=r,f=t,e=>{var t,r,n,o;0===e.button&&(t=Ce(f.dom.getParents(e.target),f_).getOr(null),H(t))&&(r=f.dom,n=f.getBody(),o=t,m_(o))&&o!==n&&r.isEditable(o.parentElement)&&(n=f.dom.getPos(t),r=f.getBody(),o=f.getDoc().documentElement,m.set({element:t,dataTransfer:pS(),dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(f.inline?r.scrollWidth:o.offsetWidth)-2,maxY:(f.inline?r.scrollHeight:o.offsetHeight)-2,relX:e.pageX-n.x,relY:e.pageY-n.y,width:t.offsetWidth,height:t.offsetHeight,ghost:(r=f,e=(o=t).offsetWidth,n=t.offsetHeight,r=r.dom,o=o.cloneNode(!0),r.setStyles(o,{width:e,height:n}),r.setAttrib(o,"data-mce-selected",null),t=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),r.setStyles(t,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:e,height:n}),r.setStyles(o,{margin:0,boxSizing:"border-box"}),t.appendChild(o),t),intervalId:(t=>{const r=Bi(W.none()),n=()=>r.get().each(e=>clearInterval(e));return{clear:()=>{n(),r.set(W.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:e=>{n(),r.set(W.some(setInterval(e,t)))}}})(100)}))}),a=w_(r,t),i=(c=r,o=>{c.on(n=>{var e,t,r;n.intervalId.clear(),n.dragging&&(t=(e=>{var t=e.getSel();if(H(t)){const e=t.getRangeAt(0).startContainer;return oe(e)?e.parentNode:e}return null})((e=u).selection),r=n.element,de(t)||t===r||e.dom.isChildOf(t,r)||!e.dom.isEditable(t)||(e=null!=(r=u.getDoc().elementFromPoint(o.clientX,o.clientY))?r:u.getBody(),C_(u,"drop",e,n.dataTransfer,o).isDefaultPrevented())||u.undoManager.transact(()=>{var e,t,r;e=u.dom,t=n.element,r=e.getParent(t.parentNode,e.isBlock),y_(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&Uo(ee(r)),(""===(t=n.dataTransfer.getData("text/html"))?W.none():W.some(t)).each(e=>u.insertContent(e)),u._selectionOverrides.hideFakeCaret()}),C_(u,"dragend",u.getBody(),n.dataTransfer,o))}),k_(c)}),s=(l=r,e=>x_(l,d,W.some(e)));var l,d,c,u,m,f;(d=u=t).on("mousedown",o),t.on("mousemove",a),t.on("mouseup",i),e.bind(n,"mousemove",a),e.bind(n,"mouseup",s),t.on("remove",()=>{e.unbind(n,"mousemove",a),e.unbind(n,"mouseup",s)}),t.on("keydown",e=>{e.keyCode===ie.ESC&&x_(r,t,W.none())})},S_=k,__=(e,t)=>kh(e.getBody(),t),N_=d=>{const c=d.selection,u=d.dom,m=d.getBody(),o=hc(d,m,u.isBlock,()=>sg(d)),i="sel-"+u.uniqueId(),s="data-mce-selected";let l;const f=e=>e!==m&&(S_(e)||po(e))&&u.isChildOf(e,m)&&u.isEditable(e.parentNode),g=(e,t,r,n=!0)=>d.dispatch("ShowCaret",{target:t,direction:e,before:r}).isDefaultPrevented()?null:(n&&c.scrollIntoView(t,-1===e),o.show(r,t)),t=e=>Go(e)||Jo(e)||Zo(e),p=e=>t(e.startContainer)||t(e.endContainer),h=(r,n)=>{if(r)if(r.collapsed){if(!p(r)){const d=n?1:-1,c=Hc(d,m,r),i=c.getNode(!n);if(H(i)){if(yc(i))return g(d,i,!!n&&!c.isAtEnd(),!1);if(Ko(i)&&k(i.nextSibling)){const d=u.createRng();return d.setStart(i,0),d.setEnd(i,0),d}}const s=c.getNode(n);if(H(s)){if(yc(s))return g(d,s,!n&&!c.isAtEnd(),!1);if(Ko(s)&&k(s.previousSibling)){const d=u.createRng();return d.setStart(s,1),d.setEnd(s,1),d}}}}else{let e=r.startContainer,t=r.startOffset;n=r.endOffset;if(oe(e)&&0===t&&S_(e.parentNode)&&(e=e.parentNode,t=u.nodeIndex(e),e=e.parentNode),ne(e)&&n===t+1&&e===r.endContainer){const m=e.childNodes[t];if(f(m)){n=m;r=n.cloneNode(!0),r=d.dispatch("ObjectSelected",{target:n,targetClone:r});if(r.isDefaultPrevented())return null;const o=((e,t)=>{const r=ee(d.getBody()),n=d.getDoc(),o=un(r,"#"+i).getOrThunk(()=>{var e=_r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',n);return dr(e,"id",i),te(r,e),e}),a=u.createRng();An(o),Rn(o,[Rr(Co,n),ee(t),Rr(Co,n)]),a.setStart(o.dom.firstChild,1),a.setEnd(o.dom.lastChild,0),bn(o,{top:u.getPos(e,d.getBody()).y+"px"}),Uf(o);t=c.getSel();return t&&(t.removeAllRanges(),t.addRange(a)),a})(n,r.targetClone),a=ee(n);return Y(Wn(ee(d.getBody()),`*[${s}]`),e=>{F(a,e)||gr(e,s)}),u.getAttrib(n,s)||n.setAttribute(s,"1"),l=n,b(),o;return}}}return null},v=()=>{l&&l.removeAttribute(s),un(ee(d.getBody()),"#"+i).each(re),l=null},b=()=>{o.hide()};if(!ay(d)){d.on("click",e=>{u.isEditable(e.target)||(e.preventDefault(),d.focus())}),d.on("blur NewBlock",v),d.on("ResizeWindow FullscreenStateChanged",o.reposition),d.on("tap",e=>{var t=e.target,r=__(d,t);S_(r)?(e.preventDefault(),RC(d,r).each(h)):f(t)&&RC(d,t).each(h)},!0),d.on("mousedown",t=>{var e,r,n,o,a,i,s=t.target;if((s===m||"HTML"===s.nodeName||u.isChildOf(s,m))&&(e=d,r=t.clientX,n=t.clientY,i=ee(e.getBody()),i=e.inline?i:ee(Pr(i).dom.documentElement),e=e.inline,r=r,n=n,o=(a=i).dom.getBoundingClientRect(),r={x:r-(e?o.left+a.dom.clientLeft+Dy(a):0),y:n-(e?o.top+a.dom.clientTop+By(a):0)},n=i,e=r.x,o=r.y,a=Oy(n),n=Ty(n),0<=e)&&0<=o&&e<=a&&o<=n){v(),b();const l=__(d,s);S_(l)?(t.preventDefault(),RC(d,l).each(h)):l_(m,t.clientX,t.clientY).each(e=>{t.preventDefault(),(e=g(1,e.node,e.position===Tk.Before,!1))&&c.setRng(e),(ne(l)?l:d.getBody()).focus()})}}),d.on("keypress",e=>{ie.modifierPressed(e)||S_(c.getNode())&&e.preventDefault()}),d.on("GetSelectionRange",e=>{let t=e.range;l&&(l.parentNode?((t=t.cloneRange()).selectNode(l),e.range=t):l=null)}),d.on("SetSelectionRange",e=>{e.range=(t=e.range,r=d.schema.getVoidElements(),n=u.createRng(),i=t.startContainer,o=t.startOffset,a=t.endContainer,t=t.endOffset,Q(r,i.nodeName.toLowerCase())?0===o?n.setStartBefore(i):n.setStartAfter(i):n.setStart(i,o),Q(r,a.nodeName.toLowerCase())?0===t?n.setEndBefore(a):n.setEndAfter(a):n.setEnd(a,t),n);var t,r,n,o,a,i=h(e.range,e.forward);i&&(e.range=i)}),d.on("AfterSetSelectionRange",e=>{var e=e.range,t=e.startContainer.parentElement;p(e)||ne(e=t)&&"mcepastebin"===e.id||b(),e=t,H(e)&&u.hasClass(e,"mce-offscreen-selection")||v()});var e=d;if(E_(e),kd(e)){var a=e;const y=e=>{var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(K(t.types,"Files")||0<t.files.length)&&(e.preventDefault(),"drop"===e.type)&&Uy(a,"Dropped file type is not supported")},C=e=>{tg(a,e.target)&&y(e)},w=()=>{const t=ae.DOM,r=a.dom,n=document,o=a.inline?a.getBody():a.getDoc(),e=["drop","dragover"];Y(e,e=>{t.bind(n,e,C),r.bind(o,e,y)}),a.on("remove",()=>{Y(e,e=>{t.unbind(n,e,C),r.unbind(o,e,y)})})};a.on("init",()=>{Qf.setEditorTimeout(a,w,0)})}{var r=d;const x=Ui(()=>{var e;!r.removed&&r.getBody().contains(document.activeElement)&&(e=r.selection.getRng()).collapsed&&(e=AC(r,e,!1),r.selection.setRng(e))},0);r.on("focus",()=>{x.throttle()}),r.on("blur",()=>{x.cancel()})}(n=d).on("init",()=>{n.on("focusin",e=>{var t=e.target;if(po(t)){const e=kh(n.getBody(),t),r=k(e)?e:t;n.selection.getNode()!==r&&RC(n,r).each(e=>n.selection.setRng(e))}})})}return{showCaret:g,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(ea(e),c.scrollIntoView(e))},hideFakeCaret:b,destroy:()=>{o.destroy(),l=null}};var n},R_=(e,t,r,n,o)=>{if(oe(r)&&(n<0||n>r.data.length))return[];var a=o&&oe(r)?[((t,e)=>{let r=e;for(let e=t.previousSibling;oe(e);e=e.previousSibling)r+=e.data.length;return r})(r,n)]:[n];let i=r;for(;i!==t&&i.parentNode;)a.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?a.reverse():[]},A_=(e,t,r,n,o,a,i=!1)=>({start:R_(e,t,r,n,i),end:R_(e,t,o,a,i)}),O_=(e,t)=>{const r=t.slice(),n=r.pop();return N(n)?be(r,(e,t)=>e.bind(e=>W.from(e.childNodes[t])),W.some(e)).bind(e=>oe(e)&&(n<0||n>e.data.length)?W.none():W.some({node:e,offset:n})):W.none()},T_=(e,t)=>O_(e,t.start).bind(({node:n,offset:o})=>O_(e,t.end).map(({node:e,offset:t})=>{var r=document.createRange();return r.setStart(n,o),r.setEnd(e,t),r})),B_=(e,t,r)=>{var n;t&&e.isEmpty(t)&&!r(t)&&(n=t.parentNode,e.remove(t,oe(t.firstChild)&&ga(t.firstChild.data)),B_(e,n,r))},D_=(e,t,r,n=!0)=>{var o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(oe(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),oe(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),B_(e,o,r),o!==a)&&B_(e,a,r)},P_=(e,t)=>W.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),L_=(e,t,r)=>{r=e.dynamicPatternsLookup({text:r,block:t});return{...e,blockPatterns:sl(r).concat(e.blockPatterns),inlinePatterns:ll(r).concat(e.inlinePatterns)}},M_=(e,t,r,n)=>{e=e.createRng();return e.setStart(t,0),e.setEnd(r,n),e.toString()},I_=(n,o,a)=>{((e,t)=>{if(oe(e)&&e.length<=0)return W.some(wx(e,0));{const r=os(xx);return W.from(r.forwards(e,0,kx(e),t)).map(e=>wx(e.container,0))}})(o,o).each(e=>{const r=e.container;_x(r,a.start.length,o).each(e=>{var t=n.createRng();t.setStart(r,0),t.setEnd(e.container,e.offset),D_(n,t,e=>e===o)});var e=ee(r),t=ko(e);/^\s[^\s]/.test(t)&&(e=e,t=t.slice(1),xo.set(e,t))})},F_=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),U_=(e,t)=>{e=e.createRng();return e.setStartAfter(t.start),e.setEndBefore(t.end),e},z_=(e,t,r)=>{var r=T_(e.getRoot(),r).getOrDie("Unable to resolve path range"),n=r.startContainer,o=r.endContainer,o=0===r.endOffset?o:o.splitText(r.endOffset),n=0===r.startOffset?n:n.splitText(r.startOffset),r=n.parentNode;return{prefix:t,end:o.parentNode.insertBefore(F_(e,t+"-end"),o),start:r.insertBefore(F_(e,t+"-start"),n)}},j_=(e,t,r)=>{B_(e,e.get(t.prefix+"-end"),r),B_(e,e.get(t.prefix+"-start"),r)},H_=e=>0===e.start.length,V_=(n,t,o,e)=>{const a=t.start;var r;return Nx(n,e.container,e.offset,(r=a,(e,t)=>{e=e.data.substring(0,t),t=e.lastIndexOf(r.charAt(r.length-1)),e=e.lastIndexOf(r);return-1!==e?e+r.length:-1!==t?t+1:-1}),o).bind(r=>{var e=null!=(e=null==(e=o.textContent)?void 0:e.indexOf(a))?e:-1;if(-1!==e&&r.offset>=e+a.length){const t=n.createRng();return t.setStart(r.container,r.offset-a.length),t.setEnd(r.container,r.offset),W.some(t)}{const e=r.offset-a.length;return Sx(r.container,e,o).map(e=>{var t=n.createRng();return t.setStart(e.container,e.offset),t.setEnd(r.container,r.offset),t}).filter(e=>e.toString()===a).orThunk(()=>V_(n,t,o,wx(r.container,0)))}})},q_=(n,o,i,s)=>{const l=n.dom,d=l.getRoot(),c=i.pattern,u=i.position.container,m=i.position.offset;return Sx(u,m-i.pattern.end.length,o).bind(e=>{const a=A_(l,d,e.container,e.offset,u,m,s);if(H_(c))return W.some({matches:[{pattern:c,startRng:a,endRng:a}],position:e});{const u=$_(n,i.remainingPatterns,e.container,e.offset,o,s),m=u.getOr({matches:[],position:e}),t=m.position,r=((e,t,r,n,o,a=!1)=>{if(0!==t.start.length||a)return Ex(r,n,o).bind(r=>V_(e,t,o,r).bind(e=>{var t;if(a){if(e.endContainer===r.container&&e.endOffset===r.offset)return W.none();if(0===r.offset&&(null==(t=e.endContainer.textContent)?void 0:t.length)===e.endOffset)return W.none()}return W.some(e)}));{const t=e.createRng();return t.setStart(r,n),t.setEnd(r,n),W.some(t)}})(l,c,t.container,t.offset,o,u.isNone());return r.map(e=>{[o,t,r,n=!1]=[l,d,e,s];var t,r,n,o=A_(o,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n);return{matches:m.matches.concat([{pattern:c,startRng:o,endRng:a}]),position:wx(e.startContainer,e.startOffset)}})}})},$_=(a,i,s,l,d,c)=>{const e=a.dom;return Ex(s,l,e.getRoot()).bind(t=>{var r=M_(e,d,s,l);for(let e=0;e<i.length;e++){var n=i[e];if(lt(r,n.end)){var o=i.slice(),n=(o.splice(e,1),q_(a,d,{pattern:n,remainingPatterns:o,position:t},c));if(n.isNone()&&0<l)return $_(a,i,s,l-1,d,c);if(n.isSome())return n}}return W.none()})},W_=(t,e,r)=>{t.selection.setRng(r),"inline-format"===e.type?Y(e.format,e=>{t.formatter.apply(e)}):t.execCommand(e.cmd,!1,e.value)},K_=(e,t,r,n,o,a)=>{var i,s;return i=$_(e,o.inlinePatterns,r,n,t,a).fold(()=>[],e=>e.matches),s=$_(e,(e=o.inlinePatterns,Re(e,(e,t)=>t.end.length-e.end.length)),r,n,t,a).fold(()=>[],e=>e.matches),o=Ee(i,t=>G(s,e=>t.pattern.start===e.pattern.start&&t.pattern.end===e.pattern.end)),i.length===s.length?o?i:s:i.length>s.length?i:s},G_=(u,e)=>{if(0!==e.length){const m=u.dom,t=u.selection.getBookmark(),r=((n,e)=>{const o=Zi("mce_textpattern"),a=ve(e,(e,t)=>{var r=z_(n,o+("_end"+e.length),t.endRng);return e.concat([{...t,endMarker:r}])},[]);return ve(a,(e,t)=>{var r=a.length-e.length-1,r=H_(t.pattern)?t.endMarker:z_(n,o+"_start"+r,t.startRng);return e.concat([{...t,startMarker:r}])},[])})(m,e);Y(r,e=>{const t=m.getParent(e.startMarker.start,m.isBlock),r=e=>e===t;{var n,o,a,i;H_(e.pattern)?(n=u,o=e.pattern,a=e.endMarker,i=r,a=U_(n.dom,a),D_(n.dom,a,i),W_(n,o,a)):(i=u,n=e.pattern,o=e.startMarker,a=e.endMarker,s=r,l=i.dom,d=U_(l,a),c=U_(l,o),D_(l,c,s),D_(l,d,s),c={prefix:o.prefix,start:o.end,end:a.start},d=U_(l,c),W_(i,n,d))}var s,l,d,c;j_(m,e.endMarker,r),j_(m,e.startMarker,r)}),u.selection.moveToBookmark(t)}},Y_=(s,a)=>{const l=s.selection.getRng();return P_(s,l).map(e=>{var t;const r=Math.max(0,l.startOffset),n=L_(a,e,null!=(t=e.textContent)?t:""),o=K_(s,e,l.startContainer,r,n,!0),i=((e,t,r)=>{const n=e.dom,o=kl(e);if(!n.is(t,o))return[];const a=null!=(e=t.textContent)?e:"";return((e,t)=>{e=e;const r=Re(e,(e,t)=>t.start.length-e.start.length),n=t.replace(Co," ");return Ce(r,e=>0===t.indexOf(e.start)||0===n.indexOf(e.start))})(r.blockPatterns,a).map(e=>J.trim(a).length===e.start.length?[]:[{pattern:e,range:A_(n,n.getRoot(),t,0,t,0,!0)}]).getOr([])})(s,e,n);return(0<i.length||0<o.length)&&(s.undoManager.add(),s.undoManager.extra(()=>{s.execCommand("mceInsertNewLine")},()=>{s.insertContent(yo),G_(s,o),a=s,0!==(e=i).length&&(t=a.selection.getBookmark(),Y(e,e=>{{var t=a;const r=t.dom,n=e.pattern,o=T_(r.getRoot(),e.range).getOrDie("Unable to resolve path range");return P_(t,o).each(e=>{"block-format"===n.type?(e=>{e=t.formatter.get(e);return le(e)&&Oe(e).exists(e=>Q(e,"block"))})(n.format)&&t.undoManager.transact(()=>{I_(t.dom,e,n),t.formatter.apply(n.format)}):"block-command"===n.type&&t.undoManager.transact(()=>{I_(t.dom,e,n),t.execCommand(n.cmd,!1,n.value)})}),!0}}),a.selection.moveToBookmark(t));var a,e=s.selection.getRng(),t=Ex(e.startContainer,e.startOffset,s.dom.getRoot());s.execCommand("mceInsertNewLine"),t.each(e=>{var t=e.container;t.data.charAt(e.offset-1)===yo&&(t.deleteData(e.offset-1,1),B_(s.dom,t.parentNode,e=>e===s.dom.getRoot()))})}),!0)}).getOr(!1)},X_=(t,r,n)=>{for(let e=0;e<t.length;e++)if(n(t[e],r))return!0;return!1},Q_=a=>{const r=J.each,n=ie.BACKSPACE,o=ie.DELETE,i=a.dom,s=a.selection,e=a.parser,t=I.browser,l=t.isFirefox(),d=t.isChromium()||t.isSafari(),c=I.deviceType.isiPhone()||I.deviceType.isiPad(),u=I.os.isMacOS()||I.os.isiOS(),m=(e,t)=>{try{a.getDoc().execCommand(e,!1,String(t))}catch(e){}},f=e=>e.isDefaultPrevented(),g=()=>{a.shortcuts.add("meta+a",null,"SelectAll")},p=()=>{a.inline||i.bind(a.getDoc(),"mousedown mouseup",e=>{var t;e.target===a.getDoc().documentElement&&(t=s.getRng(),a.getBody().focus(),"mousedown"===e.type?Go(t.startContainer)||s.placeCaretAt(e.clientX,e.clientY):s.setRng(t))})},h=()=>{Range.prototype.getClientRects||a.on("mousedown",e=>{if(!f(e)&&"HTML"===e.target.nodeName){const e=a.getBody();e.blur(),Qf.setEditorTimeout(a,()=>{e.focus()})}})},v=()=>{const r=_d(a);a.on("click",e=>{var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&i.isEditable(t.parentNode)&&(e.preventDefault(),a.selection.select(t),a.nodeChanged()),"A"===t.nodeName&&i.hasClass(t,r)&&0===t.childNodes.length&&i.isEditable(t.parentNode)&&(e.preventDefault(),s.select(t))})},b=()=>{a.on("keydown",e=>{if(!f(e)&&e.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){var t=s.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},y=()=>{bd(a)||a.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),Xl(a)||m("enableObjectResizing",!1)})},C=()=>{a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{a.inline||a.on("keydown",()=>{document.activeElement===document.body&&a.getWin().focus()})},x=()=>{a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",e=>{"HTML"===e.target.nodeName&&(e=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(e),a.selection.normalize(),a.nodeChanged())}))},k=()=>{u&&a.on("keydown",e=>{!ie.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),a.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},E=()=>{a.on("click",e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},S=()=>{a.on("init",()=>{a.dom.bind(a.getBody(),"submit",e=>{e.preventDefault()})})},_=q;if(ay(a))d&&(p(),v(),S(),g(),c)&&(w(),x(),E()),l&&(h(),y(),C(),k());else{a.on("keydown",t=>{if(!f(t)&&t.keyCode===ie.BACKSPACE){var t=s.getRng(),r=t.startContainer,n=t.startOffset,o=i.getRoot();let e=r;if(t.collapsed&&0===n){for(;e.parentNode&&e.parentNode.firstChild===e&&e.parentNode!==o;)e=e.parentNode;"BLOCKQUOTE"===e.nodeName&&(a.formatter.toggle("blockquote",void 0,e),(t=i.createRng()).setStart(r,0),t.setEnd(r,0),s.setRng(t))}}});{const N=e=>{var t=i.create("body"),e=e.cloneContents();return t.appendChild(e),s.serializer.serialize(t,{format:"html"})};a.on("keydown",e=>{var t,r=e.keyCode;if(!f(e)&&(r===o||r===n)&&a.selection.isEditable()){const n=a.selection.isCollapsed(),o=a.getBody();n&&(!i.isEmpty(o)||(e=>{e=ee(e);return G(Wn(e,'[contenteditable="true"]'),e=>Ir(e).exists(e=>!fn(e)))})(o))||!n&&(r=a.selection.getRng(),r=N(r),(t=i.createRng()).selectNode(a.getBody()),r!==N(t))||(e.preventDefault(),a.setContent(""),o.firstChild&&i.isBlock(o.firstChild)?a.selection.setCursorLocation(o.firstChild,0):a.selection.setCursorLocation(o,0),a.nodeChanged())}})}if(I.windowsPhone||a.on("keyup focusin mouseup",e=>{var t;ie.modifierPressed(e)||(t=(e=a).getBody(),(e=e.selection.getRng()).startContainer===e.endContainer&&e.startContainer===t&&0===e.startOffset&&e.endOffset===t.childNodes.length)||s.normalize()},!0),d&&(p(),v(),a.on("init",()=>{m("DefaultParagraphSeparator",kl(a))}),S(),b(),e.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),(c?(w(),x(),E):g)()),l){a.on("keydown",e=>{if(!f(e)&&e.keyCode===n&&a.getBody().getElementsByTagName("hr").length&&s.isCollapsed()&&0===s.getRng().startOffset){const a=s.getNode(),n=a.previousSibling;"HR"===a.nodeName?(i.remove(a),e.preventDefault()):n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(i.remove(n),e.preventDefault())}}),h();{const R=()=>{const e=i.getAttribs(s.getStart().cloneNode(!1));return()=>{const t=s.getStart();t!==a.getBody()&&(i.setAttrib(t,"style",null),r(e,e=>{t.setAttributeNode(e.cloneNode(!0))}))}},A=()=>!s.isCollapsed()&&i.getParent(s.getStart(),i.isBlock)!==i.getParent(s.getEnd(),i.isBlock);a.on("keypress",e=>{var t;return!(!(f(e)||8!==e.keyCode&&46!==e.keyCode)&&A()&&(t=R(),a.getDoc().execCommand("delete",!1),t(),e.preventDefault(),1))}),i.bind(a.getDoc(),"cut",e=>{if(!f(e)&&A()){const e=R();Qf.setEditorTimeout(a,()=>{e()})}})}y(),a.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(i.select("a:not([data-mce-block])"),e=>{var t;let r=e.parentNode;var n=i.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!i.isBlock(r);){if((null==(t=r.parentNode)?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}i.add(r,"br",{"data-mce-bogus":1})}})}),C(),k(),b(),a.on("drop",e=>{var t=null==(t=e.dataTransfer)?void 0:t.getData("text/html");j(t)&&/^<img[^>]*>$/.test(t)&&a.dispatch("dragend",new window.DragEvent("dragend",e))})}}return{refreshContentEditable:_,isHidden:()=>{var e;return!(!l||a.removed||(e=a.selection.getSel())&&e.rangeCount&&0!==e.rangeCount)}}},J_=ae.DOM,Z_=e=>ze(e,e=>!1===S(e)),eN=e=>{var t,r=e.options.get,n=e.editorUpload.blobCache;return Z_({allow_conditional_comments:r("allow_conditional_comments"),allow_html_data_urls:r("allow_html_data_urls"),allow_svg_data_urls:r("allow_svg_data_urls"),allow_html_in_named_anchor:r("allow_html_in_named_anchor"),allow_script_urls:r("allow_script_urls"),allow_unsafe_link_target:r("allow_unsafe_link_target"),convert_fonts_to_spans:r("convert_fonts_to_spans"),fix_list_elements:r("fix_list_elements"),font_size_legacy_values:r("font_size_legacy_values"),forced_root_block:r("forced_root_block"),forced_root_block_attrs:r("forced_root_block_attrs"),preserve_cdata:r("preserve_cdata"),inline_styles:r("inline_styles"),root_name:(t=e).inline?t.getElement().nodeName.toLowerCase():void 0,sanitize:r("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},tN=e=>{e=e.options.get;return Z_({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},rN=e=>(e.inline?e.ui:e.dom).styleSheetLoader,nN=e=>{const t=rN(e),r=Kl(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=()=>{e.removed?o():e.on("remove",o)};if(0<e.contentStyles.length){let t="";J.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}var i=Promise.all(((e,t,r)=>{t=[rN(e).loadAll(t)];return e.inline?t:t.concat([e.ui.styleSheetLoader.loadAll(r)])})(e,n,r)).then(a).catch(a),s=Wl(e);if(s){var l=e;const d=ee(l.getBody()),c=Jr(Qr(d)),u=Nr("style");dr(u,"type","text/css"),te(u,Rr(s)),te(c,u),l.on("remove",()=>{re(u)})}return i},oN=e=>{if(!0!==e.removed){n=e,ay(n)||n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),(n=e).bindPendingEventDelegates(),n.initialized=!0,n.dispatch("Init"),n.focus(!0),e=(r=n).dom.getRoot(),r.inline||Wu(r)&&r.selection.getStart(!0)!==e||mu(e).each(e=>{var t=e.getNode(),t=ro(t)?mu(t).getOr(e):e;r.selection.setRng(t.toRange())}),n.nodeChanged({initial:!0});var r,e=Ad(n);V(e)&&e.call(n,n);{var t=n;const o=Td(t);o&&Qf.setEditorTimeout(t,()=>{var e=!0===o?t:t.editorManager.get(o);e&&!e.destroyed&&(e.focus(),e.selection.scrollIntoView())},100)}}var n},aN=t=>{var e=t.getElement();let r=t.getDoc();t.inline&&(J_.addClass(e,"mce-content-body"),t.contentDocument=r=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);var n,o,a,s,e=t.getBody();e.disabled=!0,t.readonly=bd(t),t._editableRoot=yd(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===J_.getStyle(e,"position",!0)&&(e.style.position="relative"),e.contentEditable="true"),e.disabled=!1,t.editorUpload=Xy(t),t.schema=ui(tN(t)),t.dom=ae(r,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Ul(t),referrerPolicy:zl(t),onSetAttrib:e=>{t.dispatch("SetAttrib",e)}}),t.parser=(s=t,(e=O0(eN(s),s.schema)).addAttributeFilter("src,href,style,tabindex",(t,r)=>{var n=s.dom,o="data-mce-"+r;let a=t.length;for(;a--;){var i=t[a];let e=i.attr(r);e&&!i.attr(o)&&0!==e.indexOf("data:")&&0!==e.indexOf("blob:")&&("style"===r?((e=n.serializeStyle(n.parseStyle(e),i.name)).length||(e=null),i.attr(o,e),i.attr(r,e)):"tabindex"===r?(i.attr(o,e),i.attr(r,null)):i.attr(o,s.convertURL(e,r,i.name)))}}),e.addNodeFilter("script",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),Qd(s)&&e.addNodeFilter("#cdata",e=>{let t=e.length;for(;t--;){var r=e[t];r.type=8,r.name="#comment",r.value="[CDATA["+s.dom.encode(null!=(r=r.value)?r:"")+"]]"}}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",e=>{let t=e.length;for(var r=s.schema.getNonEmptyElements();t--;){const s=e[t];s.isEmpty(r)&&0===s.getAll("br").length&&s.append(new xg("br",1))}}),e),t.serializer=py((d=(e=t).options.get,{...eN(e),...tN(e),...Z_({remove_trailing_brs:d("remove_trailing_brs"),pad_empty_with_br:d("pad_empty_with_br"),url_converter:d("url_converter"),url_converter_scope:d("url_converter_scope"),element_format:d("element_format"),entities:d("entities"),entity_encoding:d("entity_encoding"),indent:d("indent"),indent_after:d("indent_after"),indent_before:d("indent_before")})}),t),t.selection=my(t.dom,t.getWin(),t.serializer,t),t.annotator=Lm(t),t.formatter=sC(t),t.undoManager=dC(t),t._nodeChangeDispatcher=new QE(t),t._selectionOverrides=N_(t);{var i=t;const g=Fi(),p=Bi(!1),h=zi(e=>{i.dispatch("longpress",{...e,type:"longpress"}),p.set(!0)},400);i.on("touchstart",t=>{Aw(t).each(e=>{h.cancel();e={x:e.clientX,y:e.clientY,target:t.target};h.throttle(t),p.set(!1),g.set(e)})},!0),i.on("touchmove",e=>{h.cancel(),Aw(e).each(n=>{g.on(e=>{var t,r;t=n,e=e,r=Math.abs(t.clientX-e.x),t=Math.abs(t.clientY-e.y),(5<r||5<t)&&(g.clear(),p.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",t=>{h.cancel(),"touchcancel"!==t.type&&g.get().filter(e=>e.target.isEqualNode(t.target)).each(()=>{p.get()?t.preventDefault():i.dispatch("tap",{...t,type:"tap"})})},!0)}(a=e=t).on("click",e=>{a.dom.getParent(e.target,"details")&&e.preventDefault()}),(o=e).parser.addNodeFilter("details",e=>{const t=nc(o);Y(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})}),o.serializer.addNodeFilter("details",e=>{const t=oc(o);Y(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})});{var l=t;const v="contenteditable",b=" "+J.trim(Yd(l))+" ",y=" "+J.trim(Gd(l))+" ",C=Pw(b),w=Pw(y),x=Xd(l);0<x.length&&l.on("BeforeSetContent",r=>{{var n=l,o=x;let e=o.length,t=r.content;if("raw"!==r.format){for(;e--;)t=t.replace(o[e],((o,a,i)=>function(e){var t=arguments,r=t[t.length-2],n=0<r?a.charAt(r-1):"";if('"'===n)return e;if(">"===n){const o=a.lastIndexOf("<",r);if(-1!==o&&-1!==a.substring(o,r).indexOf('contenteditable="false"'))return e}return'<span class="'+i+'" data-mce-content="'+o.dom.encode(t[0])+'">'+o.dom.encode("string"==typeof t[1]?t[1]:t[0])+"</span>"})(n,t,Gd(n)));r.content=t}}}),l.parser.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var r=e[t];C(r)?r.attr(v,"true"):w(r)&&r.attr(v,"false")}}),l.serializer.addAttributeFilter(v,e=>{let t=e.length;for(;t--;){var r=e[t];(C(r)||w(r))&&(0<x.length&&r.attr("data-mce-content")?(r.name="#text",r.type=3,r.raw=!0,r.value=r.attr("data-mce-content")):r.attr(v,null))}})}if(!ay(t)){(n=t).on("mousedown",e=>{3<=e.detail&&(e.preventDefault(),o_(n))});var d=t;{var c=d;const k=[",",".",";",":","!","?"],E=[32],S=()=>{return e=Wd(c),t=Kd(c),{inlinePatterns:ll(e),blockPatterns:sl(e),dynamicPatternsLookup:t};var e,t},_=()=>c.options.isSet("text_patterns_lookup"),N=(c.on("keydown",e=>{var t;13===e.keyCode&&!ie.modifierPressed(e)&&c.selection.isCollapsed()&&(0<(t=S()).inlinePatterns.length||0<t.blockPatterns.length||_())&&Y_(c,t)&&e.preventDefault()},!0),()=>{if(c.selection.isCollapsed()){var e=S();if(0<e.inlinePatterns.length||_()){var a=c,i=e;const s=a.selection.getRng();P_(a,s).map(e=>{const t=Math.max(0,s.startOffset-1),r=M_(a.dom,e,s.startContainer,t),n=L_(i,e,r),o=K_(a,e,s.startContainer,t,n,!1);0<o.length&&a.undoManager.transact(()=>{G_(a,o)})})}}});c.on("keyup",e=>{X_(E,e,(e,t)=>e===t.keyCode&&!ie.modifierPressed(t))&&N()}),c.on("keypress",e=>{X_(k,e,(e,t)=>e.charCodeAt(0)===t.charCode)&&Qf.setEditorTimeout(c,N)})}}e=XE(t);Rw(t,e),(d=t).on("NodeChange",D(Bw,d));{var u=t;const R=u.dom,A=kl(u),O=null!=(e=Jl(u))?e:"",T=(e,t)=>{var r,n,o,a,i;r=e,mC(r)&&(i=r.keyCode,!fC(r))&&(ie.metaKeyPressed(r)||r.altKey||112<=i&&i<=123||K(cC,i))||(r=u.getBody(),i=e,e=!(mC(i)&&!(fC(i)||"keyup"===i.type&&229===i.keyCode)||(e=R,n=r,o=A,!U(ee(n),!1))||(a=n.firstElementChild)&&(e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")||o!==a.nodeName.toLowerCase())),""!==R.getAttrib(r,uC)==e&&!t)||(R.setAttrib(r,uC,e?O:null),R.setAttrib(r,"aria-placeholder",e?O:null),u.dispatch("PlaceholderToggle",{state:e}),u.on(e?"keydown":"keyup",T),u.off(e?"keyup":"keydown",T))};ft(O)&&u.on("init",e=>{T(e,!0),u.on("change SetContent ExecCommand",T),u.on("paste",e=>Qf.setEditorTimeout(u,()=>T(e)))})}QS(t);d=(e=>{const n=e;return t=e,M(t.plugins,"rtc").bind(e=>W.from(e.setup)).fold(()=>(n.rtcInstance=oy(e),W.none()),e=>{return n.rtcInstance=(t=$(null),r=$(""),{init:{bindEvents:q},undoManager:{beforeChange:q,add:t,undo:t,redo:t,clear:q,reset:q,hasUndo:P,hasRedo:P,transact:t,ignore:q,extra:q},formatter:{match:P,matchAll:$([]),matchNode:$(void 0),canApply:P,closest:r,apply:q,remove:q,toggle:q,formatChanged:$({unbind:q})},editor:{getContent:r,setContent:$({content:"",html:""}),insertContent:$(""),addVisual:q},selection:{getContent:r},autocompleter:{addDecoration:q,removeDecoration:q},raw:{getModel:$(W.none())}}),W.some(()=>e().then(l=>(n.rtcInstance=(()=>{const o=e=>se(e)?e:{},{init:e,undoManager:a,formatter:i,editor:r,selection:n,autocompleter:t,raw:s}=l;return{init:{bindEvents:e.bindEvents},undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:(e,t,r)=>a.transact(r),ignore:(e,t)=>a.ignore(t),extra:(e,t,r,n)=>a.extra(r,n)},formatter:{match:(e,t,r,n)=>i.match(e,o(t),n),matchAll:i.matchAll,matchNode:i.matchNode,canApply:e=>i.canApply(e),closest:e=>i.closest(e),apply:(e,t,r)=>i.apply(e,o(t)),remove:(e,t,r,n)=>i.remove(e,o(t)),toggle:(e,t,r)=>i.toggle(e,o(t)),formatChanged:(e,t,r,n,o)=>i.formatChanged(t,r,n,o)},editor:{getContent:e=>r.getContent(e),setContent:(e,t)=>({content:r.setContent(e,t),html:""}),insertContent:(e,t)=>(r.insertContent(e),""),addVisual:r.addVisual},selection:{getContent:(e,t)=>n.getContent(t)},autocompleter:{addDecoration:t.addDecoration,removeDecoration:t.removeDecoration},raw:{getModel:()=>W.some(s.getRawModel())}}})(),l.rtc.isRemote)));var t,r});var t})(t);{var m=t,e=m.getDoc(),f=m.getBody(),e;m.dispatch("PreInit"),Bd(m)||(e.body.spellcheck=!1,J_.setAttrib(f,"spellcheck","false")),m.quirks=Q_(m),m.dispatch("PostRender"),void 0!==(e=Gl(m))&&(f.dir=e);const B=Dd(m);B&&m.on("BeforeSetContent",t=>{J.each(B,e=>{t.content=t.content.replace(e,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),m.on("SetContent",()=>{m.addVisual(m.getBody())}),m.on("compositionstart compositionend",e=>{m.composing="compositionstart"===e.type})}d.fold(()=>{const e=(e=>{let t=!1;const r=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}})(t);nN(t).then(()=>{oN(t),e()})},e=>{t.setProgressState(!0),nN(t).then(()=>{e().then(e=>{t.setProgressState(!1),oN(t),sy(t)},e=>{t.notificationManager.open({type:"error",text:String(e)}),oN(t),sy(t)})})})},iN=ce,sN=ae.DOM,lN=ae.DOM,dN=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),cN=e=>{var t=e.getElement();return e.inline?dN(null):(e=t,t=lN.create("div"),lN.insertAfter(t,e),dN(t,t))},uN=async e=>{e.dispatch("ScriptsLoaded");{var r=e;const f=J.trim(Dl(r)),g=r.ui.registry.getAll().icons,p={..._y.get("default").icons,..._y.get(f).icons};X(p,(e,t)=>{Q(g,t)||r.ui.registry.addIcon(t,e)})}d=e,l=td(d),j(l)?(t=My.get(l),d.theme=t(d,My.urls[l])||{},V(d.theme.init)&&d.theme.init(d,My.urls[l]||d.documentBaseUrl.replace(/\/$/,""))):d.theme={},t=e,l=nd(t),d=Ny.get(l),t.model=d(t,Ny.urls[l]);{var i=e;const h=[];Y(wd(i),e=>{var t=i,r=h,e=e.replace(/^\-/,""),n=Ly.get(e),o=Ly.urls[e]||t.documentBaseUrl.replace(/\/$/,"");if(e=J.trim(e),n&&-1===J.inArray(r,e)&&!t.plugins[e])try{var a=n(t,o)||{};t.plugins[e]=a,V(a.init)&&(a.init(t,o),r.push(e))}catch(r){n=t,a=e,o=r;a=Mi.translate(["Failed to initialize plugin: {0}",a]),Fm(n,"PluginLoadError",{message:a}),Hy(a,o),Uy(n,a)}})}l=(d=e).getElement(),d.orgDisplay=l.style.display;var t,n,o,a,s,l=await(j(td(d))?(n=(l=d).theme.renderUI)?n():cN(l):V(td(d))?(l=(n=d).getElement(),(s=td(n)(n,l)).editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||n.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||n.id+"_iframecontainer"),s.height=s.iframeHeight||l.offsetHeight,s):cN(d));if(o=e,a=W.from(l.api).getOr({}),s={show:W.from(a.show).getOr(q),hide:W.from(a.hide).getOr(q),isEnabled:W.from(a.isEnabled).getOr(ce),setEnabled:t=>{o.mode.isReadOnly()||W.from(a.setEnabled).each(e=>e(t))}},o.ui={...o.ui,...s},e.editorContainer=l.editorContainer,(d=e).contentCSS=d.contentCSS.concat((c=d,Vy(c,$l(c))),(c=d,Vy(c,Kl(c)))),e.inline)aN(e);else{var d=e,c={editorContainer:l.editorContainer,iframeContainer:l.iframeContainer};{var u=d,e=c;const v=u.translate("Rich Text Area"),b=mr(ee(u.getElement()),"tabindex").bind(pt),y=((e,t,r,n)=>{const o=Nr("iframe");return n.each(e=>dr(o,"tabindex",e)),cr(o,r),cr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),wr(o,"tox-edit-area__iframe"),o})(u.id,v,hl(u),b).dom;y.onload=()=>{y.onload=null,u.dispatch("load")},u.contentAreaContainer=e.iframeContainer,u.iframeElement=y,u.iframeHTML=(e=>{let t=vl(e)+"<html><head>";bl(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=yl(e),n=Cl(e),o=e.translate(Nd(e));return wl(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+wl(e)+'" />'),t+=`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`})(u),sN.add(e.iframeContainer,y)}c.editorContainer&&(c.editorContainer.style.display=d.orgDisplay,d.hidden=sN.isHidden(c.editorContainer)),d.getElement().style.display="none",sN.setAttrib(d.id,"aria-hidden","true"),d.getElement().style.visibility=d.orgVisibility;{var m=d;const C=m.iframeElement,w=()=>{m.contentDocument=C.contentDocument,aN(m)};if(ec(m)||I.browser.isFirefox()){const C=m.getDoc();C.open(),C.write(m.iframeHTML),C.close(),w()}else{e=ee(C);const x=Pn(e,"load",iN,()=>{x.unbind(),w()});C.srcdoc=m.iframeHTML}}}},mN=ae.DOM,fN=e=>"-"===e.charAt(0),gN=(t,e,r)=>W.from(e).filter(e=>ft(e)&&!_y.has(e)).map(e=>({url:t.editorManager.baseURL+`/icons/${e}/icons${r}.js`,name:W.some(e)})),pN=(e,t)=>{var r,o,n,a=Ti.ScriptLoader,i=()=>{!e.removed&&(e=>{e=td(e);return!j(e)||H(My.get(e))})(e)&&(e=>{e=nd(e);return H(Ny.get(e))})(e)&&uN(e)};{var s=e,l=t;const f=td(s);if(j(f)&&!fN(f)&&!Q(My.urls,f)){const g=rd(s),p=g?s.documentBaseURI.toAbsolute(g):`themes/${f}/theme${l}.js`;My.load(f,p).catch(()=>{var e,t,r;e=s,t=p,r=f,zy(e,"ThemeLoadError",jy("theme",t,r))})}}{var d=e,l=t;const h=nd(d);if("plugin"!==h&&!Q(Ny.urls,h)){const v=od(d),b=j(v)?d.documentBaseURI.toAbsolute(v):`models/${h}/model${l}.js`;Ny.load(h,b).catch(()=>{var e,t,r;e=d,t=b,r=h,zy(e,"ModelLoadError",jy("model",t,r))})}}{l=a;var c=e;const y=jl(c),C=Hl(c);if(!Mi.hasCode(y)&&"en"!==y){const w=ft(C)?C:`${c.editorManager.baseURL}/langs/${y}.js`;l.add(w).catch(()=>{var e,t,r;e=c,t=w,r=y,zy(e,"LanguageLoadError",jy("language",t,r))})}}r=a,o=e,l=t,l=gN(o,"default",l),n=o,n=W.from(Pl(n)).filter(ft).map(e=>({url:e,name:W.none()})).orThunk(()=>gN(o,Dl(o),"")),Y((t=>{const r=[],n=e=>{r.push(e)};for(let e=0;e<t.length;e++)t[e].each(n);return r})([l,n]),n=>{r.add(n.url).catch(()=>{var e,t,r;e=o,t=n.url,r=n.name.getOrUndefined(),zy(e,"IconsLoadError",jy("icons",t,r))})});{var u=e,m=t;const x=(n,o)=>{Ly.load(n,o).catch(()=>{var e,t,r;e=u,t=o,r=n,zy(e,"PluginLoadError",jy("plugin",t,r))})};X(xd(u),(e,t)=>{x(t,e),u.options.set("plugins",wd(u).concat(t))}),Y(wd(u),e=>{!(e=J.trim(e))||Ly.urls[e]||fN(e)||x(e,`plugins/${e}/plugin${m}.js`)})}a.loadQueue().then(i,i)},hN=It().deviceType,vN=hN.isPhone(),bN=hN.isTablet(),yN=e=>{return de(e)?[]:(e=le(e)?e:e.split(/[ ,]/),e=C(e,ct),L(e,ft))},CN=(e,t)=>Q(e.sections(),t),wN=(e,t,r,n,o)=>{var a,i,s,l;const d=e?{mobile:(i=null!=(i=o.mobile)?i:{},t=t,{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:M(i,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}})}:{},c=(a=["mobile"],i=i=Vx(d,o),t={},o={},Ue(i,(e,t)=>K(a,t),Fe(t),Fe(o)),t=(i={t:t,f:o}).t,o=i.f,{sections:$(t),options:$(o)}),u=J.extend(r,n,c.options(),(t=c,e&&CN(t,"mobile")?(o=c.sections(),o=M(o,"mobile").getOr({}),J.extend({},{},o)):{}),{external_plugins:((e,t)=>{t=null!=(t=t.external_plugins)?t:{};return e&&e.external_plugins?J.extend({},e.external_plugins,t):t})(n,c.options())});return r=e,t=c,o=n,e=u,o=yN(o.forced_plugins),n=yN(e.plugins),l=t,l=CN(l,"mobile")?l.sections().mobile:{},r=r,t=t,s=n,l=l.plugins?yN(l.plugins):n,n=r&&CN(t,"mobile")?l:s,r=o,t=n,l=[...yN(r),...yN(t)],J.extend(e,{forced_plugins:o,plugins:l})},xN=(e,t)=>{var r,n=e.selection,e=e.dom;return/^ | $/.test(t)?(e=e,n=n.getRng(),r=t,e=ee(e.getRoot()),r=bp(e,z.fromRangeStart(n))?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),yp(e,z.fromRangeEnd(n))?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")):t},kN=(o,e)=>{if(o.selection.isEditable()){const{content:r,details:a}="string"!=typeof(e=e)?(t=J.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}};P0(o,{...a,content:xN(o,r),format:"html",set:!1,selection:!0}).each(e=>{n=o,t=e.content,r=a;var t,r,n=iy(n).editor.insertContent(t,r);L0(o,n,e),o.addVisual()})}var t},EN={"font-size":"size","font-family":"face"},SN=sr("font"),_N=a=>(o,e)=>W.from(e).map(ee).filter(nr).bind(e=>{return r=a,t=o,n=e.dom,Gh(ee(n),e=>{return t=e,wn(t,r).orThunk(()=>SN(t)?M(EN,r).bind(e=>mr(t,e)):W.none());var t},e=>F(ee(t),e)).or((n=a,e=e.dom,W.from(ae.DOM.getStyle(e,n,!0))));var r,t,n}).getOr(""),NN=_N("font-size"),RN=d(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),_N("font-family")),AN=e=>mu(e.getBody()).bind(e=>{e=e.container();return W.from(oe(e)?e.parentNode:e)}),ON=(e,t)=>{return e=e,t=f(W.some,t),r=e,W.from(r.selection.getRng()).bind(e=>{var t=r.getBody();return e.startContainer===t&&0===e.startOffset?W.none():W.from(r.selection.getStart(!0))}).orThunk(D(AN,e)).map(ee).filter(nr).bind(t);var r},TN=(e,t)=>{var r,n;return/^[0-9.]+$/.test(t)&&1<=(r=parseInt(t,10))&&r<=7?(n=e,n=J.explode(n.options.get("font_size_style_values")),e=e,0<(e=J.explode(e.options.get("font_size_classes"))).length?e[r-1]||t:n[r-1]||t):t},BN=(r,e)=>{const t=r.dom,n=r.selection.getRng(),o=e?r.selection.getStart():r.selection.getEnd(),a=e?n.startContainer:n.endContainer,i=tE(t,a);if(i&&i.isContentEditable){const s=e?En:Sn,l=kl(r);((e,t,r,n)=>{const o=e.dom,a=e=>o.isBlock(e)&&e.parentElement===r,i=a(t)?t:o.getParent(n,a,r);return W.from(i).map(ee)})(r,o,i,a).each(e=>{var t=aE(r,a,e.dom,i,!1,l);s(e,ee(t)),r.selection.setCursorLocation(t,0),r.dispatch("NewBlock",{newBlock:t}),Gk(r,"insertParagraph")})}},DN=e=>{g=t=>()=>{Y("left,center,right,justify".split(","),e=>{t!==e&&f.formatter.remove("align"+e)}),"none"!==t&&(f.formatter.toggle("align"+t,void 0),f.nodeChanged())},(f=p=e).editorCommands.addCommands({JustifyLeft:g("left"),JustifyCenter:g("center"),JustifyRight:g("right"),JustifyFull:g("justify"),JustifyNone:g("none")}),g=t=>()=>{var e=m.selection,e=e.isCollapsed()?[m.dom.getParent(e.getNode(),m.dom.isBlock)]:e.getSelectedBlocks();return G(e,e=>H(m.formatter.matchNode(e,t)))},(m=p).editorCommands.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify")},"state"),(u=e).editorCommands.addCommands({"Cut,Copy,Paste":e=>{var t=u.getDoc();let r;try{t.execCommand(e)}catch(e){r=!0}if((r="paste"!==e||t.queryCommandEnabled(e)?r:!0)||!t.queryCommandSupported(e)){let e=u.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(I.os.isMacOS()||I.os.isiOS())&&(e=e.replace(/Ctrl\+/g,"⌘+")),u.notificationManager.open({text:e,type:"error"})}}}),(c=e).editorCommands.addCommands({mceAddUndoLevel:()=>{c.undoManager.add()},mceEndUndoLevel:()=>{c.undoManager.add()},Undo:()=>{c.undoManager.undo()},Redo:()=>{c.undoManager.redo()}}),(d=e).editorCommands.addCommands({mceSelectNodeDepth:(e,t,r)=>{let n=0;d.dom.getParent(d.selection.getNode(),e=>!ne(e)||n++!==r||(d.selection.select(e),!1),d.getBody())},mceSelectNode:(e,t,r)=>{d.selection.select(r)},selectAll:()=>{var e,t=d.dom.getParent(d.selection.getStart(),mo);t&&((e=d.dom.createRng()).selectNodeContents(t),d.selection.setRng(e))}}),(l=e).editorCommands.addCommands({mceCleanup:()=>{var e=l.selection.getBookmark();l.setContent(l.getContent()),l.selection.moveToBookmark(e)},insertImage:(e,t,r)=>{kN(l,l.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{l.execCommand("mceInsertContent",!1,"<hr>")},insertText:(e,t,r)=>{kN(l,l.dom.encode(r))},insertHTML:(e,t,r)=>{kN(l,r)},mceInsertContent:(e,t,r)=>{kN(l,r)},mceSetContent:(e,t,r)=>{l.setContent(r)},mceReplaceContent:(e,t,r)=>{l.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,l.selection.getContent({format:"text"})))},mceNewDocument:()=>{l.setContent(Fd(l))}}),p=(e,t,r)=>{var r=j(r)?{href:r}:r,n=s.dom.getParent(s.selection.getNode(),"a");se(r)&&j(r.href)&&(r.href=r.href.replace(/ /g,"%20"),n&&r.href||s.formatter.remove("link"),r.href)&&s.formatter.apply("link",r,n)},(s=e).editorCommands.addCommands({unlink:()=>{var e;s.selection.isEditable()&&(s.selection.isCollapsed()?(e=s.dom.getParent(s.selection.getStart(),"a"))&&s.dom.remove(e,!0):s.formatter.remove("link"))},mceInsertLink:p,createLink:p}),(i=e).editorCommands.addCommands({Indent:()=>{var e;e=i,Ew(e,"indent")},Outdent:()=>{Sw(i)}}),i.editorCommands.addCommands({Outdent:()=>ww(i)},"state"),(t=e).editorCommands.addCommands({InsertNewBlockBefore:()=>{var e;e=t,BN(e,!0)},InsertNewBlockAfter:()=>{var e;e=t,BN(e,!1)}}),(a=e).editorCommands.addCommands({insertParagraph:()=>{LE(fE,a)},mceInsertNewLine:(e,t,r)=>{ME(a,r)},InsertLineBreak:(e,t,r)=>{LE(wE,a)}}),(n=g=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{n.getDoc().execCommand(e);var t,r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const e=r.parentNode;e&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(t=n.selection.getBookmark(),n.dom.split(e,r),n.selection.moveToBookmark(t))}}}),(r=g).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{var t=r.dom.getParent(r.selection.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state");var o,r,n,a,t,i,s,l,d,c,u,m,f,g,p=e;{var h=p;const b=(e,t)=>{h.formatter.toggle(e,t),h.nodeChanged()};h.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{b(e)},"ForeColor,HiliteColor":(e,t,r)=>{b(e,{value:r})},BackColor:(e,t,r)=>{b("hilitecolor",{value:r})},FontName:(e,t,r)=>{var n=h;r=TN(n,r),n.formatter.toggle("fontname",{value:(e=>{e=e.split(/\s*,\s*/);return C(e,e=>-1===e.indexOf(" ")||st(e,'"')||st(e,"'")?e:`'${e}'`).join(",")})(r)}),n.nodeChanged()},FontSize:(e,t,r)=>{var n;r=r,(n=h).formatter.toggle("fontsize",{value:TN(n,r)}),n.nodeChanged()},LineHeight:(e,t,r)=>{var n;(n=h).formatter.toggle("lineheight",{value:String(r)}),n.nodeChanged()},Lang:(e,t,r)=>{b(e,{value:r.code,customValue:null!=(e=r.customCode)?e:null})},RemoveFormat:e=>{h.formatter.remove(e)},mceBlockQuote:()=>{b("blockquote")},FormatBlock:(e,t,r)=>{b(j(r)?r:"p")},mceToggleFormat:(e,t,r)=>{b(r)}})}{var v=p;const y=e=>v.formatter.match(e);v.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>y(e),mceBlockQuote:()=>y("blockquote")},"state"),v.editorCommands.addQueryValueHandler("FontName",()=>{return t=v,ON(t,e=>RN(t.getBody(),e.dom)).getOr("");var t}),v.editorCommands.addQueryValueHandler("FontSize",()=>{return t=v,ON(t,e=>NN(t.getBody(),e.dom)).getOr("");var t}),v.editorCommands.addQueryValueHandler("LineHeight",()=>{return t=v,ON(t,r=>{var e=ee(t.getBody());return Gh(r,e=>wn(e,"line-height"),D(F,e)).getOrThunk(()=>{var e=parseFloat(yn(r,"line-height")),t=parseFloat(yn(r,"font-size"));return String(e/t)})}).getOr("");var t})}(o=e).editorCommands.addCommands({mceRemoveNode:(e,t,r)=>{r=null!=r?r:o.selection.getNode();if(r!==o.getBody()){const e=o.selection.getBookmark();o.dom.remove(r,!0),o.selection.moveToBookmark(e)}},mcePrint:()=>{o.getWin().print()},mceFocus:(e,t,r)=>{var n;(n=o).removed||(!0===r?lg:t=>{var e=t.selection,r=t.getBody();let n=e.getRng();t.quirks.refreshContentEditable(),H(t.bookmark)&&!sg(t)&&Yf(t).each(e=>{t.selection.setRng(e),n=e});o=t,e=e.getNode();var o,e=o.dom.getParent(e,e=>"true"===o.dom.getContentEditable(e));e&&t.dom.isChildOf(e,r)?(ig(e),ag(t,n)):(t.inline||(I.browser.isOpera()||ig(r),t.getWin().focus()),(I.browser.isFirefox()||t.inline)&&(ig(r),ag(t,n))),lg(t)})(n)},mceToggleVisualAid:()=>{o.hasVisual=!o.hasVisual,o.addVisual()}})},PN=["toggleview"],LN=e=>K(PN,e.toLowerCase());class MN{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,r,n){var o,a=this.editor,i=e.toLowerCase(),n=null==n?void 0:n.skip_focus;return!(a.removed||("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||n?(o=a,Yf(o).each(e=>o.selection.setRng(e))):a.focus()),a.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())||(n=this.commands.exec[i],!V(n))||(n(i,t,r),a.dispatch("ExecCommand",{command:e,ui:t,value:r}),0))}queryCommandState(e){var t;return!(!LN(e)&&this.editor.quirks.isHidden()||this.editor.removed||(e=e.toLowerCase(),t=this.commands.state[e],!V(t)))&&t(e)}queryCommandValue(e){var t;return!(!LN(e)&&this.editor.quirks.isHidden()||this.editor.removed)&&(e=e.toLowerCase(),t=this.commands.value[e],V(t))?t(e):""}addCommands(e,r="exec"){const n=this.commands;X(e,(t,e)=>{Y(e.toLowerCase().split(","),e=>{n[r][e]=t})})}addCommand(e,n,o){e=e.toLowerCase();this.commands.exec[e]=(e,t,r)=>n.call(null!=o?o:this.editor,t,r)}queryCommandSupported(e){e=e.toLowerCase();return!!this.commands.exec[e]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}const IN="data-mce-contenteditable",FN=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},UN=(e,t)=>{e.dom.contentEditable=t?"true":"false"},zN=e=>e.readonly,jN=t=>{t.parser.addAttributeFilter("contenteditable",e=>{zN(t)&&Y(e,e=>{e.attr(IN,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(IN,e=>{zN(t)&&Y(e,e=>{e.attr("contenteditable",e.attr(IN))})}),t.serializer.addTempAttr(IN)},HN=["copy"],VN=J.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class qN{static isNative(e){return!!VN[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||P}fire(e,t){return this.dispatch(e,t)}dispatch(e,r){var n=e.toLowerCase(),o=pi(n,null!=r?r:{},this.scope),a=(this.settings.beforeFire&&this.settings.beforeFire(o),this.bindings[n]);if(a)for(let e=0,t=a.length;e<t;e++){const r=a[e];if(!r.removed){if(r.once&&this.off(n,r.func),o.isImmediatePropagationStopped())return o;if(!1===r.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(r,e,n,o){if(e=!1===e?P:e){var a={func:e,removed:!1},i=(o&&J.extend(a,o),r.toLowerCase().split(" "));let t=i.length;for(;t--;){const r=i[t];let e=this.bindings[r];e||(e=[],this.toggleEvent(r,!0)),e=n?[a,...e]:[...e,a],this.bindings[r]=e}}return this}off(r,n){if(r){var o=r.toLowerCase().split(" ");let t=o.length;for(;t--;){var a=o[t];let e=this.bindings[a];if(!a)return X(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(e){if(n){const r=he(e,e=>e.func===n);e=r.fail,this.bindings[a]=e,Y(r.pass,e=>{e.removed=!0})}else e.length=0;e.length||(this.toggleEvent(r,!1),delete this.bindings[a])}}}else X(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();e=this.bindings[e];return!(!e||0===e.length)}}const $N=r=>(r._eventDispatcher||(r._eventDispatcher=new qN({scope:r,toggleEvent:(e,t)=>{qN.isNative(e)&&r.toggleNativeEvent&&r.toggleNativeEvent(e,t)}})),r._eventDispatcher),WN={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(t,e,r){if(this.removed&&"remove"!==t&&"detach"!==t)return pi(t.toLowerCase(),null!=e?e:{},this);var n=$N(this).dispatch(t,e);if(!1!==r&&this.parent){let e=this.parent();for(;e&&!n.isPropagationStopped();)e.dispatch(t,n,!1),e=e.parent?e.parent():void 0}return n},on(e,t,r){return $N(this).on(e,t,r)},off(e,t){return $N(this).off(e,t)},once(e,t){return $N(this).once(e,t)},hasEventListeners(e){return $N(this).has(e)}},KN=ae.DOM;let GN;const YN=(e,t)=>{return"selectionchange"===t?e.getDoc():!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t)?e.getDoc().documentElement:(t=Zl(e))?(e.eventRoot||(e.eventRoot=KN.select(t)[0]),e.eventRoot):e.getBody()},XN=(e,t,r)=>{var n,o,a,i,s;(s=e).hidden||zN(s)?zN(e)&&(n=e,"click"!==(o=r).type||ie.metaKeyPressed(o)?(a=o,K(HN,a.type)&&n.dispatch(o.type,o)):(a=ee(o.target),i=n,s=a,mn(s,"a",e=>F(e,ee(i.getBody()))).bind(e=>mr(e,"href")).each(e=>{if(o.preventDefault(),/^#/.test(e)){const o=n.dom.select(`${e},[name="${at(e,"#")}"]`);o.length&&n.selection.scrollIntoView(o[0],!0)}else window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):e.dispatch(t,r)},QN=(o,a)=>{var e,t;o.delegates||(o.delegates={}),o.delegates[a]||o.removed||(e=YN(o,a),Zl(o)?(GN||(GN={},o.editorManager.on("removeEditor",()=>{o.editorManager.activeEditor||GN&&(X(GN,(e,t)=>{o.dom.unbind(YN(o,t))}),GN=null)})),GN[a]||(t=e=>{var t=e.target,r=o.editorManager.get();let n=r.length;for(;n--;){const o=r[n].getBody();o!==t&&!KN.isChildOf(t,o)||XN(r[n],a,e)}},GN[a]=t,KN.bind(e,a,t))):(t=e=>{XN(o,a,e)},KN.bind(e,a,t),o.delegates[a]=t))},JN={...WN,bindPendingEventDelegates(){const t=this;J.each(t._pendingNativeEvents,e=>{QN(t,e)})},toggleNativeEvent(e,t){var r=this;"focus"===e||"blur"===e||r.removed||(t?r.initialized?QN(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(YN(r,e),e,r.delegates[e]),delete r.delegates[e]))},unbindAllNativeEvents(){const r=this,e=r.getBody(),t=r.dom;r.delegates&&(X(r.delegates,(e,t)=>{r.dom.unbind(YN(r,t),t,e)}),delete r.delegates),!r.inline&&e&&t&&(e.onload=null,t.unbind(r.getWin()),t.unbind(r.getDoc())),t&&(t.unbind(e),t.unbind(r.getContainer()))}},ZN=e=>j(e)?{value:e.split(/[ ,]/),valid:!0}:R(e,j)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},eR=(e,t)=>e+(gt(t.message)?"":". "+t.message),tR=e=>e.valid,rR=(e,t,r="")=>{t=t(e);return E(t)?t?{value:e,valid:!0}:{valid:!1,message:r}:t},nR=["design","readonly"],oR=(e,t,r,n)=>{var o,a,i,s,l,d=r[t.get()],r=r[n];try{r.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}d.deactivate(),d.editorReadOnly!==r.editorReadOnly&&(d=e,r=r.editorReadOnly,l=ee(d.getBody()),a=l,i="mce-content-readonly",s=r,Er(a,i)&&!s?kr(a,i):s&&wr(a,i),r?(d.selection.controlSelection.hideResizeRect(),d._selectionOverrides.hideFakeCaret(),s=d,W.from(s.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")}),d.readonly=!0,UN(l,!1),Y(Wn(l,'*[contenteditable="true"]'),e=>{dr(e,IN,"true"),UN(e,!1)})):(d.readonly=!1,d.hasEditableRoot()&&UN(l,!0),Y(Wn(l,`*[${IN}="true"]`),e=>{gr(e,IN),UN(e,!0)}),FN(d,"StyleWithCSS",!1),FN(d,"enableInlineTableEditing",!1),FN(d,"enableObjectResizing",!1),a=d,(sg(a)||(o=a,a=Qr(ee(o.getElement())),jf(a).filter(e=>!eg(e.dom)&&tg(o,e.dom)).isSome()))&&d.focus(),d.selection.setRng(d.selection.getRng()),d.nodeChanged())),t.set(n),e.dispatch("SwitchMode",{mode:n})},aR=J.each,iR=J.explode,sR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},lR=J.makeMap("alt,ctrl,shift,meta,access"),dR=e=>{const t={},r=I.os.isMacOS()||I.os.isiOS();aR(iR(e.toLowerCase(),"+"),e=>{e in lR?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=sR[e]||e.toUpperCase().charCodeAt(0))});var n=[t.keyCode];let o;for(o in lR)t[o]?n.push(o):t[o]=!1;return t.id=n.join(","),t.access&&(t.alt=!0,r?t.ctrl=!0:t.shift=!0),t.meta&&(r?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class cR{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const r=this;e.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(aR(r.shortcuts,e=>{r.matchShortcut(t,e)&&(r.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type)&&r.executeShortcutAction(e)}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(e,t,r,n){const o=this,a=o.normalizeCommandFunc(r);return aR(iR(J.trim(e)),e=>{e=o.createShortcut(e,t,a,n);o.shortcuts[e.id]=e}),!0}remove(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)}normalizeCommandFunc(e){const t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:J.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){e=J.map(iR(e,">"),dR);return e[e.length-1]=J.extend(e[e.length-1],{func:r,scope:n||this.editor}),J.extend(e[0],{desc:this.editor.translate(t),subpatterns:e.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const uR=ae.DOM,mR=J.extend,fR=J.each;class gR{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,mR(this,JN);var n=this,e=(this.id=e,this.hidden=!1,e=r.defaultOptions,a=t,wN(vN||bN,vN,a,e,a));this.options=(a=>{const i={},s={},l=(e,t,r)=>{t=rR(t,r);return tR(t)?(s[e]=t.value,!0):(console.warn(eR(`Invalid value passed for the ${e} option`,t)),!1)},n=e=>Q(i,e);return{register:(t,e)=>{o=e;const r=j(o.processor)?(t=>{const r=(()=>{switch(t){case"array":return le;case"boolean":return E;case"function":return V;case"number":return N;case"object":return se;case"string":return j;case"string[]":return ZN;case"object[]":return e=>R(e,se);case"regexp":return e=>y(e,RegExp);default:return ce}})();return e=>rR(e,r,`The value must be a ${t}.`)})(e.processor):e.processor,n=((e,t,r)=>{if(!S(t)){t=rR(t,r);if(tR(t))return t.value;console.error(eR(`Invalid default value passed for the "${e}" option`,t))}})(t,e.default,r);var o;i[t]={...e,default:n,processor:r},M(s,t).orThunk(()=>M(a,t)).each(e=>l(t,e,r))},isRegistered:n,get:e=>M(s,e).orThunk(()=>M(i,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{var r;return n(e)?(r=i[e]).immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):l(e,t,r.processor):(console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1)},unset:e=>{var t=n(e);return t&&delete s[e],t},isSet:e=>Q(s,e)}})(e);{var o=n;const p=o.options.register;p("id",{processor:"string",default:o.id}),p("selector",{processor:"string"}),p("target",{processor:"object"}),p("suffix",{processor:"string"}),p("cache_suffix",{processor:"string"}),p("base_url",{processor:"string"}),p("referrer_policy",{processor:"string",default:""}),p("language_load",{processor:"boolean",default:!0}),p("inline",{processor:"boolean",default:!1}),p("iframe_attrs",{processor:"object",default:{}}),p("doctype",{processor:"string",default:"<!DOCTYPE html>"}),p("document_base_url",{processor:"string",default:o.documentBaseUrl}),p("body_id",{processor:pl(o,"tinymce"),default:"tinymce"}),p("body_class",{processor:pl(o),default:""}),p("content_security_policy",{processor:"string",default:""}),p("br_in_pre",{processor:"boolean",default:!0}),p("forced_root_block",{processor:e=>{var t=j(e)&&ft(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),p("forced_root_block_attrs",{processor:"object",default:{}}),p("newline_behavior",{processor:e=>{var t=K(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),p("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),p("no_newline_selector",{processor:"string",default:""}),p("keep_styles",{processor:"boolean",default:!0}),p("end_container_on_empty_block",{processor:e=>E(e)||j(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),p("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),p("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),p("font_size_classes",{processor:"string",default:""}),p("automatic_uploads",{processor:"boolean",default:!0}),p("images_reuse_filename",{processor:"boolean",default:!1}),p("images_replace_blob_uris",{processor:"boolean",default:!0}),p("icons",{processor:"string",default:""}),p("icons_url",{processor:"string",default:""}),p("images_upload_url",{processor:"string",default:""}),p("images_upload_base_path",{processor:"string",default:""}),p("images_upload_credentials",{processor:"boolean",default:!1}),p("images_upload_handler",{processor:"function"}),p("language",{processor:"string",default:"en"}),p("language_url",{processor:"string",default:""}),p("entity_encoding",{processor:"string",default:"named"}),p("indent",{processor:"boolean",default:!0}),p("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),p("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),p("indent_use_margin",{processor:"boolean",default:!1}),p("indentation",{processor:"string",default:"40px"}),p("content_css",{processor:e=>{var t=!1===e||j(e)||R(e,j);return t?j(e)?{value:C(e.split(","),ct),valid:t}:!le(e)&&!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ud(o)?[]:["default"]}),p("content_style",{processor:"string"}),p("content_css_cors",{processor:"boolean",default:!1}),p("font_css",{processor:e=>{var t=j(e)||R(e,j);return t?{value:le(e)?e:C(e.split(","),ct),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),p("inline_boundaries",{processor:"boolean",default:!0}),p("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),p("object_resizing",{processor:e=>{var t=E(e)||j(e);return t?!1===e||cl.isiPhone()||cl.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!ul}),p("resize_img_proportional",{processor:"boolean",default:!0}),p("event_root",{processor:"object"}),p("service_message",{processor:"string"}),p("theme",{processor:e=>!1===e||j(e)||V(e),default:"silver"}),p("theme_url",{processor:"string"}),p("formats",{processor:"object"}),p("format_empty_lines",{processor:"boolean",default:!1}),p("format_noneditable_selector",{processor:"string",default:""}),p("preview_styles",{processor:e=>{var t=!1===e||j(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),p("custom_ui_selector",{processor:"string",default:""}),p("hidden_input",{processor:"boolean",default:!0}),p("submit_patch",{processor:"boolean",default:!0}),p("encoding",{processor:"string"}),p("add_form_submit_trigger",{processor:"boolean",default:!0}),p("add_unload_trigger",{processor:"boolean",default:!0}),p("custom_undo_redo_levels",{processor:"number",default:0}),p("disable_nodechange",{processor:"boolean",default:!1}),p("readonly",{processor:"boolean",default:!1}),p("editable_root",{processor:"boolean",default:!0}),p("plugins",{processor:"string[]",default:[]}),p("external_plugins",{processor:"object"}),p("forced_plugins",{processor:"string[]"}),p("model",{processor:"string",default:o.hasPlugin("rtc")?"plugin":"dom"}),p("model_url",{processor:"string"}),p("block_unsupported_drop",{processor:"boolean",default:!0}),p("visual",{processor:"boolean",default:!0}),p("visual_table_class",{processor:"string",default:"mce-item-table"}),p("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),p("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),p("setup",{processor:"function"}),p("init_instance_callback",{processor:"function"}),p("url_converter",{processor:"function",default:o.convertURL}),p("url_converter_scope",{processor:"object",default:o}),p("urlconverter_callback",{processor:"function"}),p("allow_conditional_comments",{processor:"boolean",default:!1}),p("allow_html_data_urls",{processor:"boolean",default:!1}),p("allow_svg_data_urls",{processor:"boolean"}),p("allow_html_in_named_anchor",{processor:"boolean",default:!1}),p("allow_script_urls",{processor:"boolean",default:!1}),p("allow_unsafe_link_target",{processor:"boolean",default:!1}),p("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),p("fix_list_elements",{processor:"boolean",default:!1}),p("preserve_cdata",{processor:"boolean",default:!1}),p("remove_trailing_brs",{processor:"boolean",default:!0}),p("pad_empty_with_br",{processor:"boolean",default:!1}),p("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),p("element_format",{processor:"string",default:"html"}),p("entities",{processor:"string"}),p("schema",{processor:"string",default:"html5"}),p("convert_urls",{processor:"boolean",default:!0}),p("relative_urls",{processor:"boolean",default:!0}),p("remove_script_host",{processor:"boolean",default:!0}),p("custom_elements",{processor:"string"}),p("extended_valid_elements",{processor:"string"}),p("invalid_elements",{processor:"string"}),p("invalid_styles",{processor:gl}),p("valid_children",{processor:"string"}),p("valid_classes",{processor:gl}),p("valid_elements",{processor:"string"}),p("valid_styles",{processor:gl}),p("verify_html",{processor:"boolean",default:!0}),p("auto_focus",{processor:e=>j(e)||!0===e}),p("browser_spellcheck",{processor:"boolean",default:!1}),p("protect",{processor:"array"}),p("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),p("deprecation_warnings",{processor:"boolean",default:!0}),p("a11y_advanced_options",{processor:"boolean",default:!1}),p("api_key",{processor:"string"}),p("paste_block_drop",{processor:"boolean",default:!1}),p("paste_data_images",{processor:"boolean",default:!0}),p("paste_preprocess",{processor:"function"}),p("paste_postprocess",{processor:"function"}),p("paste_webkit_styles",{processor:"string",default:"none"}),p("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),p("paste_merge_formats",{processor:"boolean",default:!0}),p("smart_paste",{processor:"boolean",default:!0}),p("paste_as_text",{processor:"boolean",default:!1}),p("paste_tab_spaces",{processor:"number",default:4}),p("text_patterns",{processor:e=>R(e,se)||!1===e?{value:dl(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),p("text_patterns_lookup",{processor:e=>{return V(e)?{value:(t=e,e=>{e=t(e);return dl(e)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),p("noneditable_class",{processor:"string",default:"mceNonEditable"}),p("editable_class",{processor:"string",default:"mceEditable"}),p("noneditable_regexp",{processor:e=>R(e,fl)?{value:e,valid:!0}:fl(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),p("table_tab_navigation",{processor:"boolean",default:!0}),p("highlight_on_focus",{processor:"boolean",default:!1}),p("xss_sanitization",{processor:"boolean",default:!0}),p("details_initial_state",{processor:e=>{var t=K(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),p("details_serialized_state",{processor:e=>{var t=K(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),p("init_content_sync",{processor:"boolean",default:!1}),p("newdocument_content",{processor:"string",default:""}),o.on("ScriptsLoaded",()=>{p("directionality",{processor:"string",default:Mi.isRtl()?"rtl":void 0}),p("placeholder",{processor:"string",default:ml.getAttrib(o.getElement(),"placeholder")})})}var a=this.options.get;if(a("deprecation_warnings")){var i=t,s=e,l=(i=i,l=wy(i,vy),!1!==(i=i.forced_root_block)&&""!==i||l.push("forced_root_block (false only)"),Re(l)),d=(i=s,xy(i,yy)),c=0<d.length,u=0<l.length,m="mobile"===s.theme;if(c||u||m){const i="\n- ",s=m?`

Themes:
- mobile`:"",h=c?`

Plugins:
- `+d.join(i):"",v=u?`

Options:
- `+l.join(i):"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+s+h+v)}var f=t,g=e,i=(f=f,wy(f,by)),s=(f=g,xy(f,Cy.map(e=>e.name))),m=0<s.length,c=0<i.length;if(m||c){const f="\n- ",g=m?`

Plugins:
- `+s.map(ky).join(f):"",b=c?`

Options:
- `+i.join(f):"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+b)}}d=a("suffix"),d&&(r.suffix=d),this.suffix=r.suffix,u=a("base_url"),u&&r._setBaseUrl(u),this.baseUri=r.baseURI,l=zl(n),l&&(Ti.ScriptLoader._setReferrerPolicy(l),ae.DOM.styleSheetLoader._setReferrerPolicy(l)),t=Cd(n),H(t)&&ae.DOM.styleSheetLoader._setContentCssCors(t),Ii.languageLoad=a("language_load"),Ii.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new y0(bl(n),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ud(n),this.hasVisual=Ed(n),this.shortcuts=new cR(this),this.editorCommands=new MN(this),DN(this),e=a("cache_suffix"),e&&(I.cacheSuffix=e.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(g=(()=>{const e={},t={},r={},n={},o={},a={},i={},s={},l=(r,n)=>(e,t)=>{r[e.toLowerCase()]={...t,type:n}};return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(r,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(a,"contexttoolbar"),addContextForm:l(a,"contextform"),addSidebar:l(i,"sidebar"),addView:l(s,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:a,sidebars:i,views:s})}})()).addAutocompleter,addButton:g.addButton,addContextForm:g.addContextForm,addContextMenu:g.addContextMenu,addContextToolbar:g.addContextToolbar,addIcon:g.addIcon,addMenuButton:g.addMenuButton,addMenuItem:g.addMenuItem,addNestedMenuItem:g.addNestedMenuItem,addSidebar:g.addSidebar,addSplitButton:g.addSplitButton,addToggleButton:g.addToggleButton,addGroupToolbarButton:g.addGroupToolbarButton,addToggleMenuItem:g.addToggleMenuItem,addView:g.addView,getAll:g.getAll},styleSheetLoader:void 0,show:q,hide:q,setEnabled:q,isEnabled:ce},this.mode=(a=>{const i=Bi("design"),s=Bi({design:{activate:q,deactivate:q,editorReadOnly:!1},readonly:{activate:q,deactivate:q,editorReadOnly:!0}});return(e=a).serializer?jN(e):e.on("PreInit",()=>{jN(e)}),(t=a).on("ShowCaret",e=>{zN(t)&&e.preventDefault()}),t.on("ObjectSelected",e=>{zN(t)&&e.preventDefault()}),{isReadOnly:()=>zN(a),set:e=>{var t=a,r=s.get(),n=i,o=e;if(o!==n.get()){if(!Q(r,o))throw new Error(`Editor mode '${o}' is invalid`);t.initialized?oR(t,n,r,o):t.on("init",()=>oR(t,n,r,o))}},get:()=>i.get(),register:(e,t)=>{s.set(((e,t,r)=>{if(K(nR,t))throw new Error("Cannot override default mode "+t);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(s.get(),e,t))}};var t,e})(n),r.dispatch("SetupEditor",{editor:this}),f=Rd(n);V(f)&&f.call(n,n)}render(){{var t=this,e,r,n=t.id;Mi.setCode(jl(t));const o=()=>{mN.unbind(window,"ready",o),t.render()};if(Ci.Event.domLoaded){if(t.getElement()){const a=ee(t.getElement()),i=pr(a);t.on("remove",()=>{pe(a.dom.attributes,e=>gr(a,e.name)),cr(a,i)}),t.ui.styleSheetLoader=(e=a,r=t,Ia.forElement(e,{contentCssCors:Cd(r),referrerPolicy:zl(r)})),ud(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const s=t.getElement().form||mN.getParent(n,"form");s&&(t.formElement=s,md(t)&&!oo(t.getElement())&&(mN.insertAfter(mN.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=e=>{t.dispatch(e.type,e)},mN.bind(s,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!fd(t)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),s._mceOldSubmit(s)))),t.windowManager=Iy(t),t.notificationManager=Py(t),"xml"===t.options.get("encoding")&&t.on("GetContent",e=>{e.save&&(e.content=mN.encode(e.content))}),gd(t)&&t.on("submit",()=>{t.initialized&&t.save()}),pd(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),pN(t,t.suffix)}}else mN.bind(window,"ready",o)}}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return sg(this)}translate(e){return Mi.translate(e)}getParam(e,t,r){var n=this.options;return n.isRegistered(e)||(H(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:ce,default:t})),n.isSet(e)||S(t)?n.get(e):t}hasPlugin(e,t){return!(!K(wd(this),e)||t&&void 0===Ly.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(uR.show(this.getContainer()),uR.hide(this.id)),this.load(),this.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(uR.hide(e.getContainer()),uR.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){var t,r=this.getElement();return!this.removed&&r?(e={...e,load:!0},t=oo(r)?r.value:r.innerHTML,t=this.setContent(t,e),e.no_events||this.dispatch("LoadContent",{...e,element:r}),t):""}save(e={}){const t=this;let r=t.getElement();if(!r||!t.initialized||t.removed)return"";const n={...e,save:!0,element:r};let o=t.getContent(n);var a={...n,content:o};if(a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),o=a.content,oo(r))r.value=o;else{!e.is_removing&&t.inline||(r.innerHTML=o);const n=uR.getParent(t.id,"form");n&&fR(n.elements,e=>e.name!==t.id||(e.value=o,!1))}return a.element=n.element=r=null,!1!==a.set_dirty&&t.setDirty(!1),o}setContent(e,t){return hy(this,e,t)}getContent(e){return[n,e={}]=[this,e],t=e.format||"html",e={...e,format:t,get:!0,getInner:!0},B0(n,e).fold(p,e=>{r=n,t=e;var t,r=iy(r).editor.getContent(t);return D0(n,r,e)});var n,t}insertContent(e,t){t&&(e=mR({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?hy(this,this.startContent,{format:"raw"}):hy(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||uR.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=uR.get(this.id)),this.targetElm}getWin(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow}getDoc(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument}getBody(){var e,t=this.getDoc();return null!=(e=null!=(e=this.bodyElement)?e:null==t?void 0:t.body)?e:null}convertURL(e,t,r){var n=this.options.get,o=Od(this);return V(o)?o.call(this,e,r,!0,t):!n("convert_urls")||"link"===r||se(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:n("relative_urls")?this.documentBaseURI.toRelative(e):this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}addVisual(e){var t;t=t=this,e=e,h(t).editor.addVisual(e)}setEditableRoot(e){var t;e=e,(t=this)._editableRoot!==e&&(t._editableRoot=e,t.readonly||(t.getBody().contentEditable=String(t.hasEditableRoot()),t.nodeChanged()),t.dispatch("EditableRootStateChange",{state:e}))}hasEditableRoot(){return this._editableRoot}remove(){var e,t,r,n,o;(e=this).removed||({_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement(),n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&H(null==o?void 0:o.nextSibling)&&Ey.remove(o.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&n&&(o=e,Ey.setStyle(o.id,"display",o.orgDisplay)),e.dispatch("detach"),Ey.remove(e.getContainer()),Sy(t),Sy(r),e.destroy())}destroy(e){var t=this,{selection:r,dom:n}=t;if(!t.destroyed)if(e||t.removed){e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),Sy(r),Sy(n)),(r=(e=t).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),Ey.unbind(r,"submit reset",e.formEventDelegate));var o=t;if((n=o).contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,r=o.selection){const o=r.dom;n.selection=r.win=r.dom=o.doc=null}t.destroyed=!0}else t.remove()}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const pR=ae.DOM,hR=J.each;let vR,bR=!1,yR=[];const CR=t=>{const r=t.type;hR(ER.get(),e=>{switch(r){case"scroll":e.dispatch("ScrollWindow",t);break;case"resize":e.dispatch("ResizeWindow",t)}})},wR=e=>{var t;e!==bR&&(t=ae.DOM,e?(t.bind(window,"resize",CR),t.bind(window,"scroll",CR)):(t.unbind(window,"resize",CR),t.unbind(window,"scroll",CR)),bR=e)},xR=t=>{var e=yR;return yR=L(yR,e=>t!==e),ER.activeEditor===t&&(ER.activeEditor=0<yR.length?yR[0]:null),ER.focusedEditor===t&&(ER.focusedEditor=null),e.length!==yR.length},kR="CSS1Compat"!==document.compatMode,ER={...WN,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.0",releaseDate:"2023-08-30",i18n:Mi,activeEditor:null,focusedEditor:null,setup(){const t=this;let r="",n="",e=y0.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)r=o.base||o.baseURL,n=o.suffix;else{const t=document.getElementsByTagName("script");for(let e=0;e<t.length;e++){const o=t[e].src||"";if(""!==o){const a=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==a.indexOf(".min")&&(n=".min"),r=o.substring(0,o.lastIndexOf("/"));break}}}if(!r&&document.currentScript){const t=document.currentScript.src;-1!==t.indexOf(".min")&&(n=".min"),r=t.substring(0,t.lastIndexOf("/"))}}var a;t.baseURL=new y0(e).toAbsolute(r),t.documentBaseURL=e,t.baseURI=new y0(t.baseURL),t.suffix=n,(a=t).on("AddEditor",D(ng,a)),a.on("RemoveEditor",D(og,a))},overrideDefaults(e){var t=e.base_url,t=(t&&this._setBaseUrl(t),e.suffix),t=(t&&(this.suffix=t),(this.defaultOptions=e).plugin_base_urls);void 0!==t&&X(t,(e,t)=>{Ii.PluginManager.urls[t]=e})},init(i){const s=this;let r;const l=J.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let d=e=>{r=e};const t=()=>{let n=0;const o=[];let a;var e;pR.unbind(window,"ready",t),(e=i.onpageload)&&e.apply(s,[]),a=(r=>{const n=[],o=V(void 0)?t=>G(n,e=>(void 0)(e,t)):e=>K(n,e);for(let e=0,t=r.length;e<t;e++){var a=r[e];o(a)||n.push(a)}return n})((e=i,I.browser.isIE()||I.browser.isEdge()?(Hy("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):kR?(Hy("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):j(e.selector)?pR.select(e.selector):H(e.target)?[e.target]:[])),J.each(a,e=>{(e=s.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(xR(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)}),0===(a=J.grep(a,e=>!s.get(e.id))).length?d([]):hR(a,e=>{{var t;(r=e,i.inline&&r.tagName.toLowerCase()in l)?Hy("Could not initialize inline editor on invalid inline target element",e):(r=(e=>{let t=e.id;return t||(t=M(e,"name").filter(e=>!pR.get(e)).getOrThunk(pR.uniqueId),e.setAttribute("id",t)),t})(e),t=i,r=new gR(r,t,s),o.push(r),r.on("init",()=>{++n===a.length&&d(o)}),r.targetElm=r.targetElm||e,r.render())}var r})};return pR.bind(window,"ready",t),new Promise(t=>{r?t(r):d=e=>{t(e)}})},get(t){return 0===arguments.length?yR.slice(0):j(t)?Ce(yR,e=>e.id===t).getOr(null):N(t)&&yR[t]?yR[t]:null},add(e){const r=this,t=r.get(e.id);return t===e||(null===t&&yR.push(e),wR(!0),r.activeEditor=e,r.dispatch("AddEditor",{editor:e}),vR)||(vR=e=>{var t=r.dispatch("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",vR)),e},createEditor(e,t){return this.add(new gR(e,t,this))},remove(e){const t=this;let r;if(e){if(!j(e))return r=e,T(t.get(r.id))?null:(xR(r)&&t.dispatch("RemoveEditor",{editor:r}),0===yR.length&&window.removeEventListener("beforeunload",vR),r.remove(),wR(0<yR.length),r);hR(pR.select(e),e=>{(r=t.get(e.id))&&t.remove(r)})}else for(let e=yR.length-1;0<=e;e--)t.remove(yR[e])},execCommand(e,t,r){var n,o=se(r)?null!=(n=r.id)?n:r.index:r;switch(e){case"mceAddEditor":if(!this.get(o)){const e=r.options;new gR(o,e,this).render()}return!0;case"mceRemoveEditor":{const e=this.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{const e=this.get(o);return e?e.isHidden()?e.show():e.hide():this.execCommand("mceAddEditor",!1,r),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{hR(yR,e=>{e.save()})},addI18n:(e,t)=>{Mi.add(e,t)},translate:e=>Mi.translate(e),setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new y0(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new y0(this.baseURL)}},SR=(ER.setup(),(()=>{const t=Fi();return{FakeClipboardItem:t=>({items:t,types:Pe(t),getType:e=>M(t,e).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})()),_R=Math.min,NR=Math.max,RR=Math.round,AR=(e,t,r)=>{let n=t.x,o=t.y;var a=e.w,e=e.h,i=t.w,t=t.h,r=(r||"").split("");return"b"===r[0]&&(o+=t),"r"===r[1]&&(n+=i),"c"===r[0]&&(o+=RR(t/2)),"c"===r[1]&&(n+=RR(i/2)),"b"===r[3]&&(o-=e),"r"===r[4]&&(n-=a),"c"===r[3]&&(o-=RR(e/2)),"c"===r[4]&&(n-=RR(a/2)),OR(n,o,a,e)},OR=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),TR={inflate:(e,t,r)=>OR(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:AR,findBestRelativePosition:(t,r,n,o)=>{for(let e=0;e<o.length;e++){var a=AR(t,r,o[e]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return o[e]}return null},intersect:(e,t)=>{var r=NR(e.x,t.x),n=NR(e.y,t.y),o=_R(e.x+e.w,t.x+t.w),e=_R(e.y+e.h,t.y+t.h);return o-r<0||e-n<0?null:OR(r,n,o-r,e-n)},clamp:(e,t,r)=>{let n=e.x,o=e.y,a=e.x+e.w,i=e.y+e.h;var e=t.x+t.w,s=t.y+t.h,l=NR(0,t.x-n),t=NR(0,t.y-o),e=NR(0,a-e),s=NR(0,i-s);return n+=l,o+=t,r&&(a+=l,i+=t,n-=e,o-=s),a-=e,i-=s,OR(n,o,a-n,i-o)},create:OR,fromClientRect:e=>OR(e.left,e.top,e.width,e.height)},BR=(()=>{const a={},s={};return{load:(t,r)=>{const n=`Script at URL "${r}" failed to load`,o=`Script at URL "${r}" did not call \`tinymce.Resource.add('${t}', data)\` within 1 second`;var e;return void 0!==a[t]?a[t]:(e=new Promise((a,i)=>{const e=(()=>{let r=!1,n=null;const e=t=>(...e)=>{r||(r=!0,null!==n&&(clearTimeout(n),n=null),t.apply(null,e))},t=e(a),o=e(i);return{start:(...e)=>{r||null!==n||(n=setTimeout(()=>o.apply(null,e),1e3))},resolve:t,reject:o}})();s[t]=e.resolve,Ti.ScriptLoader.loadScript(r).then(()=>e.start(o),()=>e.reject(n))}),a[t]=e)},add:(e,t)=>{void 0!==s[e]&&(s[e](t),delete s[e]),a[e]=Promise.resolve(t)},unload:e=>{delete a[e]}}})();let DR;try{const n="__storage_test__";(DR=window.localStorage).setItem(n,n),DR.removeItem(n)}catch(n){DR=(()=>{let r={},n=[];var e={getItem:e=>r[e]||null,setItem:(e,t)=>{n.push(e),r[e]=String(t)},key:e=>n[e],removeItem:t=>{n=n.filter(e=>e===t),delete r[t]},clear:()=>{n=[],r={}},length:0};return Object.defineProperty(e,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),e})()}var Pk={geom:{Rect:TR},util:{Delay:Qf,Tools:J,VK:ie,URI:y0,EventDispatcher:qN,Observable:WN,I18n:Mi,LocalStorage:DR,ImageUploader:r=>{const e=$y(),n=Yy(r,e);return{upload:(e,t=!0)=>n.upload(e,t?Gy(r):void 0)}}},dom:{EventUtils:Ci,TreeWalker:Gn,TextSeeker:os,DOMUtils:ae,ScriptLoader:Ti,RangeUtils:Cf,Serializer:py,StyleSheetLoader:Ma,ControlSelection:Gm,BookmarkManager:Mm,Selection:my,Event:Ci.Event},html:{Styles:mi,Entities:ei,Node:xg,Schema:ui,DomParser:O0,Writer:Ag,Serializer:Og},Env:I,AddOnManager:Ii,Annotator:Lm,Formatter:sC,UndoManager:dC,EditorCommands:MN,WindowManager:Iy,NotificationManager:Py,EditorObservable:JN,Shortcuts:cR,Editor:gR,FocusManager:Xf,EditorManager:ER,DOM:ae.DOM,ScriptLoader:Ti.ScriptLoader,PluginManager:Ly,ThemeManager:My,ModelManager:Ny,IconManager:_y,Resource:BR,FakeClipboard:SR,trim:J.trim,isArray:J.isArray,is:J.is,toArray:J.toArray,makeMap:J.makeMap,each:J.each,map:J.map,grep:J.grep,inArray:J.inArray,extend:J.extend,walk:J.walk,resolve:J.resolve,explode:J.explode,_addCacheSuffix:J._addCacheSuffix},Ab=J.extend(ER,Pk),PR=(t=Ab,window.tinymce=t,window.tinyMCE=t,Ab);if("object"==typeof module)try{module.exports=PR}catch(PR){}}();