!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=t=>e=>typeof e===t,l=t("boolean"),n=t("function"),r=t=>e=>e.options.get(t),u=r("quickbars_selection_toolbar"),o=r("quickbars_insert_toolbar"),c=r("quickbars_image_toolbar");let d=0;var m=tinymce.util.Tools.resolve("tinymce.util.Delay");const h=a=>{a.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{var s;s=a,new Promise(r=>{let o=!1;const i=document.createElement("input"),n=(i.type="file",i.accept="image/*",i.style.position="fixed",i.style.left="0",i.style.top="0",i.style.opacity="0.001",document.body.appendChild(i),e=>{var t;o||(null!=(t=i.parentNode)&&t.removeChild(i),o=!0,r(e))}),e=e=>{n(Array.prototype.slice.call(e.target.files))},a=(i.addEventListener("input",e),i.addEventListener("change",e),e=>{var t=()=>{n([])};o||("focusin"===e.type?m.setEditorTimeout(s,t,1e3):t()),s.off("focusin remove",a)});s.on("focusin remove",a),i.click()}).then(e=>{if(0<e.length){const n=e[0];r=n,new Promise(e=>{const t=new FileReader;t.onloadend=()=>{e(t.result.split(",")[1])},t.readAsDataURL(r)}).then(e=>{var t,r,o,i;t=a,e=e,r=n,o=t.editorUpload.blobCache,i=o.create((i=(new Date).getTime(),"mceu_"+Math.floor(1e9*Math.random())+ ++d+String(i)),r,e),o.add(i),t.insertContent(t.dom.createHTML("img",{src:i.blobUri()}))})}var r})}}),a.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{a.execCommand("mceInsertTable",!1,{rows:2,columns:2})}})},s=()=>!1;class a{constructor(e,t){this.tag=e,this.value=t}static some(e){return new a(!0,e)}static none(){return a.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?a.some(e(this.value)):a.none()}bind(e){return this.tag?e(this.value):a.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:a.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return null==e?a.none():a.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}a.singletonNone=new a(!1),"undefined"==typeof window&&Function("return this;")();var g=(e,t,r,o,i)=>e(r,o)?a.some(r):n(i)&&i(r)?a.none():t(r,o,i);const v=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},b=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},p=(e,t,r)=>{let o=e.dom;for(var i=n(r)?r:s;o.parentNode;){o=o.parentNode;const e=v(o);if(t(e))return a.some(e);if(i(e))break}return a.none()},f=(e,t,r)=>p(e,e=>b(e,t),r),y=a=>{var e=o(a);0<e.length&&a.ui.registry.addContextToolbar("quickblock",{predicate:e=>{const o=v(e),i=a.schema.getTextBlockElements(),n=e=>e.dom===a.getBody();return!(!(!(e=o.dom)||!e.hasAttribute)&&e.hasAttribute("data-mce-bogus"))&&(e=o,t=n,g((e,t)=>b(e,t),f,e,'table,[data-mce-bogus="all"]',t).fold(()=>{return e=o,t=n,e=e,r=e=>e.dom.nodeName.toLowerCase()in i&&a.dom.isEmpty(e.dom),t=t,g((e,t)=>t(e),p,e,r,t).isSome();var e,t,r},s));var t},items:e,position:"line",scope:"editor"})};e.add("quickbars",e=>{(r=e.options.register)("quickbars_selection_toolbar",{processor:(o=i=>e=>{var t,r,o=l(e)||"string"==(r=typeof(o=o=e),null===o?"null":"object"==r&&Array.isArray(o)?"array":"object"==r&&(o=o,(t=String).prototype.isPrototypeOf(o)||(null==(o=o.constructor)?void 0:o.name)===t.name)?"string":r);return o?l(e)?{value:e?i:"",valid:o}:{value:e.trim(),valid:o}:{valid:!1,message:"Must be a boolean or string."}})(i="bold italic | quicklink h2 h3 blockquote"),default:i}),r("quickbars_insert_toolbar",{processor:o(i="quickimage quicktable"),default:i}),r("quickbars_image_toolbar",{processor:o(i="alignleft aligncenter alignright"),default:i}),h(e),y(e);{var t=e;const n=e=>t.dom.isEditable(e),a=e=>{var t="FIGURE"===e.nodeName&&/image/i.test(e.className),t="IMG"===e.nodeName||t,r=void 0!==(r=v(e)).dom.classList&&r.dom.classList.contains("mce-pagebreak");return t&&n(e.parentElement)&&!r},s=c(t);0<s.length&&t.ui.registry.addContextToolbar("imageselection",{predicate:a,items:s,position:"node"}),0<(r=u(t)).length&&t.ui.registry.addContextToolbar("textselection",{predicate:e=>!a(e)&&!t.selection.isCollapsed()&&n(e),items:r,position:"selection",scope:"editor"})}var r,o,i})}();