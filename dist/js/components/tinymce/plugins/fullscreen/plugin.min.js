!function(){"use strict";const a=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var b=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=n=>e=>{return r=typeof(e=e),(null===e?"null":"object"==r&&Array.isArray(e)?"array":"object"==r&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":r)===n;var t,r},t=t=>e=>typeof e===t,r=t=>e=>t===e,C=e("string"),z=e("array"),s=r(null),$=t("boolean"),S=r(void 0),u=e=>!(null==e),i=t("function"),U=t("number"),l=()=>{},v=e=>()=>e;const c=v(!1),x=v(!0);class A{constructor(e,t){this.tag=e,this.value=t}static some(e){return new A(!0,e)}static none(){return A.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?A.some(e(this.value)):A.none()}bind(e){return this.tag?e(this.value):A.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:A.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return u(e)?A.some(e):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const d=e=>{const t=a(A.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(A.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(A.some(e))}}},m=()=>d(e=>e.unbind()),K=Array.prototype.push,R=(t,r)=>{const n=t.length,o=new Array(n);for(let e=0;e<n;e++){const n=t[e];o[e]=r(n,e)}return o},L=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},M=(r,n)=>{var o=[];for(let e=0,t=r.length;e<t;e++){var i=r[e];n(i,e)&&o.push(i)}return o},p=(e,t)=>{var r=e,n=t,o=c;for(let e=0,t=r.length;e<t;e++){var i=r[e];if(n(i,e))return A.some(i);if(o(i,e))break}return A.none()},E=Object.keys,n=(e,t,r=0,n)=>{e=e.indexOf(t,r);return-1!==e&&(!!S(n)||e+t.length<=n)},N=e=>void 0!==e.style&&i(e.style.getPropertyValue),P=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},o=("undefined"!=typeof window||Function("return this;")(),t=>e=>e.dom.nodeType===t),F=o(1),O=o(3),k=o(9),T=o(11),D=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},W=e=>P(e.dom.ownerDocument),X=e=>R(e.dom.childNodes,P),h=i(Element.prototype.attachShadow)&&i(Node.prototype.getRootNode),Y=v(h),G=h?e=>P(e.dom.getRootNode()):e=>k(e)?e:W(e),q=e=>{var t,e=G(e);return T(t=e)&&u(t.dom.host)?A.some(e):A.none()},H=e=>P(e.dom.host),I=e=>{const t=O(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return q(P(t)).fold(()=>r.body.contains(t),(n=I,o=H,e=>n(o(e))));var n,o},J=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},Q=(e,t)=>{e.dom.removeAttribute(t)},B=(e,t)=>{const r=e.dom;var n=t,o=E(n);for(let e=0,t=o.length;e<t;e++){var i=o[e],s=(u=a=l=void 0,n[i]),l=r,a=i,u=s;if(!C(u))throw console.error("Invalid call to CSS.set. Property ",a,":: Value ",u,":: Element ",l),new Error("CSS value must be a string: "+u);N(l)&&l.style.setProperty(a,u)}},Z=e=>{var t,r,n,o,i=P((e=>{if(Y()&&u(e.target)){var t=P(e.target);if(F(t)&&u(t.dom.shadowRoot)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return 0<(t=t).length?A.some(t[0]):A.none()}}return A.from(e.target)})(e).getOr(e.target)),s=()=>e.stopPropagation(),l=()=>e.preventDefault(),a=(t=l,r=s,(...e)=>t(r.apply(null,e)));return n=e.clientX,o=e.clientY,{target:i,x:n,y:o,stop:s,prevent:l,kill:a,raw:e}},ee=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},te=x,re=()=>g(0,0),g=(e,t)=>({major:e,minor:t}),f={nu:g,detect:(e,t)=>{var t=String(t).toLowerCase();if(0===e.length)return re();{var r=t;const n=((t,r)=>{for(let e=0;e<t.length;e++){var n=t[e];if(n.test(r))return n}})(e,r);return n?(t=e=>Number(r.replace(n,"$"+e)),g(t(1),t(2))):{major:0,minor:0}}},unknown:re},ne=(e,t)=>{const r=String(t).toLowerCase();return p(e,e=>e.search(r))},w=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,y=t=>e=>n(e,t),oe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>n(e,"edge/")&&n(e,"chrome")&&n(e,"safari")&&n(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,w],search:e=>n(e,"chrome")&&!n(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>n(e,"msie")||n(e,"trident")},{name:"Opera",versionRegexes:[w,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:y("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:y("firefox")},{name:"Safari",versionRegexes:[w,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(n(e,"safari")||n(e,"mobile/"))&&n(e,"applewebkit")}],ie=[{name:"Windows",search:y("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>n(e,"iphone")||n(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:y("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:y("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:y("linux"),versionRegexes:[]},{name:"Solaris",search:y("sunos"),versionRegexes:[]},{name:"FreeBSD",search:y("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:y("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],se={browsers:v(oe),oses:v(ie)},le="Chromium",ae="Firefox",ue=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n("Edge"),isChromium:n(le),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(ae),isSafari:n("Safari")}},ce=()=>ue({current:void 0,version:f.unknown()}),de=ue,me=(v("Edge"),v(le),v("IE"),v("Opera"),v(ae),v("Safari"),"Windows"),he="Android",ge="Solaris",ve="FreeBSD",pe="ChromeOS",fe=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(me),isiOS:n("iOS"),isAndroid:n(he),isMacOS:n("macOS"),isLinux:n("Linux"),isSolaris:n(ge),isFreeBSD:n(ve),isChromeOS:n(pe)}},we=()=>fe({current:void 0,version:f.unknown()}),ye=fe,be=(v(me),v("iOS"),v(he),v("Linux"),v("macOS"),v(ge),v(ve),v(pe),(t,e,r)=>{const o=se.browsers(),n=se.oses(),i=e.bind(e=>{var n=o,t=e.brands;for(let e=0;e<t.length;e++){var r=(t=>{const r=t.brand.toLowerCase();return p(n,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:f.nu(parseInt(t.version,10),0)}))})(t[e]);if(r.isSome())return r}return A.none()}).orThunk(()=>{return e=o,r=t,ne(e,r).map(e=>{var t=f.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(ce,de),s=(e=n,g=t,ne(e,g).map(e=>{var t=f.detect(e.versionRegexes,g);return{current:e.name,version:t}}).fold(we,ye)),l=(e=i,u=t,r=r,c=(a=s).isiOS()&&!0===/ipad/i.test(u),d=a.isiOS()&&!c,m=a.isiOS()||a.isAndroid(),h=m||r("(pointer:coarse)"),r=c||!d&&m&&r("(min-device-width:768px)"),m=d||m&&!r,e=e.isSafari()&&a.isiOS()&&!1===/safari/i.test(u),u=!m&&!r&&!e,{isiPad:v(c),isiPhone:v(d),isTablet:v(r),isPhone:v(m),isTouch:v(h),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:v(e),isDesktop:v(u)});var a,u,c,d,m,h,g;return{browser:i,os:s,deviceType:l}}),Se=e=>window.matchMedia(e).matches;let xe=(()=>{let t,r=!1;return(...e)=>(r||(r=!0,t=(()=>be(navigator.userAgent,A.from(navigator.userAgentData),Se)).apply(null,e)),t)})();const Ee=(r,n)=>({left:r,top:n,translate:(e,t)=>Ee(r+e,n+t)}),Fe=Ee,V=e=>{e=void 0===e?window:e;return xe().browser.isFirefox()?A.none():A.from(e.visualViewport)},Oe=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),ke=(r,n,e)=>V(e).map(e=>{const t=e=>n(Z(e));return e.addEventListener(r,t),{unbind:()=>e.removeEventListener(r,t)}}).getOrThunk(()=>({unbind:l}));var Te=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ce=tinymce.util.Tools.resolve("tinymce.Env");const Ae=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},_=e=>e.options.get("fullscreen_native"),Re=e=>{return e.dom===(void 0!==(e=W(e).dom).fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null)},Le=(e,t,r)=>{return e=e,r=r,M(((e,t)=>{var r=i(t)?t:c;let n=e.dom;for(var o=[];null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=P(e);if(o.push(t),!0===r(t))break;n=e}return o})(e,r),e=>D(e,t))},j="data-ephox-mobile-fullscreen-style",Me="position:absolute!important;",Ne="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Pe=Ce.os.isAndroid(),De=Te.DOM,We=V().fold(()=>({bind:l,unbind:l}),r=>{const n=(()=>{const t=d(l);return{...t,on:e=>t.get().each(e)}})(),t=m(),o=m(),i=(()=>{let t=null;return{cancel:()=>{s(t)||(clearTimeout(t),t=null)},throttle:(...e)=>{s(t)&&(t=setTimeout(()=>{t=null,(()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(()=>{n.on(e=>B(e,{top:r.offsetTop+"px",left:r.offsetLeft+"px",height:r.height+"px",width:r.width+"px"}))})}).apply(null,e)},50))}}})();return{bind:e=>{n.set(e),i.throttle(),t.set(ke("resize",i.throttle)),o.set(ke("scroll",i.throttle))},unbind:()=>{n.on(()=>{t.clear(),o.clear()}),n.clear()}}}),qe=(t,n)=>{const e=document.body,r=document.documentElement,o=t.getContainer(),i=P(o),s=(e=>{const t=P(e.getElement());return q(t).map(H).getOrThunk(()=>{var e=W(t).dom.body;if(null==e)throw new Error("Body is not available yet");return P(e)})})(t),l=n.get(),a=P(t.getBody()),u=Ce.deviceType.isTouch(),c=o.style,d=t.iframeElement,m=null==d?void 0:d.style,h=t=>{t(e,"tox-fullscreen"),t(r,"tox-fullscreen"),t(o,"tox-fullscreen"),q(i).map(e=>H(e).dom).each(e=>{t(e,"tox-fullscreen"),t(e,"tox-shadowhost")})},g=()=>{var r,e;u&&(r=t.dom,j,e=1!==(e=document).nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount?[]:R(e.querySelectorAll("[data-ephox-mobile-fullscreen-style]"),P),L(e,e=>{var t=J(e,j);t&&"no-styles"!==t?B(e,r.parseStyle(t)):Q(e,"style"),Q(e,j)})),h(De.removeClass),We.unbind(),A.from(n.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(l)l.fullscreenChangeHandler.unbind(),_(t)&&Re(s)&&((T=W(s).dom).exitFullscreen?T.exitFullscreen():T.msExitFullscreen?T.msExitFullscreen():T.webkitCancelFullScreen&&T.webkitCancelFullScreen()),m.width=l.iframeWidth,m.height=l.iframeHeight,c.width=l.containerWidth,c.height=l.containerHeight,c.top=l.containerTop,c.left=l.containerLeft,g(),T=l.scrollPos,window.scrollTo(T.x,T.y),n.set(null),Ae(t,!1),t.off("remove",g);else{y=W(s),b=void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",S=e=>{!_(t)||Re(s)||null===n.get()||qe(t,n)},y=y,b=b,x=te,b=b,E=x,F=S=S,x=e=>{E(e)&&F(Z(e))},(S=y).dom.addEventListener(b,x,!1);const e={unbind:(O=ee,k=[S,b,x,!1],(...e)=>{e=k.concat(e);return O.apply(null,e)})},r={scrollPos:(e=>{const r=void 0===e?window:e,t=r.document,n=(e=void 0!==(e=P(t))?e.dom:document,o=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop,Fe(o,e));var o;return V(r).fold(()=>{var e=r.document.documentElement,t=e.clientWidth,e=e.clientHeight;return Oe(n.left,n.top,t,e)},e=>Oe(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))})(window),containerWidth:c.width,containerHeight:c.height,containerTop:c.top,containerLeft:c.left,iframeWidth:m.width,iframeHeight:m.height,fullscreenChangeHandler:e};u&&(v=t.dom,y=i,S=a,b=o=>e=>{var t=J(e,"style"),t=void 0===t?"no-styles":t.trim();if(t!==o){var r=e,r=(j,r.dom),n="data-ephox-mobile-fullscreen-style";if(!(C(t)||$(t)||U(t)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",t,":: Element ",r),new Error("Attribute value was not simple");r.setAttribute(n,t+""),B(e,v.parseStyle(o))}},x=Le(y,"*"),f=(r=>{var n=[];for(let e=0,t=r.length;e<t;++e){if(!z(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);K.apply(n,r[e])}return n})(R(x,e=>{return t="*:not(.tox-silver-sink)",e=e=e,M((e=r=e,A.from(e.dom.parentNode).map(P).map(X).map(e=>M(e,e=>{return!(r.dom===e.dom)})).getOr([])),e=>D(e,t));var t,r})),p="background-color",w=(S=S=S).dom,w=void 0!==(p=""!==(p=window.getComputedStyle(w).getPropertyValue(p))||I(S)?p:(S=w,N(S)?S.style.getPropertyValue("background-color"):""))&&""!==p?"background-color:"+p+"!important":"background-color:rgb(255,255,255)!important;",L(f,b("display:none!important;")),L(x,b(Me+Ne+w)),b((!0===Pe?"":Me)+Ne+w)(y)),m.width=m.height="100%",c.width=c.height="",h(De.addClass),We.bind(i),t.on("remove",g),n.set(r),_(t)&&((S=s.dom).requestFullscreen?S.requestFullscreen():S.msRequestFullscreen?S.msRequestFullscreen():S.webkitRequestFullScreen&&S.webkitRequestFullScreen()),Ae(t,!0)}var v,p,f,w,y,b,S,x,E,F,O,k,T},He=(r,n)=>t=>{t.setActive(null!==n.get());const e=e=>t.setActive(e.state);return r.on("FullscreenStateChanged",e),()=>r.off("FullscreenStateChanged",e)};b.add("fullscreen",e=>{var t,r,n,o,i,s,l=a(null);return e.inline||((0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1}),s=l,(i=e).addCommand("mceFullScreen",()=>{qe(i,s)}),n=l,o=()=>r.execCommand("mceFullScreen"),(r=e).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:o,onSetup:He(r,n)}),r.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:o,onSetup:He(r,n)}),e.addShortcut("Meta+Shift+F","","mceFullScreen")),t=l,{isFullscreen:()=>null!==t.get()}})}();