!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const r=(t,e,o)=>{t.dom.toggleClass(t.getBody(),"mce-visualblocks"),o.set(!o.get()),t=t,o=o.get(),t.dispatch("VisualBlocks",{state:o})},g=(o,s)=>e=>{e.setActive(s.get());const t=t=>e.setActive(t.state);return o.on("VisualBlocks",t),()=>o.off("VisualBlocks",t)};t.add("visualblocks",(t,e)=>{(0,t.options.register)("visualblocks_default_state",{processor:"boolean",default:!1});var o,s,l,i,a,c,n,u=(()=>{let e=!1;return{get:()=>e,set:t=>{e=t}}})();n=u,(c=t).addCommand("mceVisualBlocks",()=>{r(c,0,n)}),i=u,a=()=>l.execCommand("mceVisualBlocks"),(l=t).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:a,onSetup:g(l,i)}),l.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:a,onSetup:g(l,i)}),s=u,(o=t).on("PreviewFormats AfterPreviewFormats",t=>{s.get()&&o.dom.toggleClass(o.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),o.on("init",()=>{o.options.get("visualblocks_default_state")&&r(o,0,s)})})}();