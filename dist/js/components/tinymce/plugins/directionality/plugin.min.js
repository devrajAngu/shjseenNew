!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=e=>t=>typeof t===e,l=t=>{return"string"==(r=typeof(t=t),null===t?"null":"object"==r&&Array.isArray(t)?"array":"object"==r&&(t=t,(e=String).prototype.isPrototypeOf(t)||(null==(t=t.constructor)?void 0:t.name)===e.name)?"string":r);var e,r},s=e("boolean"),a=t=>!(null==t),u=e("function"),d=e("number"),c=()=>!1;class h{constructor(t,e){this.tag=t,this.value=e}static some(t){return new h(!0,t)}static none(){return h.singletonNone}fold(t,e){return this.tag?e(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?h.some(t(this.value)):h.none()}bind(t){return this.tag?t(this.value):h.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:h.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(null!=t?t:"Called getOrDie on None")}static from(t){return a(t)?h.some(t):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const m=(r,o)=>{for(let t=0,e=r.length;t<e;t++)o(r[t],t)},g=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},v=(t,e)=>{var r=t.dom;if(1!==r.nodeType)return!1;{const t=r;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},r=("undefined"!=typeof window||Function("return this;")(),e=>t=>t.dom.nodeType===e),f=r(1),y=r(3),o=r(9),p=r(11),w=(t,e)=>{t.dom.removeAttribute(e)},b=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode)?t=>g(t.dom.getRootNode()):t=>o(t)?t:g(t.dom.ownerDocument),N=t=>g(t.dom.host),S=t=>{const e=y(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const r=e.ownerDocument;return t=g(e),t=b(t),(p(o=t)&&a(o.dom.host)?h.some(t):h.none()).fold(()=>r.body.contains(e),(n=S,i=N,t=>n(i(t))));var o,n,i},A=t=>{return"rtl"===(e="direction",r=(t=t).dom,""!==(e=window.getComputedStyle(r).getPropertyValue(e))||S(t)?e:void 0!==(e=t=r).style&&u(e.style.getPropertyValue)?t.style.getPropertyValue("direction"):"")?"rtl":"ltr";var e,r},E=(t,r)=>{var o,n=((e,r)=>{const o=e.length,n=new Array(o);for(let t=0;t<o;t++){const o=e[t];n[t]=r(o,t)}return n})(t.dom.childNodes,g),i=[];for(let t=0,e=n.length;t<e;t++){var l=n[t];o=l,t,v(o,r)&&i.push(l)}return i},T=t=>f(t)&&"li"===t.dom.nodeName.toLowerCase(),n=(n,t,i)=>{m(t,t=>{const e=g(t),r=T(e),o=(t=e,(r?(t=>{let e=t.dom;for(var r=u(void 0)?void 0:c;e.parentNode;){e=e.parentNode;const t=g(e);if(v(t,"ol,ul"))return h.some(t);if(r(t))break}return h.none()})(t):h.some(t)).getOr(t));var t=o;t=t,h.from(t.dom.parentNode).map(g).filter(f).each(t=>{if(n.setStyle(o.dom,"direction",null),A(t)===i)w(o,"dir");else{var t=o.dom,e=i;if(!(l(e)||s(e)||d(e)))throw console.error("Invalid call to Attribute.set. Key ","dir",":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute("dir",e+"")}if(A(o)!==i&&n.setStyle(o.dom,"direction",i),r){const t=E(o,"li[dir],li[style]");m(t,t=>{w(t,"dir"),n.setStyle(t.dom,"direction",null)})}})})},i=(t,e)=>{t.selection.isEditable()&&(n(t.dom,t.selection.getSelectedBlocks(),e),t.nodeChanged())},C=(r,o)=>e=>{const t=t=>{t=g(t.element);e.setActive(A(t)===o),e.setEnabled(r.selection.isEditable())};return r.on("NodeChange",t),e.setEnabled(r.selection.isEditable()),()=>r.off("NodeChange",t)};t.add("directionality",t=>{var e,r;(r=t).addCommand("mceDirectionLTR",()=>{i(r,"ltr")}),r.addCommand("mceDirectionRTL",()=>{i(r,"rtl")}),(e=t).ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:C(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:C(e,"rtl")})})}();