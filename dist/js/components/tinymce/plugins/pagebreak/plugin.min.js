!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");const a=a=>e=>e.options.get(a),l=a("pagebreak_separator"),g=a("pagebreak_split_block"),p="mce-pagebreak",d=e=>{var a=`<img src="${t.transparentSrc}" class="${p}" data-mce-resize="false" data-mce-placeholder />`;return e?`<p>${a}</p>`:a},m=t=>e=>{const a=()=>{e.setEnabled(t.selection.isEditable())};return t.on("NodeChange",a),a(),()=>{t.off("NodeChange",a)}};e.add("pagebreak",e=>{(o=e.options.register)("pagebreak_separator",{processor:"string",default:"\x3c!-- pagebreak --\x3e"}),o("pagebreak_split_block",{processor:"boolean",default:!1}),(r=e).addCommand("mcePageBreak",()=>{r.insertContent(d(g(r)))}),o=()=>t.execCommand("mcePageBreak"),(t=e).ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:o,onSetup:m(t)}),t.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:o,onSetup:m(t)});{var n=e;const s=l(n),i=()=>g(n),c=new RegExp(s.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,e=>"\\"+e),"gi");n.on("BeforeSetContent",e=>{e.content=e.content.replace(c,d(i()))}),n.on("PreInit",()=>{n.serializer.addNodeFilter("img",e=>{let a,t,r=e.length;for(;r--;)if(a=e[r],(t=a.attr("class"))&&-1!==t.indexOf(p)){const e=a.parent;if(e&&n.schema.getBlockElements()[e.name]&&i()){e.type=3,e.value=s,e.raw=!0,a.remove();continue}a.type=3,a.value=s,a.raw=!0}})})}var a,t,r,o;(a=e).on("ResolveName",e=>{"IMG"===e.target.nodeName&&a.dom.hasClass(e.target,p)&&(e.name="pagebreak")})})}();