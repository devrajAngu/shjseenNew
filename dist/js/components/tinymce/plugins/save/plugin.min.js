!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const a=e=>"function"==typeof e;var c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");const o=o=>e=>e.options.get(o),r=o("save_enablewhendirty"),s=o("save_onsavecallback"),l=o("save_oncancelcallback"),d=(e,o)=>{e.notificationManager.open({text:o,type:"error"})},m=n=>e=>{const o=()=>{e.setEnabled(!r(n)||n.isDirty())};return o(),n.on("NodeChange dirty",o),()=>n.off("NodeChange dirty",o)};e.add("save",e=>{var t,o,n;(n=e.options.register)("save_enablewhendirty",{processor:"boolean",default:!0}),n("save_onsavecallback",{processor:"function"}),n("save_oncancelcallback",{processor:"function"}),(o=e).ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>o.execCommand("mceSave"),onSetup:m(o)}),o.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>o.execCommand("mceCancel"),onSetup:m(o)}),o.addShortcut("Meta+S","","mceSave"),(t=e).addCommand("mceSave",()=>{var e,o,n;e=t,n=c.DOM.getParent(e.id,"form"),r(e)&&!e.isDirty()||(e.save(),o=s(e),a(o)?(o.call(e,e),e.nodeChanged()):n?(e.setDirty(!1),n.onsubmit&&!n.onsubmit()||("function"==typeof n.submit?n.submit():d(e,"Error: Form submit field collision.")),e.nodeChanged()):d(e,"Error: No form element found."))}),t.addCommand("mceCancel",()=>{var e,o,n;e=t,o=i.trim(e.startContent),n=l(e),a(n)?n.call(e,e):e.resetContent(o)})})}();