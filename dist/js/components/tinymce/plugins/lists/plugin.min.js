!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const r=n=>e=>{return r=typeof(e=e),(null===e?"null":"object"==r&&Array.isArray(e)?"array":"object"==r&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":r)===n;var t,r},n=t=>e=>typeof e===t,H=r("string"),g=r("object"),i=r("array"),l=n("boolean"),h=e=>!(null==e),f=n("function"),V=n("number"),j=()=>{},K=(e,t)=>e===t,z=t=>e=>!t(e),Q=()=>!1;class m{constructor(e,t){this.tag=e,this.value=t}static some(e){return new m(!0,e)}static none(){return m.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?m.some(e(this.value)):m.none()}bind(e){return this.tag?e(this.value):m.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:m.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return h(e)?m.some(e):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const W=Array.prototype.slice,q=Array.prototype.indexOf,Z=Array.prototype.push,G=(e,t)=>{return e=e,t=t,-1<q.call(e,t)},J=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return!0;return!1},d=(t,r)=>{const n=t.length,o=new Array(n);for(let e=0;e<n;e++){const n=t[e];o[e]=r(n,e)}return o},u=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},v=(r,n)=>{var o=[];for(let e=0,t=r.length;e<t;e++){var s=r[e];n(s,e)&&o.push(s)}return o},o=(e,r,n)=>(u(e,(e,t)=>{n=r(n,e,t)}),n),a=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++){var s=r[e];if(n(s,e))return m.some(s);if(o(s,e))break}return m.none()},X=(e,t)=>a(e,t,Q),Y=(e,t)=>{var r=d(e,t),n=[];for(let e=0,t=r.length;e<t;++e){if(!i(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);Z.apply(n,r[e])}return n},ee=e=>{e=W.call(e,0);return e.reverse(),e},te=(e,t)=>0<=t&&t<e.length?m.some(e[t]):m.none(),re=e=>te(e,0),y=e=>te(e,e.length-1),ne=(r,n)=>{const o=[],s=f(n)?t=>J(o,e=>n(e,t)):e=>G(o,e);for(let e=0,t=r.length;e<t;e++){var a=r[e];s(a)||o.push(a)}return o},oe=(e,t,r=K)=>e.exists(e=>r(e,t)),se=(e,t,r)=>e.isSome()&&t.isSome()?m.some(r(e.getOrDie(),t.getOrDie())):m.none(),ae=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},C=(e,t)=>{t=(t||document).createElement(e);return ae(t)},p=ae,b=(e,t)=>e.dom===t.dom,S=("undefined"!=typeof window||Function("return this;")(),e=>e.dom.nodeName.toLowerCase()),ie=e=>1===e.dom.nodeType,le=t=>e=>ie(e)&&S(e)===t,de=e=>m.from(e.dom.parentNode).map(p),c=e=>d(e.dom.childNodes,p),me=(e,t)=>{e=e.dom.childNodes;return m.from(e[t]).map(p)},ce=e=>me(e,0),ue=e=>me(e,e.dom.childNodes.length-1),pe=(e,t,r)=>{let n=e.dom;for(var o=f(r)?r:Q;n.parentNode;){n=n.parentNode;const e=p(n);if(t(e))return m.some(e);if(o(e))break}return m.none()},ge=(e,t,r)=>{return n=pe,r=r,(t=t)(e=e)?m.some(e):f(r)&&r(e)?m.none():n(e,t,r);var n},he=(t,r)=>{de(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},N=(e,t)=>{e.dom.appendChild(t.dom)},fe=(t,e)=>{u(e,e=>{N(t,e)})},ve=e=>{e.dom.textContent="",u(c(e),e=>{ye(e)})},ye=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)};var Ce=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),be=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),L=tinymce.util.Tools.resolve("tinymce.util.VK");const Se=e=>d(e,p),Ne=Object.keys,Le=(r,n)=>{var o=Ne(r);for(let e=0,t=o.length;e<t;e++){var s=o[e];n(r[s],s)}},O=(e,t)=>{const n=e.dom;Le(t,(e,t)=>{var r=n;if(!(H(e)||l(e)||V(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",r),new Error("Attribute value was not simple");r.setAttribute(t,e+"")})},Oe=e=>o(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),ke=e=>{return e=e,p(e.dom.cloneNode(!0))},Ae=(e,t)=>{var r,t=((e,t)=>{t=C(t),e=Oe(e);return O(t,e),t})(e,t),n=t,o=(o=r=e,m.from(o.dom.nextSibling).map(p).fold(()=>{de(r).each(e=>{N(e,n)})},e=>{he(e,n)}),c(e));return fe(t,o),ye(e),t};var Te,xe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ee=t=>e=>h(e)&&e.nodeName.toLowerCase()===t,e=t=>e=>h(e)&&t.test(e.nodeName),A=e=>h(e)&&3===e.nodeType,T=e=>h(e)&&1===e.nodeType,x=e(/^(OL|UL|DL)$/),we=e(/^(OL|UL)$/),De=Ee("ol"),Be=e(/^(LI|DT|DD)$/),Ie=e(/^(DT|DD)$/),Pe=e(/^(TH|TD)$/),E=Ee("br"),Me=(e,t)=>h(t)&&t.nodeName in e.schema.getTextBlockElements(),Re=(e,t)=>h(e)&&e.nodeName in t,w=(e,t,r)=>{var n=e.isEmpty(t);return!(r&&0<e.select("span[data-mce-type=bookmark]",t).length)&&n},Ue=(e,t)=>e.isChildOf(t,e.getRoot()),$e=t=>e=>e.options.get(t),_e=$e("lists_indent_on_tab"),Fe=$e("forced_root_block"),He=$e("forced_root_block_attrs"),Ve=(e,t)=>{var r=e.dom,n=e.schema.getBlockElements(),o=r.createFragment(),s=Fe(e),a=He(e);let i,l,d=!1;for(l=r.create(s,a),Re(t.firstChild,n)||o.appendChild(l);i=t.firstChild;){const e=i.nodeName;d||"SPAN"===e&&"bookmark"===i.getAttribute("data-mce-type")||(d=!0),Re(i,n)?(o.appendChild(i),l=null):(l||(l=r.create(s,a),o.appendChild(l)),l.appendChild(i))}return!d&&l&&l.appendChild(r.create("br",{"data-mce-bogus":"1"})),o},D=xe.DOM,je=le("dd"),Ke=le("dt"),ze=(l,d)=>{var e;je(d)?Ae(d,"dt"):Ke(d)&&(e=d,m.from(e.dom.parentElement).map(p).each(e=>{{var t=l,r=(e=e.dom,d.dom);const o=D.select('span[data-mce-type="bookmark"]',e),s=Ve(t,r),a=D.createRng();a.setStartAfter(r),a.setEndAfter(e);var n=a.extractContents();for(let e=n.firstChild;e;e=e.firstChild)if("LI"===e.nodeName&&t.dom.isEmpty(e)){D.remove(e);break}if(t.dom.isEmpty(n)||D.insertAfter(n,e),D.insertAfter(s,e),(n=r.parentElement)&&w(t.dom,n)){const i=n.parentNode;i&&k.each(o,e=>{i.insertBefore(e,r.parentNode)}),D.remove(n)}D.remove(r),w(t.dom,e)&&D.remove(e)}}))},Qe=e=>{Ke(e)&&Ae(e,"dd")},We=(e,t)=>{var r;return A(e)?{container:e,offset:t}:(r=Ce.getNode(e,t),A(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&A(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&A(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t})},qe=e=>{var t=e.cloneRange(),r=We(e.startContainer,e.startOffset),r=(t.setStart(r.container,r.offset),We(e.endContainer,e.endOffset));return t.setEnd(r.container,r.offset),t},Ze=["OL","UL","DL"],Ge=Ze.join(","),B=(e,t)=>{t=t||e.selection.getStart(!0);return e.dom.getParent(t,Ge,Ye(e,t))},Je=e=>{var t,r=e.selection.getSelectedBlocks();return v((t=e,e=k.map(r,e=>t.dom.getParent(e,"li,dd,dt",Ye(t,e))||e),ne(e)),Be)},Xe=(e,t)=>{t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},Ye=(n,e)=>{e=n.dom.getParents(e,n.dom.isBlock);return X(e,e=>{return t=n.schema,!x(r=e)&&!Be(r)&&J(Ze,e=>t.isValidChild(r.nodeName,e));var t,r}).getOr(n.getBody())},et=(e,t)=>{e=e.dom.getParents(t,"ol,ul",Ye(e,t));return y(e)},I=e=>/\btox\-/.test(e.className),tt=(e,t)=>a(e,x,Pe).exists(e=>e.nodeName===t&&!I(e)),rt=(e,t)=>null!==t&&!e.dom.isEditable(t),P=(e,t)=>{t=e.dom.getParent(t,"ol,ul,dl");return rt(e,t)},nt=(e,t)=>{var r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},M=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),ot=(Te=/^\s+|\s+$/g,e=>e.replace(Te,"")),st=(e,t)=>{N(e.item,t.list)},R=e=>{var t=e,e="OL,UL",r=t.dom;if(1!==r.nodeType)return!1;{const t=r;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},at=e=>ce(e).exists(R),it=e=>0<e.depth,lt=e=>e.isSelected,dt=t=>(u(t,(s,e)=>{((e,t)=>{const r=e[t].depth,n=e=>e.depth===r&&!e.dirty,o=e=>e.depth<r;return a(ee(e.slice(0,t)),n,o).orThunk(()=>a(e.slice(t+1),n,o))})(t,e).fold(()=>{var e,r,n,o,t;s.dirty&&((e=s).listAttributes=(e=e=e.listAttributes,n=(e,t)=>"start"!==t,r=t={},o=j,Le(e,(e,t)=>{(n(e,t)?(e,t)=>{r[t]=e}:o)(e,t)}),t))},e=>{s.listType=e.listType,s.listAttributes={...e.listAttributes}})}),t),mt=(r,a,i,l)=>ce(l).filter(R).fold(()=>{a.each(e=>{b(e.start,l)&&i.set(!0)});n=l,o=r,s=i.get();var n,o,s,e=de(n).filter(ie).map(e=>{return{depth:o,dirty:!1,isSelected:s,content:(t=n,r=c(t),t=ue(t).exists(R)?r.slice(0,-1):r,d(t,ke)),itemAttributes:Oe(n),listAttributes:Oe(e),listType:S(e)};var t,r}),t=(a.each(e=>{b(e.end,l)&&i.set(!1)}),ue(l).filter(R).map(e=>ct(r,a,i,e)).getOr([]));return e.toArray().concat(t)},e=>ct(r,a,i,e)),ct=(t,r,n,e)=>Y(c(e),e=>(R(e)?ct:mt)(t+1,r,n,e)),ut=(e,t)=>{t=dt(t);return((g,e)=>{e=o(e,(e,t)=>{if(t.depth>e.length){var r=e,n=t,o=((t,r,n)=>{var o=[];for(let e=0;e<n;e++)o.push(((e,t)=>{t={list:C(t,e),item:C("li",e)};return N(t.list,t.item),t})(t,r.listType));return o})(g,n,n.depth-r.length),s=o;for(let e=1;e<s.length;e++)st(s[e-1],s[e]);var a=o,i=n;for(let e=0;e<a.length-1;e++){c=void 0;var l=a[e].item;var d="list-style-type";var m="none";var c,l=l.dom;if(!H(m))throw console.error("Invalid call to CSS.set. Property ",d,":: Value ",m,":: Element ",l),new Error("CSS value must be a string: "+m);void 0!==(c=l).style&&f(c.style.getPropertyValue)&&l.style.setProperty(d,m)}return y(a).each(e=>{O(e.list,i.listAttributes),O(e.item,i.itemAttributes),fe(e.item,i.content)}),n=o,se(y(r),re(n),st),r.concat(o)}return u=g,p=t,n=e.slice(0,p.depth),y(n).each(e=>{var t,r=((e,t,r)=>{e=C("li",e);return O(e,t),fe(e,r),e})(u,p.itemAttributes,p.content);t=e,r=r,N(t.list,r),t.item=r,t=e,r=p,S(t.list)!==r.listType&&(t.list=Ae(t.list,r.listType)),O(t.list,r.listAttributes)}),n;var u,p},[]);return re(e).map(e=>e.list)})(e.contentDocument,t).toArray()},pt=(s,e,a)=>{e=((e,t)=>{const r=(()=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();return d(e,e=>({sourceList:e,entries:ct(0,t,r,e)}))})(e,(e=>{e=d(Je(e),p);return se(X(e,z(at)),X(ee(e),z(at)),(e,t)=>({start:e,end:t}))})(s));u(e,e=>{o=e.entries,r=a,u(v(o,lt),e=>{var t=e;switch(r){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0}),t=s,o=e.entries;var r,t,n,o=Y(((o,s)=>{if(0===o.length)return[];{let r=s(o[0]);var a=[];let n=[];for(let e=0,t=o.length;e<t;e++){var i=o[e],l=s(i);l!==r&&(a.push(n),n=[]),r=l,n.push(i)}return 0!==n.length&&a.push(n),a}})(o,it),e=>(re(e).exists(it)?ut:(t,e)=>{e=dt(e);return d(e,e=>{e=(e=>{const t=document.createDocumentFragment();return u(e,e=>{t.appendChild(e.dom)}),p(t)})(e.content);return p(Ve(t,e.dom))})})(t,e));u(o,e=>{M(s,"Indent"===a?"IndentList":"OutdentList",e.dom)}),n=e.sourceList,u(o,e=>{he(n,e)}),ye(e.sourceList)})},gt=(e,t)=>{var r,n,o,s=Se((a=s=e,n=et(a,a.selection.getStart()),a=v(a.selection.getSelectedBlocks(),we),n=n.toArray().concat(a),r=s,a=n,a=d(a,e=>et(r,e).getOr(e)),ne(a))),a=Se((n=e,v(Je(n),Ie)));let i=!1;return(s.length||a.length)&&(n=e.selection.getBookmark(),pt(e,s,t),o=e,s=t,t=a,u(t,"Indent"===s?Qe:e=>ze(o,e)),e.selection.moveToBookmark(n),e.selection.setRng(qe(e.selection.getRng())),e.nodeChanged(),i=!0),i},ht=(e,t)=>{return r=e,n=B(r),!rt(r,n)&&gt(e,t);var r,n},ft=e=>ht(e,"Indent"),vt=e=>ht(e,"Outdent"),yt=e=>ht(e,"Flatten"),Ct=e=>"\ufeff"===e;var bt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const s=xe.DOM,U=n=>{const o={},e=e=>{let t=n[e?"startContainer":"endContainer"],r=n[e?"startOffset":"endOffset"];if(T(t)){const n=s.create("span",{"data-mce-type":"bookmark"});t.hasChildNodes()?(r=Math.min(r,t.childNodes.length-1),e?t.insertBefore(n,t.childNodes[r]):s.insertAfter(n,t.childNodes[r])):t.appendChild(n),t=n,r=0}o[e?"startContainer":"endContainer"]=t,o[e?"startOffset":"endOffset"]=r};return e(!0),n.collapsed||e(),o},$=n=>{var e=e=>{let t=n[e?"startContainer":"endContainer"],r=n[e?"startOffset":"endOffset"];if(t){if(T(t)&&t.parentNode){const n=t;r=(e=>{var t;let r=null==(t=e.parentNode)?void 0:t.firstChild,n=0;for(;r;){if(r===e)return n;T(r)&&"bookmark"===r.getAttribute("data-mce-type")||n++,r=r.nextSibling}return-1})(t),t=t.parentNode,s.remove(n),!t.hasChildNodes()&&s.isBlock(t)&&t.appendChild(s.create("br"))}n[e?"startContainer":"endContainer"]=t,n[e?"startOffset":"endOffset"]=r}},e=(e(!0),e(),s.createRng());return e.setStart(n.startContainer,n.startOffset),n.endContainer&&e.setEnd(n.endContainer,n.endOffset),qe(e)},_=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},St=(r,e)=>{k.each(e,(e,t)=>{r.setAttribute(t,e)})},F=(e,t,r)=>{var n,o=e,s=r;s=s["list-style-type"]||null,o.setStyle(t,"list-style-type",s),o=e,s=t,n=r,St(s,n["list-attributes"]),k.each(o.select("li",s),e=>{St(e,n["list-item-attributes"])})},Nt=(e,t)=>h(t)&&!Re(t,e.schema.getBlockElements()),Lt=(i,e,t,l)=>{let r=e[t?"startContainer":"endContainer"];e=e[t?"startOffset":"endOffset"],T(r)&&(r=r.childNodes[Math.min(e,r.childNodes.length-1)]||r),!t&&E(r.nextSibling)&&(r=r.nextSibling),e=(e,t)=>{for(var r,n,o,s=new be(e,(e=>{for(;!i.dom.isBlock(e)&&e.parentNode&&l!==e;)e=e.parentNode;return e})(e)),a=t?"next":"prev";r=s[a]();)if(n=i,o=r,!(h(o)&&o.nodeName in n.schema.getVoidElements()||Ct(r.textContent))&&0!==(null==(o=r.textContent)?void 0:o.length))return m.some(r);return m.none()};if(t&&A(r))if(Ct(r.textContent))r=e(r,!1).getOr(r);else for(null!==r.parentNode&&Nt(i,r.parentNode)&&(r=r.parentNode);null!==r.previousSibling&&(Nt(i,r.previousSibling)||A(r.previousSibling));)r=r.previousSibling;if(!t&&A(r))if(Ct(r.textContent))r=e(r,!0).getOr(r);else for(null!==r.parentNode&&Nt(i,r.parentNode)&&(r=r.parentNode);null!==r.nextSibling&&(Nt(i,r.nextSibling)||A(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==l;){const e=r.parentNode;if(Me(i,r))return r;if(/^(TD|TH)$/.test(e.nodeName))return r;r=e}return r},Ot=(a,i,l)=>{var e,t,r,n,o,s,d=a.selection.getRng();let m="LI";const c=Ye(a,(e=d,n=(o=a).selection.getStart(!0),o=Lt(o,e,!0,o.getBody()),o=p(o),s=p(e.commonAncestorContainer),t=b,r=[s],s=(...e)=>{e=r.concat(e);return t.apply(null,e)},pe(o,s,void 0).isSome()?e.commonAncestorContainer:n)),u=a.dom;"false"!==u.getContentEditable(a.selection.getNode())&&("DL"===(i=i.toUpperCase())&&(m="DT"),o=U(d),s=v(((r,e,n)=>{const o=[],s=r.dom,t=Lt(r,e,!0,n),a=Lt(r,e,!1,n);let i;var l=[];for(let e=t;e&&(l.push(e),e!==a);e=e.nextSibling);return k.each(l,e=>{var t;Me(r,e)?(o.push(e),i=null):s.isBlock(e)||E(e)?(E(e)&&s.remove(e),i=null):(t=e.nextSibling,bt.isBookmarkNode(e)&&(x(t)||Me(r,t)||!t&&e.parentNode===n)?i=null:(i||(i=s.create("p"),null!=(t=e.parentNode)&&t.insertBefore(i,e),o.push(i)),i.appendChild(e)))}),o})(a,d,c),a.dom.isEditable),k.each(s,e=>{let t;var r,n,o=e.previousSibling,s=e.parentNode;Be(s)||(o&&x(o)&&o.nodeName===i&&((e,t)=>{e=e.getStyle(o,"list-style-type"),t=t?t["list-style-type"]:"";return e===(null===t?"":t)})(u,l)?(t=o,e=u.rename(e,m),o.appendChild(e)):(t=u.create(i),s.insertBefore(t,e),t.appendChild(e),e=u.rename(e,m)),r=u,n=e,k.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],e=>r.setStyle(n,e,"")),F(u,t,l),At(a.dom,t))}),a.selection.setRng($(o)))},kt=(e,t,r)=>{return n=t,o=r,x(n)&&n.nodeName===(null==o?void 0:o.nodeName)&&(n=r,(o=e).getStyle(t,"list-style-type",!0)===o.getStyle(n,"list-style-type",!0))&&t.className===r.className;var n,o},At=(e,t)=>{let r,n=t.nextSibling;if(kt(e,t,n)){for(var o=n;r=o.firstChild;)t.appendChild(r);e.remove(o)}if(n=t.previousSibling,kt(e,t,n)){for(var s=n;r=s.lastChild;)t.insertBefore(r,t.firstChild);e.remove(s)}},Tt=(e,t,r,n)=>{var o;t.nodeName!==r?(o=e.dom.rename(t,r),F(e.dom,o,n),M(e,_(r),o)):(F(e.dom,t,n),M(e,_(r),t))},xt=(e,n,t,r)=>{var o;n.classList.forEach((e,t,r)=>{e.startsWith("tox-")&&(r.remove(e),0===r.length)&&n.removeAttribute("class")}),n.nodeName!==t?(o=e.dom.rename(n,t),F(e.dom,o,r),M(e,_(t),o)):(F(e.dom,n,r),M(e,_(t),n))},Et=e=>"list-style-type"in e,wt=(e,t,r)=>{var n=B(e);if(!P(e,n)){var o,s=(e=>{const t=B(e),r=e.selection.getSelectedBlocks();return e=t,n=r,h(e)&&1===n.length&&n[0]===e?(n=t,v(n.querySelectorAll(Ge),x)):v(r,e=>x(e)&&t!==e);var n})(e),r=g(r)?r:{};if(0<s.length){var a=e;var i=n;var l=t;var d=r;var m=x(i);if(!m||i.nodeName!==l||Et(d)||I(i)){Ot(a,l,d);const c=U(a.selection.getRng()),u=m?[i,...s]:s,p=m&&I(i)?xt:Tt;k.each(u,e=>{p(a,e,l,d)}),a.selection.setRng($(c))}else yt(a)}else s=t,m=r,(o=n)!==(i=e).getBody()&&(o?o.nodeName!==s||Et(m)||I(o)?(t=U(i.selection.getRng()),I(o)&&o.classList.forEach((e,t,r)=>{e.startsWith("tox-")&&(r.remove(e),0===r.length)&&o.removeAttribute("class")}),F(i.dom,o,m),r=i.dom.rename(o,s),At(i.dom,r),i.selection.setRng($(t)),Ot(i,s,m),M(i,_(s),r)):yt(i):(Ot(i,s,m),M(i,_(s),o)))}},Dt=xe.DOM,Bt=(o,e)=>{e=k.grep(o.select("ol,ul",e));k.each(e,e=>{var t,r=o,n=e.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===e&&((t=n.previousSibling)&&"LI"===t.nodeName?(t.appendChild(e),w(r,n)&&Dt.remove(n)):Dt.setStyle(n,"listStyleType","none")),x(n)){const r=n.previousSibling;r&&"LI"===r.nodeName&&r.appendChild(e)}})},It=(e,t,r,n)=>{let o=t.startContainer;t=t.startOffset;if(A(o)&&(r?t<o.data.length:0<t))return o;for(var s=e.schema.getNonEmptyElements(),t=(T(o)&&(o=Ce.getNode(o,t)),new be(o,n)),a=(r&&(n=e.dom,e=o,!!E(e))&&n.isBlock(e.nextSibling)&&!E(e.previousSibling)&&t.next(),(r?t.next:t.prev2).bind(t));o=a();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(s[o.nodeName])return o;if(A(o)&&0<o.data.length)return o}return null},Pt=(e,t)=>{t=t.childNodes;return 1===t.length&&!x(t[0])&&e.isBlock(t[0])},Mt=(t,e,r)=>{let n;var o=e.parentNode;if(Ue(t,e)&&Ue(t,r)){x(r.lastChild)&&(n=r.lastChild),o===r.lastChild&&E(o.previousSibling)&&t.remove(o.previousSibling);var s,a,o=r.lastChild,o=(o&&E(o)&&e.hasChildNodes()&&t.remove(o),w(t,r,!0)&&ve(p(r)),t),i=e,l=r,d=Pt(o,l)?l.firstChild:l;if(l=o,a=i,Pt(l,a)&&l.remove(a.firstChild,!0),!w(o,i,!0))for(;s=i.firstChild;)d.appendChild(s);n&&r.appendChild(n);l=((e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)})(p(r),p(e))?t.getParents(e,x,r):[];t.remove(e),u(l,e=>{w(t,e)&&e!==t.getRoot()&&t.remove(e)})}},Rt=(l,d)=>{const e=l.dom,t=l.selection,r=t.getStart(),n=Xe(l,r),m=e.getParent(t.getStart(),"LI",n);if(m){const r=m.parentElement;if(r===l.getBody()&&w(e,r))return!0;const c=qe(t.getRng()),u=e.getParent(It(l,c,d,n),"LI",n);if(u&&u!==m)return l.undoManager.transact(()=>{var e,t,r,n;{var o,s,a,i;d?(e=l,o=c,a=u,i=m,(s=e.dom).isEmpty(i)?(t=e,r=a,n=i,ve(p(n)),Mt(t.dom,r,n),t.selection.setCursorLocation(n,0)):(r=U(o),Mt(s,a,i),e.selection.setRng($(r)))):(null==(n=(t=m).parentNode)?void 0:n.firstChild)===t?vt(l):(o=l,s=c,a=m,i=u,s=U(s),Mt(o.dom,a,i),a=$(s),o.selection.setRng(a))}}),!0;if(!u&&!d&&0===c.startOffset&&0===c.endOffset)return l.undoManager.transact(()=>{yt(l)}),!0}return!1},Ut=e=>{var t=e.selection.getStart(),r=Xe(e,t);return e.dom.getParent(t,"LI,DT,DD",r)||0<Je(e).length},$t=(e,t)=>{var r,n=e.selection;return!P(e,n.getNode())&&(n.isCollapsed()?(n=e,t=t,Rt(n,t)||((o,s)=>{const a=o.dom,e=o.selection.getStart(),i=Xe(o,e),l=a.getParent(e,a.isBlock,i);if(l&&a.isEmpty(l)){const e=qe(o.selection.getRng()),d=a.getParent(It(o,e,s,i),"LI",i);if(d)return t=e=>G(["td","th","caption"],S(e)),r=e=>e.dom===i,[t,r,n=K]=[ge(p(d),t,r),ge(p(e.startContainer),t,r),b],!!se(t,r,n).getOr(t.isNone()&&r.isNone())&&(o.undoManager.transact(()=>{var e=d.parentNode,t=a,r=l,n=i;n=t.getParent(r.parentNode,t.isBlock,n),t.remove(r),n&&t.isEmpty(n)&&t.remove(n),At(a,e),o.selection.select(d,!0),o.selection.collapse(s)}),!0)}var t,r,n;return!1})(n,t)):(r=e,!!Ut(r)&&(r.undoManager.transact(()=>{r.execCommand("Delete"),Bt(r.dom,r.getBody())}),!0)))},_t=e=>{e=ee(ot(e).split("")),e=d(e,(e,t)=>{e=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*e});return o(e,(e,t)=>e+t,0)},Ft=e=>{var t;return--e<0?"":(t=e%26,e=Math.floor(e/26),Ft(e)+String.fromCharCode("A".charCodeAt(0)+t))},Ht=(t,r)=>()=>{var e=B(t);return h(e)&&e.nodeName===r},Vt=n=>{n.addCommand("mceListProps",()=>{var t,e,r;t=n,r=B(t),De(r)&&!P(t,r)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(r={start:t.dom.getAttrib(r,"start","1"),listStyleType:m.from(t.dom.getStyle(r,"list-style-type"))},e=parseInt(r.start,10),oe(r.listStyleType,"upper-alpha")?Ft(e):oe(r.listStyleType,"lower-alpha")?Ft(e).toLowerCase():r.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:e=>{(e=>{switch(/^[0-9]+$/.test(t=e)?2:/^[A-Z]+$/.test(t)?0:/^[a-z]+$/.test(t)?1:0<t.length?4:3){case 2:return m.some({listStyleType:m.none(),start:e});case 0:return m.some({listStyleType:m.some("upper-alpha"),start:_t(e).toString()});case 1:return m.some({listStyleType:m.some("lower-alpha"),start:_t(e).toString()});case 3:return m.some({listStyleType:m.none(),start:""});case 4:return m.none()}var t})(e.getData().start).each(e=>{t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})}),e.close()}})})};var jt=tinymce.util.Tools.resolve("tinymce.html.Node");const Kt=e=>3===e.type,zt=e=>0===e.length,Qt=n=>{const r=(e,t)=>{const r=jt.create("li");u(e,e=>r.append(e)),t?n.insert(r,t,!0):n.append(r)},e=o(n.children(),(e,t)=>Kt(t)?[...e,t]:zt(e)||Kt(t)?e:(r(e,t),[]),[]);zt(e)||r(e)},Wt=(r,n)=>t=>(t.setEnabled(r.selection.isEditable()),nt(r,e=>{t.setActive(tt(e.parents,n)),t.setEnabled(!P(r,e.element)&&r.selection.isEditable())}));t.add("lists",e=>{return(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0}),(c=e).on("PreInit",()=>{var e=c["parser"];e.addNodeFilter("ul,ol",e=>u(e,Qt))}),e.hasPlugin("rtc",!0)?Vt(e):(l=e,_e(l)&&(m=l).on("keydown",e=>{e.keyCode!==L.TAB||L.metaKeyPressed(e)||m.undoManager.transact(()=>{(e.shiftKey?vt:ft)(m)&&e.preventDefault()})}),(d=l).on("ExecCommand",e=>{e=e.command.toLowerCase();"delete"!==e&&"forwarddelete"!==e||!Ut(d)||Bt(d.dom,d.getBody())}),d.on("keydown",e=>{e.keyCode===L.BACKSPACE?$t(d,!1)&&e.preventDefault():e.keyCode===L.DELETE&&$t(d,!0)&&e.preventDefault()}),(i=e).on("BeforeExecCommand",e=>{e=e.command.toLowerCase();"indent"===e?ft(i):"outdent"===e&&vt(i)}),i.addCommand("InsertUnorderedList",(e,t)=>{wt(i,"UL",t)}),i.addCommand("InsertOrderedList",(e,t)=>{wt(i,"OL",t)}),i.addCommand("InsertDefinitionList",(e,t)=>{wt(i,"DL",t)}),i.addCommand("RemoveList",()=>{yt(i)}),Vt(i),i.addCommand("mceListUpdate",(e,t)=>{if(g(t)){var r=i,n=t;const o=B(r);null===o||P(r,o)||r.undoManager.transact(()=>{g(n.styles)&&r.dom.setStyles(o,n.styles),g(n.attrs)&&Le(n.attrs,(e,t)=>r.dom.setAttrib(o,t,e))})}}),i.addQueryStateHandler("InsertUnorderedList",Ht(i,"UL")),i.addQueryStateHandler("InsertOrderedList",Ht(i,"OL")),i.addQueryStateHandler("InsertDefinitionList",Ht(i,"DL"))),l=e=>()=>a.execCommand(e),(a=e).hasPlugin("advlist")||(a.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:l("InsertOrderedList"),onSetup:Wt(a,"OL")}),a.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:l("InsertUnorderedList"),onSetup:Wt(a,"UL")})),s={text:"List properties...",icon:"ordered-list",onAction:()=>r.execCommand("mceListProps"),onSetup:(o="OL",t=>nt(n,e=>t.setEnabled(tt(e.parents,o)&&!P(n,e.element))))},(n=r=e).ui.registry.addMenuItem("listprops",s),r.ui.registry.addContextMenu("lists",{update:e=>{e=B(r,e);return De(e)?["listprops"]:[]}}),t=e,{backspaceDelete:e=>{$t(t,e)}};var t,r,n,o,s,a,i,l,d,m,c})}();