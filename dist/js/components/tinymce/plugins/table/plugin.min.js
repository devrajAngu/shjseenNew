!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const b=l=>e=>{return o=typeof(e=e),(null===e?"null":"object"==o&&Array.isArray(e)?"array":"object"==o&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":o)===l;var t,o},q=t=>e=>typeof e===t,L=b("string"),H=b("array"),j=q("boolean"),V=e=>void 0===e,W=e=>!(null==e),y=q("function"),z=q("number"),$=()=>{},w=e=>()=>e,U=e=>e;function g(t,...o){return(...e)=>{e=o.concat(e);return t.apply(null,e)}}const G=e=>{e()},h=w(!1),f=w(!0);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return W(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const c=Object.keys,K=Object.hasOwnProperty,m=(o,l)=>{var r=c(o);for(let e=0,t=r.length;e<t;e++){var n=r[e];l(o[n],n)}},J=(e,t)=>{var o,l,r,n={};return e=e,l=t,o=n,r=$,m(e,(e,t)=>{(l(e,t)?(e,t)=>{o[t]=e}:r)(e,t)}),n},S=e=>c(e).length,d=(e,t)=>C(e,t)?v.from(e[t]):v.none(),C=(e,t)=>K.call(e,t),Q=(e,t)=>C(e,t)&&void 0!==e[t]&&null!==e[t],X=Array.prototype.indexOf,Y=Array.prototype.push,T=(e,t)=>{return e=e,t=t,-1<X.call(e,t)},Z=(o,l)=>{for(let e=0,t=o.length;e<t;e++)if(l(o[e],e))return!0;return!1},ee=(t,o)=>{var l=[];for(let e=0;e<t;e++)l.push(o(e));return l},s=(t,o)=>{const l=t.length,r=new Array(l);for(let e=0;e<l;e++){const l=t[e];r[e]=o(l,e)}return r},x=(o,l)=>{for(let e=0,t=o.length;e<t;e++)l(o[e],e)},A=(o,l)=>{var r=[];for(let e=0,t=o.length;e<t;e++){var n=o[e];l(n,e)&&r.push(n)}return r},te=(e,o,l)=>(x(e,(e,t)=>{l=o(l,e,t)}),l),oe=(e,t)=>{var o=e,l=t,r=h;for(let e=0,t=o.length;e<t;e++){var n=o[e];if(l(n,e))return v.some(n);if(r(n,e))break}return v.none()},n=(e,t)=>{var o=s(e,t),l=[];for(let e=0,t=o.length;e<t;++e){if(!H(o[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+o);Y.apply(l,o[e])}return l},le=(o,l)=>{for(let e=0,t=o.length;e<t;++e)if(!0!==l(o[e],e))return!1;return!0},re=(e,t)=>0<=t&&t<e.length?v.some(e[t]):v.none(),ne=(t,o)=>{for(let e=0;e<t.length;e++){var l=o(t[e],e);if(l.isSome())return l}return v.none()},l=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},R={fromHtml:(e,t)=>{t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return l(t.childNodes[0])},fromTag:(e,t)=>{t=(t||document).createElement(e);return l(t)},fromText:(e,t)=>{t=(t||document).createTextNode(e);return l(t)},fromDom:l,fromPoint:(e,t,o)=>v.from(e.dom.elementFromPoint(t,o)).map(l)},O=(e,t)=>{var o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ae=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,_=(e,t)=>e.dom===t.dom,se=O,D=("undefined"!=typeof window||Function("return this;")(),e=>e.dom.nodeName.toLowerCase()),ce=e=>e.dom.nodeType,ie=t=>e=>ce(e)===t,o=ie(1),me=ie(3),de=ie(9),ue=ie(11),pe=t=>e=>o(e)&&D(e)===t,be=e=>de(e)?e:R.fromDom(e.dom.ownerDocument),ge=e=>v.from(e.dom.parentNode).map(R.fromDom),he=e=>v.from(e.dom.nextSibling).map(R.fromDom),r=e=>s(e.dom.childNodes,R.fromDom),fe=y(Element.prototype.attachShadow)&&y(Node.prototype.getRootNode)?e=>R.fromDom(e.dom.getRootNode()):be,ye=e=>R.fromDom(e.dom.host),we=e=>{const t=me(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return e=R.fromDom(t),e=fe(e),(ue(l=e)&&W(l.dom.host)?v.some(e):v.none()).fold(()=>o.body.contains(t),(r=we,n=ye,e=>r(n(e))));var l,r,n};var ve,Se=(e,t,o,l,r)=>e(o,l)?v.some(o):y(r)&&r(o)?v.none():t(o,l,r);const Ce=(e,t,o)=>{let l=e.dom;for(var r=y(o)?o:h;l.parentNode;){l=l.parentNode;const e=R.fromDom(l);if(t(e))return v.some(e);if(r(e))break}return v.none()},a=(e,t,o)=>Ce(e,e=>O(e,t),o),Te=(e,t)=>{return t=t,e=void 0===e?document:e.dom,ae(e)?v.none():v.from(e.querySelector(t)).map(R.fromDom)},xe=(e,t,o)=>Se((e,t)=>O(e,t),a,e,t,o),Ae=(e,t=!1)=>{return we(e)?e.dom.isContentEditable:(e=e,xe(e,"[contenteditable]").fold(w(t),e=>"true"===Re(e)))},Re=e=>e.dom.contentEditable,N=t=>e=>{return _(e,(e=t,R.fromDom(e.getBody())))},I=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Oe=e=>R.fromDom(e.selection.getStart()),_e=(e,t)=>{let o=[];return x(r(e),e=>{o=(o=t(e)?o.concat([e]):o).concat(_e(e,t))}),o},De=(e,t)=>{return e=e,A(r(e),e=>O(e,t))},Ne=(e,t)=>{return t=t,e=void 0===e?document:e.dom,ae(e)?[]:s(e.querySelectorAll(t),R.fromDom)},Ie=(e,t,o)=>{if(!(L(o)||j(o)||z(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")},Me=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},M=(e,t)=>v.from(Me(e,t)),Pe=(e,t)=>{e.dom.removeAttribute(t)},ke=(e,t,o=(e,t)=>e===t)=>e.exists(e=>o(e,t)),Ee=(e,t,o)=>e.isSome()&&t.isSome()?v.some(o(e.getOrDie(),t.getOrDie())):v.none(),Be=(e,t)=>{return e=e,""===(t=t)||e.length>=t.length&&e.substr(0,0+t.length)===t},Fe=(ve=/^\s+|\s+$/g,e=>e.replace(ve,"")),qe=e=>0<e.length,Le=(e,t=10)=>{e=parseInt(e,t);return isNaN(e)?v.none():v.some(e)},He=e=>void 0!==e.style&&y(e.style.getPropertyValue),je=(e,t)=>{var o=e.dom,l=window.getComputedStyle(o).getPropertyValue(t);return""!==l||we(e)?l:Ve(o,t)},Ve=(e,t)=>He(e)?e.style.getPropertyValue(t):"",u=(e,t)=>{e=e.dom,e=Ve(e,t);return v.from(e).filter(e=>0<e.length)},We=(e,t,o=0)=>M(e,t).map(e=>parseInt(e,10)).getOr(o),ze=(e,t)=>$e(e,t,f),$e=(e,t,o)=>n(r(e),e=>O(e,t)?o(e)?[e]:[]:$e(e,t,o)),Ue=["tfoot","thead","tbody","colgroup"],Ge=(e,t,o)=>({element:e,rowspan:t,colspan:o}),Ke=(e,t,o)=>({element:e,cells:t,section:o}),P=(e,t)=>xe(e,"table",t),Je=e=>ze(e,"tr"),Qe=e=>P(e).fold(w([]),e=>De(e,"colgroup")),Xe=e=>ge(e).map(e=>{var t,e=D(e);return t=e,T(Ue,t)?e:"tbody"}).getOr("tbody"),Ye=e=>M(e,"data-snooker-locked-cols").bind(e=>v.from(e.match(/\d+/g))).map(e=>{var o=e,l=f,r={};for(let e=0,t=o.length;e<t;e++){var n=o[e];r[String(n)]=l(n,e)}return r}),Ze=(e,t)=>e+","+t,et=e=>{e=e,t=Je(e),e=[...Qe(e),...t],l=Xe;var l,t=s(e,e=>{if("colgroup"===D(e)){const l=s((t=e,O(t,"colgroup")?De(t,"col"):n(Qe(t),e=>De(e,"col"))),e=>{var t=We(e,"span",1);return Ge(e,1,t)});return Ke(e,l,"colgroup")}var t,o=s((t=e,ze(t,"th,td")),e=>{var t=We(e,"rowspan",1),o=We(e,"colspan",1);return Ge(e,t,o)});return Ke(e,o,l(e))});{const c={},r=[],i=(t=e=t,re(t,0).map(e=>e.element).bind(P).bind(Ye).getOr({}));let o=0,a=0,s=0;var{pass:t,fail:e}=(o=>{var l=[],r=[];for(let e=0,t=o.length;e<t;e++){var n=o[e];("colgroup"===n.section?l:r).push(n)}return{pass:l,fail:r}})(e),{columns:t,colgroups:e}=(x(e,e=>{const t=[];x(e.cells,o=>{let l=0;for(;void 0!==c[Ze(s,l)];)l++;const r=Q(i,l.toString()),n={element:o.element,rowspan:o.rowspan,colspan:o.colspan,row:s,column:l,isLocked:r};for(let t=0;t<o.colspan;t++)for(let e=0;e<o.rowspan;e++){const o=l+t,r=Ze(s+e,o);c[r]=n,a=Math.max(a,o+1)}t.push(n)}),o++,r.push(Ke(e.element,t,e.section)),s++}),e=t,re(e,e.length-1).map(e=>{const t=(e=>{const l={};let r=0;return x(e.cells,t=>{const o=t.colspan;ee(o,e=>{e=r+e;l[e]={element:t.element,colspan:o,column:e}}),r+=o}),l})(e),o={element:e.element,columns:((e,o)=>{const l=[];return m(e,(e,t)=>{l.push(o(e,t))}),l})(t,U)};return{colgroups:[o],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})));return{grid:{rows:o,columns:a},access:c,all:r,columns:t,colgroups:e}}},tt=(e,t,o)=>{e=(e=>{e=n(e.all,e=>e.cells);return A(e,e=>o(t,e.element))})(e);return 0<e.length?v.some(e[0]):v.none()};var ot=tinymce.util.Tools.resolve("tinymce.util.Tools");const lt=(t,e,o)=>{var l=t.select("td,th",e);let r;for(let e=0;e<l.length;e++){var n=t.getStyle(l[e],o);if((r=V(r)?n:r)!==n)return""}return r},rt=(t,o,l)=>{ot.each("left center right".split(" "),e=>{e!==l&&t.formatter.remove("align"+e,{},o)}),l&&t.formatter.apply("align"+l,{},o)},nt=(e,t,o)=>{e.dispatch("TableModified",{...o,table:t})},at=(e,t,o)=>{return e=je(e,t),t=o,e=parseFloat(e),(isNaN(e)?v.none():v.some(e)).getOr(t)};var st=tinymce.util.Tools.resolve("tinymce.Env");const ct=ee(5,e=>{e=e+1+"px";return{title:e,value:e}}),it=s(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),mt=e=>{var t=e.dom,t=null!=(t=t.getParent(e.selection.getStart(),t.isBlock))?t:e.getBody();return e=R.fromDom(t),t=(t=(e=e).dom).getBoundingClientRect().width||t.offsetWidth,e=e,t-at(e,"padding-left",0)-at(e,"padding-right",0)-at(e,"border-left-width",0)-at(e,"border-right-width",0)+"px"},e=t=>e=>e.options.get(t),dt=e("table_sizing_mode"),ut=e("table_border_widths"),pt=e("table_border_styles"),bt=e("table_cell_advtab"),gt=e("table_row_advtab"),k=e("table_advtab"),ht=e("table_appearance_options"),ft=e("table_grid"),E=e("table_style_by_css"),yt=e("table_cell_class_list"),wt=e("table_row_class_list"),vt=e("table_class_list"),St=e("table_toolbar"),Ct=e("table_background_color_map"),Tt=e("table_border_color_map"),xt=e=>"fixed"===dt(e),At=e=>"responsive"===dt(e),Rt=e=>{var t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:(t=e,e=o,At(t)||!E(t)?e:xt(t)?{...e,width:mt(t)}:{...e,width:"100%"})},Ot=e=>{var t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:(t=e,e=o,At(t)||E(t)?e:xt(t)?{...e,width:mt(t)}:{...e,width:"100%"})},_t=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Dt=(t,e,o)=>((e,t,o)=>{const l=tt(e,t,_),r=tt(e,o,_);return l.bind(o=>r.map(e=>{return t=o,e=e,{startRow:Math.min(t.row,e.row),startCol:Math.min(t.column,e.column),finishRow:Math.max(t.row+t.rowspan-1,e.row+e.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,e.column+e.colspan-1)};var t}))})(t,e,o).bind(e=>{{var l=t,r=e;let o=!0;var n,a,s,c=g(_t,r);for(let t=r.startRow;t<=r.finishRow;t++)for(let e=r.startCol;e<=r.finishCol;e++)o=o&&(n=l,a=t,s=e,v.from(n.access[Ze(a,s)]).exists(c));return o?v.some(r):v.none()}}),Nt=et,It=(t,o)=>{ge(t).each(e=>{e.dom.insertBefore(o.dom,t.dom)})},Mt=(e,t)=>{he(e).fold(()=>{ge(e).each(e=>{i(e,t)})},e=>{It(e,t)})},i=(e,t)=>{e.dom.appendChild(t.dom)},Pt=(o,l)=>{x(l,(e,t)=>{t=0===t?o:l[t-1];Mt(t,e)})},kt=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Et=(o=>{const t=e=>o(e)?v.from(e.dom.nodeValue):v.none();return{get:e=>{if(o(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!o(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(me);var Bt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Ft=(r,n,e,t)=>{var o,e=n(r,e),l=(e,t)=>{var o,l,t=n(r,t);return o=r,l=t,e.bind(e=>l.filter(g(o.eq,e)))},a=e,s=t;for(let e=s.length-1;0<=e;e--)o=s[e],e,a=l(a,o);return a},qt={up:w({selector:a,closest:xe,predicate:Ce,all:(e,t)=>{var o=y(t)?t:h;let l=e.dom;for(var r=[];null!==l.parentNode&&void 0!==l.parentNode;){const e=l.parentNode,t=R.fromDom(e);if(r.push(t),!0===o(t))break;l=e}return r}}),down:w({selector:Ne,predicate:_e}),styles:w({get:je,getRaw:u,set:(e,t,o)=>{e=e.dom;if(!L(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);He(e)&&e.style.setProperty(t,o)},remove:(e,t)=>{var o;o=e.dom,t=t,He(o)&&o.style.removeProperty(t),ke(M(e,"style").map(Fe),"")&&Pe(e,"style")}}),attrs:w({get:Me,set:(e,t,o)=>{Ie(e.dom,t,o)},remove:Pe,copyTo:(e,t)=>{{e=te(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{});const o=t.dom;m(e,(e,t)=>{Ie(o,t,e)})}}}),insert:w({before:It,after:Mt,afterAll:Pt,append:i,appendAll:(t,e)=>{x(e,e=>{i(t,e)})},prepend:(t,o)=>{var e;e=(e=t).dom.childNodes,v.from(e[0]).map(R.fromDom).fold(()=>{i(t,o)},e=>{t.dom.insertBefore(o.dom,e.dom)})},wrap:(e,t)=>{It(e,t),i(t,e)}}),remove:w({unwrap:e=>{var t=r(e);0<t.length&&Pt(e,t),kt(e)},remove:kt}),create:w({nu:R.fromTag,clone:e=>R.fromDom(e.dom.cloneNode(!1)),text:R.fromText}),query:w({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>v.from(e.dom.previousSibling).map(R.fromDom),nextSibling:he}),property:w({children:r,name:D,parent:ge,document:e=>be(e).dom,isText:me,isComment:e=>8===ce(e)||"#comment"===D(e),isElement:o,isSpecial:e=>{e=D(e);return T(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:e=>o(e)?M(e,"lang"):v.none(),getText:e=>Et.get(e),setText:(e,t)=>Et.set(e,t),isBoundary:e=>!!o(e)&&("body"===D(e)||T(Bt,D(e))),isEmptyTag:e=>!!o(e)&&T(["br","img","hr","input"],D(e)),isNonEditable:e=>o(e)&&"false"===Me(e,"contenteditable")}),eq:_,is:se},Lt=e=>a(e,"table"),Ht=(e,t,o)=>Te(e,t).bind(n=>Te(e,o).bind(t=>{return l=Lt,r=[n,t],e=qt,(0<r.length?(e=e,o=(e,t)=>l(t),r=r,Ft(e,o,r[0],r.slice(1))):v.none()).map(e=>({first:n,last:t,table:e}));var e,o,l,r})),jt=e=>s(e,R.fromDom),Vt="data-mce-selected",Wt="data-mce-first-selected",zt="data-mce-last-selected",$t={selected:Vt,selectedSelector:"td["+Vt+"],th["+Vt+"]",firstSelected:Wt,firstSelectedSelector:"td["+Wt+"],th["+Wt+"]",lastSelected:zt,lastSelectedSelector:"td["+zt+"],th["+zt+"]"},Ut=l=>(e,t)=>{var o=D(e),o="col"===o||"colgroup"===o?P(o=e).bind(e=>{return e=e,t=$t.firstSelectedSelector,0<(e=Ne(e,t)).length?v.some(e):v.none();var t}).fold(w(o),e=>e[0]):e;return xe(o,l,t)},Gt=Ut("th,td,caption"),Kt=Ut("th,td"),Jt=e=>jt(e.model.table.getSelectedCells()),Qt=(e,o)=>{var e=Kt(e),t=e.bind(e=>P(e)).map(e=>Je(e));return Ee(e,t,(t,e)=>A(e,e=>Z(jt(e.dom.cells),e=>"1"===Me(e,o)||_(e,t)))).getOr([])},Xt=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Yt=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Zt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,eo=e=>{return e=e,(Be(e,"#")?e.substring(1):e).toUpperCase()},to=e=>{e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},oo=e=>{return e=to(e.red)+to(e.green)+to(e.blue),{value:eo(e)}},lo=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ro=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,no=(e,t,o,l)=>({red:e,green:t,blue:o,alpha:l}),ao=(e,t,o,l)=>{e=parseInt(e,10),t=parseInt(t,10),o=parseInt(o,10),l=parseFloat(l);return no(e,t,o,l)},so=e=>{var t;return"transparent"===e?v.some(no(0,0,0,0)):null!==(t=lo.exec(e))?v.some(ao(t[1],t[2],t[3],"1")):null!==(t=ro.exec(e))?v.some(ao(t[1],t[2],t[3],t[4])):v.none()},co=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},io=e=>Q(e,"menu"),p=e=>s(e,e=>{var t=e.text||e.title||"";return io(e)?{text:t,items:p(e.menu)}:{text:t,value:e.value}}),B=(o,e,l,r)=>s(e,e=>{var n,a,s,t=e.text||e.title;return io(e)?{type:"nestedmenuitem",text:t,getSubmenuItems:()=>B(o,e.menu,l,r)}:{text:t,type:"togglemenuitem",onAction:()=>r(e.value),onSetup:(n=o,a=l,s=e.value,o=>{const l=(e=>{const t=co(v.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(v.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(v.some(e))}}})(e=>e.unbind()),r=!qe(s),e=()=>{var e=Jt(n),t=e=>n.formatter.match(a,{value:s},e.dom,r);r?(o.setActive(!Z(e,t)),l.set(n.formatter.formatChanged(a,e=>o.setActive(!e),!0))):(o.setActive(le(e,t)),l.set(n.formatter.formatChanged(a,o.setActive,!1,{value:s})))};return n.initialized?e():n.on("init",e),l.clear})}}),F=(t,o)=>e=>{t.execCommand("mceTableApplyCellStyle",!1,{[o]:e})},mo=e=>n(e,e=>io(e)?[{...e,menu:mo(e.menu)}]:qe(e.value)?[e]:[]),uo=(t,o,l,r)=>e=>e(B(t,o,l,r)),po=(t,e,o)=>{e=s(e,e=>{return{text:e.title,value:"#"+(r=e.value,t=e=r,(Yt.test(t)||Zt.test(t)?v.some({value:eo(e)}):v.none()).orThunk(()=>so(r).map(oo)).getOrThunk(()=>{var e=document.createElement("canvas"),t=(e.height=1,e.width=1,e.getContext("2d")),e=(t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=r,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data),t=e[0],o=e[1],l=e[2],e=e[3];return oo(no(t,o,l,e))}).value),type:"choiceitem"};var t,r});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<e.length?e:void 0,allowCustomColors:!1},onAction:e=>{e="remove"===e.value?"":e.value;t.execCommand("mceTableApplyCellStyle",!1,{[o]:e})}}]},bo=t=>()=>{var e="header"===t.queryCommandValue("mceTableRowType")?"body":"header";t.execCommand("mceTableRowType",!1,{type:e})},go=t=>()=>{var e="th"===t.queryCommandValue("mceTableColType")?"td":"th";t.execCommand("mceTableColType",!1,{type:e})},ho=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Xt}],fo=e=>ho.concat((e=>{e=p(yt(e));return 0<e.length?v.some({name:"class",type:"listbox",label:"Class",items:e}):v.none()})(e).toArray()),yo=(e,t)=>{e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(p(pt(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},wo=(o,l)=>{const r=o.dom;return{setAttrib:(e,t)=>{r.setAttrib(l,e,t)},setStyle:(e,t)=>{r.setStyle(l,e,t)},setFormat:(e,t)=>{""===t?o.formatter.remove(e,{value:null},l,!0):o.formatter.apply(e,{value:t},l)}}},vo=pe("th"),So=e=>{var t=s(e,e=>{return o="thead"===(e=e).section,l=ke((t=e.cells,0===(l=A(t,e=>vo(e.element))).length?v.some("td"):l.length===t.length?v.some("th"):v.none()),"th"),("tfoot"===e.section?{type:"footer"}:o||l?{type:"header",subType:(t=l,(e=o)&&t?"sectionCells":e?"section":"cells")}:{type:"body"}).type;var t,o,l}),o=T(t,"header"),l=T(t,"footer");if(o||l){const e=T(t,"body");return!o||e||l?o||e||!l?v.none():v.some("footer"):v.some("header")}return v.some("body")},Co=(e,t)=>ne(e.all,e=>oe(e.cells,e=>_(t,e.element))),To=(l,e,r)=>{var e=(t=>{const o=[],l=e=>{o.push(e)};for(let e=0;e<t.length;e++)t[e].each(l);return o})(s(e.selection,e=>{return t=["td","th"],e=e,o=void 0,((o=h)(e)?v.none():T(t,D(e))?v.some(e):a(e,t.join(","),e=>O(e,"table")||o(e))).bind(e=>Co(l,e)).filter(r);var t,o})),t=e;return 0<e.length?v.some(t):v.none()},xo=(e,t)=>To(e,t,f),Ao=(o,e)=>le(e,e=>{return t=o,e=e,Co(t,e).exists(e=>!e.isLocked);var t}),Ro=((n=>{if(!H(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");const a=[],s={};x(n,(e,t)=>{var o=c(e);if(1!==o.length)throw new Error("one and only one name per case");const l=o[0],r=e[l];if(void 0!==s[l])throw new Error("duplicate key detected:"+l);if("cata"===l)throw new Error("cannot have a case named cata (sorry)");if(!H(r))throw new Error("case arguments must be an array");a.push(l),s[l]=(...o)=>{var e=o.length;if(e!==r.length)throw new Error("Wrong number of arguments to case "+l+". Expected "+r.length+" ("+r+"), got "+e);return{fold:(...e)=>{if(e.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+e.length);return e[t].apply(null,o)},match:e=>{const t=c(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(le(a,e=>T(t,e)))return e[l].apply(null,o);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:e=>{console.log(e,{constructors:a,constructor:l,params:o})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),e=>{return Be(e,"rgb")?so(t=e).map(oo).map(e=>"#"+e.value).getOr(t):e;var t}),Oo=e=>{e=R.fromDom(e);return{borderwidth:u(e,"border-width").getOr(""),borderstyle:u(e,"border-style").getOr(""),bordercolor:u(e,"border-color").map(Ro).getOr(""),backgroundcolor:u(e,"background-color").map(Ro).getOr("")}},_o=e=>{const r=e[0],t=e.slice(1);return x(t,e=>{x(c(r),l=>{m(e,(e,t)=>{var o=r[l];""!==o&&l===t&&o!==e&&(r[l]="")})})}),r},Do=(e,t,o,l)=>oe(e,e=>!V(o.formatter.matchNode(l,t+e))).getOr(""),No=g(Do,["left","center","right"],"align"),Io=g(Do,["top","middle","bottom"],"valign"),Mo=l=>P(R.fromDom(l)).map(e=>{var t={selection:jt(l.cells)};{const o=et(e);return xo(o,t).bind(e=>{var t=e[e.length-1],e=e[0].row,t=t.row+t.rowspan,e=o.all.slice(e,t);return So(e)}).getOr("")}}).getOr(""),Po=(e,o)=>{const l=et(e),t=(e=l,n(e.all,e=>e.cells)),r=A(t,t=>Z(o,e=>_(t.element,e)));return s(r,e=>{return{element:e.element.dom,column:(t=l,e=e.column,v.from(t.columns[e]).map(e=>e.element.dom))};var t})},ko=(e,t,l,o)=>{const c=o.getData();o.close(),e.undoManager.transact(()=>{{var r=e,n=t,o=l,a=c;const s=J(a,(e,t)=>o[t]!==e);0<S(s)&&1<=n.length&&P(n[0]).each(e=>{var t=Po(e,n),o=0<S(J(s,(e,t)=>"scope"!==t&&"celltype"!==t)),l=C(s,"celltype");if(o||C(s,"scope")){var m=r,d=a,u=g(C,s);const p=1===t.length;x(t,e=>{var t,o,l,r,n,a,s=e.element,c=p?f:u,i=wo(m,s);r=i,e=e.column.map(e=>wo(m,e)).getOr(i),n=d,(a=c)("scope")&&r.setAttrib("scope",n.scope),a("class")&&r.setAttrib("class",n.class),a("height")&&r.setStyle("height",I(n.height)),a("width")&&e.setStyle("width",I(n.width)),bt(m)&&(r=i,a=d,(e=c)("backgroundcolor")&&r.setFormat("tablecellbackgroundcolor",a.backgroundcolor),e("bordercolor")&&r.setFormat("tablecellbordercolor",a.bordercolor),e("borderstyle")&&r.setFormat("tablecellborderstyle",a.borderstyle),e("borderwidth"))&&r.setFormat("tablecellborderwidth",I(a.borderwidth)),u("halign")&&rt(m,s,d.halign),u("valign")&&(t=m,o=s,l=d.valign,ot.each("top middle bottom".split(" "),e=>{e!==l&&t.formatter.remove("valign"+e,{},o)}),l)&&t.formatter.apply("valign"+l,{},o)})}l&&r.execCommand("mceTableCellType",!1,{type:a.celltype,no_events:!0}),nt(r,e.dom,{structure:l,style:o})})}e.focus()})},Eo=e=>{var t,o,a,l,r,n=Jt(e);0!==n.length&&(a=e,l=n,r=P(l[0]).map(e=>s(Po(e,l),e=>{{var t=a,o=e.element,l=bt(a);e=e.column;const r=t.dom,n=(e,t)=>r.getStyle(e,t)||r.getAttrib(e,t);return{width:n(e.getOr(o),"width"),height:n(o,"height"),scope:r.getAttrib(o,"scope"),celltype:o.nodeName.toLowerCase(),class:r.getAttrib(o,"class",""),halign:No(t,o),valign:Io(t,o),...l?Oo(o):{}}}})),r=_o(r.getOrDie()),t={type:"tabpanel",tabs:[{title:"General",name:"general",items:fo(e)},yo(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:fo(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:bt(e)?t:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:g(ko,e,n,r)}))},Bo=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Fo=e=>Bo.concat((e=>{e=p(wt(e));return 0<e.length?v.some({name:"class",type:"listbox",label:"Class",items:e}):v.none()})(e).toArray()),qo=(d,u,p,e)=>{const b=e.getData();e.close(),d.undoManager.transact(()=>{var t=d,e=u,o=p,l=b,r=J(l,(e,t)=>o[t]!==e);if(0<S(r)){const o=C(r,"type"),i=!o||1<S(r);if(i){var n=t;var a=e;var s=l;var c=g(C,r);const m=1===a.length?f:c;x(a,e=>{var t,o,l,r=wo(n,e);t=r,o=s,(l=m)("class")&&t.setAttrib("class",o.class),l("height")&&t.setStyle("height",I(o.height)),gt(n)&&(l=r,t=s,(o=m)("backgroundcolor")&&l.setStyle("background-color",t.backgroundcolor),o("bordercolor")&&l.setStyle("border-color",t.bordercolor),o("borderstyle"))&&l.setStyle("border-style",t.borderstyle),c("align")&&rt(n,e,s.align)})}o&&t.execCommand("mceTableRowType",!1,{type:l.type,no_events:!0}),P(R.fromDom(e[0])).each(e=>nt(t,e.dom,{structure:o,style:i}))}d.focus()})},Lo=r=>{var e,t,o,l=Qt(Oe(r),$t.selected);0!==l.length&&(e=s(l,e=>{return t=r,e=e.dom,o=gt(r),{height:(l=t.dom).getStyle(e,"height")||l.getAttrib(e,"height"),class:l.getAttrib(e,"class",""),type:Mo(e),align:No(t,e),...o?Oo(e):{}};var t,o,l}),e=_o(e),t={type:"tabpanel",tabs:[{title:"General",name:"general",items:Fo(r)},yo(r,"row")]},o={type:"panel",items:[{type:"grid",columns:2,items:Fo(r)}]},r.windowManager.open({title:"Row Properties",size:"normal",body:gt(r)?t:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:g(qo,r,s(l,e=>e.dom),e)}))},Ho=(e,t,o)=>{o=o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],e=ht(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],t=0<t.length?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return o.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(e).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(t)},jo=(t,o,l,r)=>{if("TD"===o.tagName||"TH"===o.tagName)L(l)&&W(r)?t.setStyle(o,l,r):t.setStyles(o,l);else if(o.children)for(let e=0;e<o.children.length;e++)jo(t,o.children[e],l,r)},Vo=(m,d,o,e)=>{const u=m.dom,p=e.getData(),b=J(p,(e,t)=>o[t]!==e);e.close(),""===p.class&&delete p.class,m.undoManager.transact(()=>{if(d||(l=Le(p.cols).getOr(1),e=Le(p.rows).getOr(1),m.execCommand("mceInsertTable",!1,{rows:e,columns:l}),d=Kt(Oe(m),N(m)).bind(e=>P(e,N(m))).map(e=>e.dom).getOrDie()),0<S(b)){var e={border:C(b,"border"),bordercolor:C(b,"bordercolor"),cellpadding:C(b,"cellpadding")},t=m,o=d,l=p,r=t.dom,n={},a={},s=E(t),c=k(t);if(V(l.class)||(n.class=l.class),a.height=I(l.height),s?a.width=I(l.width):r.getAttrib(o,"width")&&(n.width=(i=l.width)?i.replace(/px$/,""):""),s?(a["border-width"]=I(l.border),a["border-spacing"]=I(l.cellspacing)):(n.border=l.border,n.cellpadding=l.cellpadding,n.cellspacing=l.cellspacing),s&&o.children){const t={};if(e.border&&(t["border-width"]=I(l.border)),e.cellpadding&&(t.padding=I(l.cellpadding)),c&&e.bordercolor&&(t["border-color"]=l.bordercolor),!(e=>{for(const t in e)if(K.call(e,t))return!1;return!0})(t))for(let e=0;e<o.children.length;e++)jo(r,o.children[e],t)}if(c){const t=l;a["background-color"]=t.backgroundcolor,a["border-color"]=t.bordercolor,a["border-style"]=t.borderstyle}r.setStyles(o,{...Rt(t),...a}),r.setAttribs(o,{...Ot(t),...n});var i=u.select("caption",d)[0];(i&&!p.caption||!i&&p.caption)&&m.execCommand("mceTableToggleCaption"),rt(m,d,p.align)}m.focus(),m.addVisual(),0<S(b)&&(c=!(s=C(b,"caption"))||1<S(b),nt(m,d,{structure:s,style:c}))})},Wo=(e,t)=>{var o,l,r,n=e.dom;let a,s=((e,t)=>{const o=Rt(e),l=Ot(e),r=t?{borderstyle:d(o,"border-style").getOr(""),bordercolor:Ro(d(o,"border-color").getOr("")),backgroundcolor:Ro(d(o,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...o,...l,...r,...(t=o["border-width"],E(e)&&t?{border:t}:d(l,"border").fold(()=>({}),e=>({border:e}))),...{...d(o,"border-spacing").or(d(l,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),...d(o,"border-padding").or(d(l,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}))}}})(e,k(e));t?(s.cols="1",s.rows="1",k(e)&&(s.borderstyle="",s.bordercolor="",s.backgroundcolor="")):(a=n.getParent(e.selection.getStart(),"table",e.getBody()))?s=(n=e,o=a,l=k(e),r=n.dom,i=E(n)?r.getStyle(o,"border-spacing")||r.getAttrib(o,"cellspacing"):r.getAttrib(o,"cellspacing")||r.getStyle(o,"border-spacing"),m=E(n)?lt(r,o,"padding")||r.getAttrib(o,"cellpadding"):r.getAttrib(o,"cellpadding")||lt(r,o,"padding"),{width:r.getStyle(o,"width")||r.getAttrib(o,"width"),height:r.getStyle(o,"height")||r.getAttrib(o,"height"),cellspacing:null!=i?i:"",cellpadding:null!=m?m:"",border:(i=r,m=o,c=u(R.fromDom(m),"border-width"),E(n)&&c.isSome()?c.getOr(""):i.getAttrib(m,"border")||lt(n.dom,m,"border-width")||lt(n.dom,m,"border")||""),caption:!!r.select("caption",o)[0],class:r.getAttrib(o,"class",""),align:No(n,o),...l?Oo(o):{}}):k(e)&&(s.borderstyle="",s.bordercolor="",s.backgroundcolor="");var c=p(vt(e)),i=(0<c.length&&s.class&&(s.class=s.class.replace(/\s*mce\-item\-table\s*/g,"")),{type:"grid",columns:2,items:Ho(e,c,t)}),m=k(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[i]},yo(e,"table")]}:{type:"panel",items:[i]};e.windowManager.open({title:"Table Properties",size:"normal",body:m,onSubmit:g(Vo,e,a,s),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s})},zo=r=>{m({mceTableProps:g(Wo,r,!1),mceTableRowProps:g(Lo,r),mceTableCellProps:g(Eo,r),mceInsertTableDialog:g(Wo,r,!0)},(l,e)=>r.addCommand(e,()=>{var e,t,o=l;e=Oe(r),t=pe("table"),Se((e,t)=>t(e),Ce,e,t,void 0).forall(Ae)&&o()}))},$o=U,Uo=(e,t,o)=>{return t.length<=1?v.none():(l=e,e=o.firstSelectedSelector,o=o.lastSelectedSelector,Ht(l,e,o).bind(r=>{const e=e=>_(l,e),t="thead,tfoot,tbody,table",o=a(r.first,t,e),n=a(r.last,t,e);return o.bind(l=>n.bind(e=>{var t,o;return _(l,e)?(e=r.table,t=r.first,o=r.last,e=Nt(e),Dt(e,t,o)):v.none()}))}).map(e=>({bounds:e,cells:t})));var l},Go=r=>{const e=co(v.none()),o=co([]);let l=v.none();const n=pe("caption"),t=t=>l.forall(e=>!e[t]),a=()=>Gt(Oe(r),N(r)).bind(o=>{return Ee(P(o),Gt((e=r,R.fromDom(e.selection.getEnd())),N(r)).bind(P),(e,t)=>{return _(e,t)?n(o)?v.some({element:t=o,mergable:v.none(),unmergable:v.none(),selection:[t]}):v.some((t=Jt(r),e=e,{element:o,mergable:Uo(e,t,$t),unmergable:(e=>{const t=(e,t)=>M(e,t).exists(e=>1<parseInt(e,10));return 0<e.length&&le(e,e=>t(e,"rowspan")||t(e,"colspan"))?v.some(e):v.none()})(t),selection:$o(t)})):v.none()}).bind(U);var e}),s=a=>P(a.element).map(e=>{const o=et(e),t=xo(o,a).getOr([]),l=te(t,(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=o.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:(n=o,a.mergable.filter(e=>Ao(n,e.cells)).isSome()),unmergeable:(r=o,a.unmergable.filter(e=>Ao(r,e)).isSome()),locked:l};var r,n}),c=()=>{e.set((t=>{let o,l=!1;return(...e)=>(l||(l=!0,o=t.apply(null,e)),o)})(a)()),l=e.get().bind(s),x(o.get(),G)},i=t=>(t(),o.set(o.get().concat([t])),()=>{o.set(A(o.get(),e=>e!==t))}),m=(t,o)=>i(()=>e.get().fold(()=>{t.setEnabled(!1)},e=>{t.setEnabled(!o(e)&&r.selection.isEditable())})),d=(t,o,l)=>i(()=>e.get().fold(()=>{t.setEnabled(!1),t.setActive(!1)},e=>{t.setEnabled(!o(e)&&r.selection.isEditable()),t.setActive(l(e))})),u=t=>l.exists(e=>e.locked[t]),p=(t,o)=>e=>d(e,e=>n(e.element),()=>r.queryCommandValue(t)===o),b=p("mceTableRowType","header"),g=p("mceTableColType","th");return r.on("NodeChange ExecCommand TableSelectorChange",c),{onSetupTable:e=>m(e,e=>!1),onSetupCellOrRow:e=>m(e,e=>n(e.element)),onSetupColumn:t=>e=>m(e,e=>n(e.element)||u(t)),onSetupPasteable:t=>e=>m(e,e=>n(e.element)||t().isNone()),onSetupPasteableColumn:(t,o)=>e=>m(e,e=>n(e.element)||t().isNone()||u(o)),onSetupMergeable:e=>m(e,e=>t("mergeable")),onSetupUnmergeable:e=>m(e,e=>t("unmergeable")),resetTargets:c,onSetupTableWithCaption:e=>d(e,h,e=>P(e.element,N(r)).exists(e=>{return t="caption",e=e=e,oe(e.dom.childNodes,e=>{return e=R.fromDom(e),O(e,t)}).map(R.fromDom).isSome();var t})),onSetupTableRowHeaders:b,onSetupTableColumnHeaders:g,targets:e.get}};var Ko=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Jo=t=>{var e=null!=(e=Ko.read())?e:[];return ne(e,e=>v.from(e.getType(t)))},Qo=()=>Jo("x-tinymce/dom-table-rows"),Xo=()=>Jo("x-tinymce/dom-table-columns"),Yo=o=>e=>{const t=()=>{e.setEnabled(o.selection.isEditable())};return o.on("NodeChange",t),t(),()=>{o.off("NodeChange",t)}},Zo=o=>e=>{const t=()=>{e.setEnabled(o.selection.isEditable())};return o.on("NodeChange",t),t(),()=>{o.off("NodeChange",t)}};t.add("table",e=>{var t,o=Go(e);(a=e.options.register)("table_border_widths",{processor:"object[]",default:ct}),a("table_border_styles",{processor:"object[]",default:it}),a("table_cell_advtab",{processor:"boolean",default:!0}),a("table_row_advtab",{processor:"boolean",default:!0}),a("table_advtab",{processor:"boolean",default:!0}),a("table_appearance_options",{processor:"boolean",default:!0}),a("table_grid",{processor:"boolean",default:!st.deviceType.isTouch()}),a("table_cell_class_list",{processor:"object[]",default:[]}),a("table_row_class_list",{processor:"object[]",default:[]}),a("table_class_list",{processor:"object[]",default:[]}),a("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),a("table_background_color_map",{processor:"object[]",default:[]}),a("table_border_color_map",{processor:"object[]",default:[]}),zo(e);{var l=e,r=o;const s=e=>()=>l.execCommand(e),c=(e,t)=>!!l.queryCommandSupported(t.command)&&(l.ui.registry.addMenuItem(e,{...t,onAction:y(t.onAction)?t.onAction:s(t.command)}),!0),i=(e,t)=>{l.queryCommandSupported(t.command)&&l.ui.registry.addToggleMenuItem(e,{...t,onAction:y(t.onAction)?t.onAction:s(t.command)})},m=[c("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:r.onSetupCellOrRow}),c("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:r.onSetupCellOrRow}),c("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:r.onSetupCellOrRow}),c("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:r.onSetupCellOrRow}),c("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:r.onSetupCellOrRow}),c("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:r.onSetupCellOrRow}),c("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:r.onSetupPasteable(Qo)}),c("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:r.onSetupPasteable(Qo)})],d=[c("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:r.onSetupColumn("onFirst")}),c("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:r.onSetupColumn("onLast")}),c("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:r.onSetupColumn("onAny")}),c("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:r.onSetupColumn("onAny")}),c("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:r.onSetupColumn("onAny")}),c("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:r.onSetupPasteableColumn(Xo,"onFirst")}),c("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:r.onSetupPasteableColumn(Xo,"onLast")})],u=[c("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:r.onSetupCellOrRow}),c("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:r.onSetupMergeable}),c("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:r.onSetupUnmergeable})],p=(ft(l)?l.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:e=>{l.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})}}],onSetup:Zo(l)}):l.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:s("mceInsertTableDialog"),onSetup:Zo(l)}),l.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:s("mceInsertTableDialog"),onSetup:Zo(l)}),c("tableprops",{text:"Table properties",onSetup:r.onSetupTable,command:"mceTableProps"}),c("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:r.onSetupTable,command:"mceTableDelete"}),T(m,!0)&&l.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:w("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),T(d,!0)&&l.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:w("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),T(u,!0)&&l.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:w("tablecellprops tablemergecells tablesplitcells")}),l.ui.registry.addContextMenu("table",{update:()=>(r.resetTargets(),r.targets().fold(w(""),e=>"caption"===D(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))}),mo(vt(l))),b=(0!==p.length&&l.queryCommandSupported("mceTableToggleClass")&&l.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>B(l,p,"tableclass",e=>l.execCommand("mceTableToggleClass",!1,e)),onSetup:r.onSetupTable}),mo(yt(l)));0!==b.length&&l.queryCommandSupported("mceTableCellToggleClass")&&l.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>B(l,b,"tablecellclass",e=>l.execCommand("mceTableCellToggleClass",!1,e)),onSetup:r.onSetupCellOrRow}),l.queryCommandSupported("mceTableApplyCellStyle")&&(l.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>B(l,Xt,"tablecellverticalalign",F(l,"vertical-align")),onSetup:r.onSetupCellOrRow}),l.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>B(l,ut(l),"tablecellborderwidth",F(l,"border-width")),onSetup:r.onSetupCellOrRow}),l.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>B(l,pt(l),"tablecellborderstyle",F(l,"border-style")),onSetup:r.onSetupCellOrRow}),l.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>po(l,Ct(l),"background-color"),onSetup:r.onSetupCellOrRow}),l.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>po(l,Tt(l),"border-color"),onSetup:r.onSetupCellOrRow})),i("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:r.onSetupTableWithCaption}),i("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:bo(l),onSetup:r.onSetupTableRowHeaders}),i("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:go(l),onSetup:r.onSetupTableRowHeaders})}{var n=e,a=o,o,o;n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Yo(n),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const g=e=>()=>n.execCommand(e),h=(e,t)=>{n.queryCommandSupported(t.command)&&n.ui.registry.addButton(e,{...t,onAction:y(t.onAction)?t.onAction:g(t.command)})},f=(e,t)=>{n.queryCommandSupported(t.command)&&n.ui.registry.addToggleButton(e,{...t,onAction:y(t.onAction)?t.onAction:g(t.command)})};h("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:a.onSetupTable}),h("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:a.onSetupTable}),h("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:a.onSetupCellOrRow}),h("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:a.onSetupMergeable}),h("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:a.onSetupUnmergeable}),h("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:a.onSetupCellOrRow}),h("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:a.onSetupCellOrRow}),h("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:a.onSetupCellOrRow}),h("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:a.onSetupCellOrRow}),h("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:a.onSetupColumn("onFirst")}),h("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:a.onSetupColumn("onLast")}),h("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:a.onSetupColumn("onAny")}),h("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:a.onSetupCellOrRow}),h("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:a.onSetupCellOrRow}),h("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:a.onSetupPasteable(Qo)}),h("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:a.onSetupPasteable(Qo)}),h("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:a.onSetupColumn("onAny")}),h("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:a.onSetupColumn("onAny")}),h("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:a.onSetupPasteableColumn(Xo,"onFirst")}),h("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:a.onSetupPasteableColumn(Xo,"onLast")}),h("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Yo(n)}),0!==(o=mo(vt(n))).length&&n.queryCommandSupported("mceTableToggleClass")&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:uo(n,o,"tableclass",e=>n.execCommand("mceTableToggleClass",!1,e)),onSetup:a.onSetupTable}),0!==(o=mo(yt(n))).length&&n.queryCommandSupported("mceTableCellToggleClass")&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:uo(n,o,"tablecellclass",e=>n.execCommand("mceTableCellToggleClass",!1,e)),onSetup:a.onSetupCellOrRow}),n.queryCommandSupported("mceTableApplyCellStyle")&&(n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:uo(n,Xt,"tablecellverticalalign",F(n,"vertical-align")),onSetup:a.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:uo(n,ut(n),"tablecellborderwidth",F(n,"border-width")),onSetup:a.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:uo(n,pt(n),"tablecellborderstyle",F(n,"border-style")),onSetup:a.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:e=>e(po(n,Ct(n),"background-color")),onSetup:a.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:e=>e(po(n,Tt(n),"border-color")),onSetup:a.onSetupCellOrRow})),f("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:a.onSetupTableWithCaption}),f("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:bo(n),onSetup:a.onSetupTableRowHeaders}),f("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:go(n),onSetup:a.onSetupTableColumnHeaders})}t=e,0<(o=St(t)).length&&t.ui.registry.addContextToolbar("table",{predicate:e=>t.dom.is(e,"table")&&t.getBody().contains(e)&&t.dom.isEditable(e.parentNode),items:o,scope:"node",position:"node"})})}();