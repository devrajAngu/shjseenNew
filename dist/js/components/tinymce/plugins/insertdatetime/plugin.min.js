!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=t=>e=>e.options.get(t),l=t("insertdatetime_dateformat"),m=t("insertdatetime_timeformat"),c=t("insertdatetime_formats"),o=t("insertdatetime_element"),r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),n="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),s="January February March April May June July August September October November December".split(" "),d=(t,a)=>{if((t=""+t).length<a)for(let e=0;e<a-t.length;e++)t="0"+t;return t},u=(e,t,a=new Date)=>(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+a.getFullYear())).replace("%y",""+a.getYear())).replace("%m",d(a.getMonth()+1,2))).replace("%d",d(a.getDate(),2))).replace("%H",""+d(a.getHours(),2))).replace("%M",""+d(a.getMinutes(),2))).replace("%S",""+d(a.getSeconds(),2))).replace("%I",""+((a.getHours()+11)%12+1))).replace("%p",a.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(s[a.getMonth()]))).replace("%b",""+e.translate(i[a.getMonth()]))).replace("%A",""+e.translate(n[a.getDay()]))).replace("%a",""+e.translate(r[a.getDay()]))).replace("%%","%"),p=(e,t)=>{var a,r,n,i,s;o(e)?(a=u(e,t),r=/%[HMSIp]/.test(t)?u(e,"%Y-%m-%dT%H:%M"):u(e,"%Y-%m-%d"),(i=e.dom.getParent(e.selection.getStart(),"time"))?(i=i,s=(n=e).dom.create("time",{datetime:r},a),n.dom.replace(s,i),n.selection.select(s,!0),n.selection.collapse(!1)):e.insertContent('<time datetime="'+r+'">'+a+"</time>")):e.insertContent(u(e,t))};var g=tinymce.util.Tools.resolve("tinymce.util.Tools");const y=a=>e=>{const t=()=>{e.setEnabled(a.selection.isEditable())};return a.on("NodeChange",t),t(),()=>{a.off("NodeChange",t)}};e.add("insertdatetime",e=>{(n=(t=e).options.register)("insertdatetime_dateformat",{processor:"string",default:t.translate("%Y-%m-%d")}),n("insertdatetime_timeformat",{processor:"string",default:t.translate("%H:%M:%S")}),n("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),n("insertdatetime_element",{processor:"boolean",default:!1}),(r=e).addCommand("mceInsertDate",(e,t)=>{p(r,null!=t?t:l(r))}),r.addCommand("mceInsertTime",(e,t)=>{p(r,null!=t?t:m(r))});{var a=e;const i=c(a),s=(()=>{let t=(e=>{const t=c(e);return t.length>0?t[0]:m(e)})(a);return{get:()=>t,set:e=>{t=e}}})(),o=e=>a.execCommand("mceInsertDate",!1,e);a.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:e=>e===s.get(),fetch:e=>{e(g.map(i,e=>({type:"choiceitem",text:u(a,e),value:e})))},onAction:e=>{o(s.get())},onItemAction:(e,t)=>{s.set(t),o(t)},onSetup:y(a)}),a.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>g.map(i,e=>{return{type:"menuitem",text:u(a,e),onAction:(t=e,()=>{s.set(t),o(t)})};var t}),onSetup:y(a)})}var r,t,n})}();