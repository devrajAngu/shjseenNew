!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=s=>e=>{return r=typeof(e=e),(null===e?"null":"object"==r&&Array.isArray(e)?"array":"object"==r&&(e=e,(t=String).prototype.isPrototypeOf(e)||(null==(e=e.constructor)?void 0:e.name)===t.name)?"string":r)===s;var t,r},m=t("string"),o=t("object"),c=t("array");var p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),u=tinymce.util.Tools.resolve("tinymce.EditorManager"),f=tinymce.util.Tools.resolve("tinymce.Env"),y=tinymce.util.Tools.resolve("tinymce.util.Tools");const r=t=>e=>e.options.get(t),l=r("importcss_merge_classes"),s=r("importcss_exclusive"),d=r("importcss_selector_converter"),h=r("importcss_selector_filter"),_=r("importcss_groups"),g=r("importcss_append"),v=r("importcss_file_filter"),b=r("skin"),x=r("skin_url"),T=Array.prototype.push,S=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,k=t=>m(t)?e=>-1!==e.indexOf(t):t instanceof RegExp?e=>t.test(e):t,w=(e,t)=>{let r={};var s,o,i,n=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(n)return s=n[1],o=n[2].substr(1).split(".").join(" "),i=y.makeMap("a,img"),n[1]?(r={title:t},e.schema.getTextBlockElements()[s]?r.block=s:e.schema.getBlockElements()[s]||i[s.toLowerCase()]?r.selector=s:r.inline=s):n[2]&&(r={inline:"span",title:t.substr(1),classes:o}),l(e)?r.classes=o:r.attributes={class:o},r},A=(e,t)=>null===t||s(e),i=a=>{a.on("init",()=>{const s=(()=>{const t=[],r=[],s={};return{addItemToGroup:(e,t)=>{s[e]?s[e].push(t):(r.push(e),s[e]=[t])},addItem:e=>{t.push(e)},toFormats:()=>{return(r=>{var s=[];for(let e=0,t=r.length;e<t;++e){if(!c(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);T.apply(s,r[e])}return s})(((t,r)=>{const s=t.length,o=new Array(s);for(let e=0;e<s;e++){const s=t[e];o[e]=r(s,e)}return o})(r,e=>{var t=s[e];return 0===t.length?[]:[{title:e,items:t}]})).concat(t)}}})(),l={},o=k(h(a)),i=(e=_(a),y.map(e,e=>y.extend({},e,{original:e,selectors:{},filter:k(e.filter)}))),n=(e,t)=>{if(o=a,i=e,n=t,c=l,!(A(o,n)?i in c:i in n.selectors)){o=a,c=e,i=t,n=l,A(o,i)?n[c]=!0:i.selectors[c]=!0;o=(r=a).plugins.importcss,s=e,n=t,i=d(r);c=(n&&n.selector_converter?n.selector_converter:i||(()=>w(r,s))).call(o,s,n);if(c){const e=c.name||p.DOM.uniqueId();return a.formatter.register(e,c),{title:c.title,format:e}}}var r,s,o,i,n,c;return null};y.each(((c,e,l)=>{const a=[],r={},p=(e,t)=>{let r,s=e.href;if(i=s,n=f.cacheSuffix,(s=i=m(i)?i.replace("?"+n,"").replace("&"+n,""):i)&&(!l||l(s,t))&&(n=c,i=s,!(t=b(n))||(o=(o=x(n))?n.documentBaseURI.toAbsolute(o):u.baseURL+"/skins/ui/"+t,t=u.baseURL+"/skins/content/",i!==o+"/content"+(n.inline?".inline":"")+".min.css"&&-1===i.indexOf(t)))){y.each(e.imports,e=>{p(e,!0)});try{r=e.cssRules||e.rules}catch(e){}y.each(r,e=>{e.styleSheet?p(e.styleSheet,!0):e.selectorText&&y.each(e.selectorText.split(","),e=>{a.push(y.trim(e))})})}var o,i,n};y.each(c.contentCSS,e=>{r[e]=!0}),l=l||((e,t)=>t||r[e]);try{y.each(e.styleSheets,e=>{p(e)})}catch(c){}return a})(a,a.getDoc(),k(v(a))),r=>{var e,t;S.test(r)||o&&!o(r)||(e=i,t=r,0<(e=y.grep(e,e=>!e.filter||e.filter(t))).length?y.each(e,e=>{var t=n(r,e);t&&s.addItemToGroup(e.title,t)}):(e=n(r,null))&&s.addItem(e))});var e=s.toFormats();a.dispatch("addStyleModifications",{items:e,replace:!g(a)})})};e.add("importcss",e=>{return r=e.options.register,s=e=>m(e)||"function"==typeof e||o(e),r("importcss_merge_classes",{processor:"boolean",default:!0}),r("importcss_exclusive",{processor:"boolean",default:!0}),r("importcss_selector_converter",{processor:"function"}),r("importcss_selector_filter",{processor:s}),r("importcss_file_filter",{processor:s}),r("importcss_groups",{processor:"object[]"}),r("importcss_append",{processor:"boolean",default:!1}),i(e),t=e,{convertSelectorToFormat:e=>w(t,e)};var t,r,s})}();